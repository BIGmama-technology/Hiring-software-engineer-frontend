"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/liveblocks/documents/create";
exports.ids = ["pages/api/liveblocks/documents/create"];
exports.modules = {

/***/ "base-64":
/*!**************************!*\
  !*** external "base-64" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("base-64");

/***/ }),

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/next":
/*!*********************************!*\
  !*** external "next-auth/next" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("next-auth/next");

/***/ }),

/***/ "next-auth/providers/credentials":
/*!**************************************************!*\
  !*** external "next-auth/providers/credentials" ***!
  \**************************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/credentials");

/***/ }),

/***/ "next-auth/react":
/*!**********************************!*\
  !*** external "next-auth/react" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("next-auth/react");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "nanoid":
/*!*************************!*\
  !*** external "nanoid" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("nanoid");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fliveblocks%2Fdocuments%2Fcreate&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fliveblocks%2Fdocuments%2Fcreate.ts&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fliveblocks%2Fdocuments%2Fcreate&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fliveblocks%2Fdocuments%2Fcreate.ts&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_liveblocks_documents_create_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/liveblocks/documents/create.ts */ \"(api)/./pages/api/liveblocks/documents/create.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_liveblocks_documents_create_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_liveblocks_documents_create_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_liveblocks_documents_create_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_liveblocks_documents_create_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/liveblocks/documents/create\",\n        pathname: \"/api/liveblocks/documents/create\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_liveblocks_documents_create_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmxpdmVibG9ja3MlMkZkb2N1bWVudHMlMkZjcmVhdGUmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmxpdmVibG9ja3MlMkZkb2N1bWVudHMlMkZjcmVhdGUudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDdUU7QUFDdkU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHNFQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxzRUFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vP2NhYmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9saXZlYmxvY2tzL2RvY3VtZW50cy9jcmVhdGUudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9saXZlYmxvY2tzL2RvY3VtZW50cy9jcmVhdGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9saXZlYmxvY2tzL2RvY3VtZW50cy9jcmVhdGVcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fliveblocks%2Fdocuments%2Fcreate&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fliveblocks%2Fdocuments%2Fcreate.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./constants.ts":
/*!**********************!*\
  !*** ./constants.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DASHBOARD_DRAFTS_URL: () => (/* binding */ DASHBOARD_DRAFTS_URL),\n/* harmony export */   DASHBOARD_GROUP_URL: () => (/* binding */ DASHBOARD_GROUP_URL),\n/* harmony export */   DASHBOARD_URL: () => (/* binding */ DASHBOARD_URL),\n/* harmony export */   DOCUMENT_URL: () => (/* binding */ DOCUMENT_URL),\n/* harmony export */   MARKETING_URL: () => (/* binding */ MARKETING_URL)\n/* harmony export */ });\nconst MARKETING_URL = \"/\";\nconst DASHBOARD_URL = \"/dashboard\";\nconst DASHBOARD_DRAFTS_URL = `${DASHBOARD_URL}/drafts`;\nconst DASHBOARD_GROUP_URL = (id)=>`${DASHBOARD_URL}/group/${id}`;\nconst DOCUMENT_URL = (type, id)=>`/${type}/${id}`;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9jb25zdGFudHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFFTyxNQUFNQSxnQkFBZ0IsSUFBSTtBQUUxQixNQUFNQyxnQkFBZ0IsYUFBYTtBQUNuQyxNQUFNQyx1QkFBdUIsQ0FBQyxFQUFFRCxjQUFjLE9BQU8sQ0FBQyxDQUFDO0FBQ3ZELE1BQU1FLHNCQUFzQixDQUFDQyxLQUNsQyxDQUFDLEVBQUVILGNBQWMsT0FBTyxFQUFFRyxHQUFHLENBQUMsQ0FBQztBQUUxQixNQUFNQyxlQUFlLENBQUNDLE1BQW9CRixLQUMvQyxDQUFDLENBQUMsRUFBRUUsS0FBSyxDQUFDLEVBQUVGLEdBQUcsQ0FBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vY29uc3RhbnRzLnRzP2RkNGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRG9jdW1lbnRUeXBlIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuZXhwb3J0IGNvbnN0IE1BUktFVElOR19VUkwgPSBcIi9cIjtcblxuZXhwb3J0IGNvbnN0IERBU0hCT0FSRF9VUkwgPSBcIi9kYXNoYm9hcmRcIjtcbmV4cG9ydCBjb25zdCBEQVNIQk9BUkRfRFJBRlRTX1VSTCA9IGAke0RBU0hCT0FSRF9VUkx9L2RyYWZ0c2A7XG5leHBvcnQgY29uc3QgREFTSEJPQVJEX0dST1VQX1VSTCA9IChpZDogc3RyaW5nKSA9PlxuICBgJHtEQVNIQk9BUkRfVVJMfS9ncm91cC8ke2lkfWA7XG5cbmV4cG9ydCBjb25zdCBET0NVTUVOVF9VUkwgPSAodHlwZTogRG9jdW1lbnRUeXBlLCBpZDogc3RyaW5nKSA9PlxuICBgLyR7dHlwZX0vJHtpZH1gO1xuIl0sIm5hbWVzIjpbIk1BUktFVElOR19VUkwiLCJEQVNIQk9BUkRfVVJMIiwiREFTSEJPQVJEX0RSQUZUU19VUkwiLCJEQVNIQk9BUkRfR1JPVVBfVVJMIiwiaWQiLCJET0NVTUVOVF9VUkwiLCJ0eXBlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./constants.ts\n");

/***/ }),

/***/ "(api)/./data/colors.ts":
/*!************************!*\
  !*** ./data/colors.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   colors: () => (/* binding */ colors)\n/* harmony export */ });\n/**\n * Random colors used in the app.\n */ const colors = [\n    \"#0077ff\",\n    \"#00bbff\",\n    \"#00cc88\",\n    \"#88cc11\",\n    \"#ffbb00\",\n    \"#ff8811\",\n    \"#ee1144\",\n    \"#ee44bb\",\n    \"#8855bf\"\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9kYXRhL2NvbG9ycy50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7O0NBRUMsR0FDTSxNQUFNQSxTQUFTO0lBQ3BCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtDQUNELENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kYXRhL2NvbG9ycy50cz83Yzk3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUmFuZG9tIGNvbG9ycyB1c2VkIGluIHRoZSBhcHAuXG4gKi9cbmV4cG9ydCBjb25zdCBjb2xvcnMgPSBbXG4gIFwiIzAwNzdmZlwiLFxuICBcIiMwMGJiZmZcIixcbiAgXCIjMDBjYzg4XCIsXG4gIFwiIzg4Y2MxMVwiLFxuICBcIiNmZmJiMDBcIixcbiAgXCIjZmY4ODExXCIsXG4gIFwiI2VlMTE0NFwiLFxuICBcIiNlZTQ0YmJcIixcbiAgXCIjODg1NWJmXCIsXG5dO1xuIl0sIm5hbWVzIjpbImNvbG9ycyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./data/colors.ts\n");

/***/ }),

/***/ "(api)/./data/groups.ts":
/*!************************!*\
  !*** ./data/groups.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   groups: () => (/* binding */ groups)\n/* harmony export */ });\n/**\n * This array simulates a database consisting of a list of groups.\n * Assign users to groups in /data/users.ts\n */ const groups = [\n    {\n        id: \"product\",\n        name: \"Product\"\n    },\n    {\n        id: \"engineering\",\n        name: \"Engineering\"\n    },\n    {\n        id: \"design\",\n        name: \"Design\"\n    }\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9kYXRhL2dyb3Vwcy50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRUE7OztDQUdDLEdBQ00sTUFBTUEsU0FBa0I7SUFDN0I7UUFDRUMsSUFBSTtRQUNKQyxNQUFNO0lBQ1I7SUFDQTtRQUNFRCxJQUFJO1FBQ0pDLE1BQU07SUFDUjtJQUNBO1FBQ0VELElBQUk7UUFDSkMsTUFBTTtJQUNSO0NBQ0QsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2RhdGEvZ3JvdXBzLnRzPzRmODMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR3JvdXAgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuLyoqXG4gKiBUaGlzIGFycmF5IHNpbXVsYXRlcyBhIGRhdGFiYXNlIGNvbnNpc3Rpbmcgb2YgYSBsaXN0IG9mIGdyb3Vwcy5cbiAqIEFzc2lnbiB1c2VycyB0byBncm91cHMgaW4gL2RhdGEvdXNlcnMudHNcbiAqL1xuZXhwb3J0IGNvbnN0IGdyb3VwczogR3JvdXBbXSA9IFtcbiAge1xuICAgIGlkOiBcInByb2R1Y3RcIixcbiAgICBuYW1lOiBcIlByb2R1Y3RcIixcbiAgfSxcbiAge1xuICAgIGlkOiBcImVuZ2luZWVyaW5nXCIsXG4gICAgbmFtZTogXCJFbmdpbmVlcmluZ1wiLFxuICB9LFxuICB7XG4gICAgaWQ6IFwiZGVzaWduXCIsXG4gICAgbmFtZTogXCJEZXNpZ25cIixcbiAgfSxcbl07XG4iXSwibmFtZXMiOlsiZ3JvdXBzIiwiaWQiLCJuYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./data/groups.ts\n");

/***/ }),

/***/ "(api)/./data/users.ts":
/*!***********************!*\
  !*** ./data/users.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   users: () => (/* binding */ users)\n/* harmony export */ });\n/**\n * This array simulates a database consisting of a list of users.\n * After signing up with your auth solution (e.g. GitHub, Auth0)\n * place your user info in an object, with the email address you used\n * as the id.\n * The groupIds are the names of the groups the user is part of.\n * Group info is in /data/groups.ts\n */ const users = [\n    /*\n  {\n    id: \"[YOUR EMAIL ADDRESS]\",\n    name: \"[YOUR DISPLAY NAME]\",\n    avatar: \"https://liveblocks.io/avatars/avatar-0.png\",\n    groupIds: [\"product\", \"engineering\", \"design\"],\n  },\n  */ {\n        id: \"charlie.layne@example.com\",\n        name: \"Charlie Layne\",\n        avatar: \"https://liveblocks.io/avatars/avatar-2.png\",\n        groupIds: [\n            \"product\",\n            \"engineering\",\n            \"design\"\n        ]\n    },\n    {\n        id: \"mislav.abha@example.com\",\n        name: \"Mislav Abha\",\n        avatar: \"https://liveblocks.io/avatars/avatar-3.png\",\n        groupIds: [\n            \"engineering\"\n        ]\n    },\n    {\n        id: \"tatum.paolo@example.com\",\n        name: \"Tatum Paolo\",\n        avatar: \"https://liveblocks.io/avatars/avatar-4.png\",\n        groupIds: [\n            \"engineering\",\n            \"design\"\n        ]\n    },\n    {\n        id: \"anjali.wanda@example.com\",\n        name: \"Anjali Wanda\",\n        avatar: \"https://liveblocks.io/avatars/avatar-5.png\",\n        groupIds: [\n            \"product\"\n        ]\n    },\n    {\n        id: \"emil.joyce@example.com\",\n        name: \"Emil Joyce\",\n        avatar: \"https://liveblocks.io/avatars/avatar-6.png\",\n        groupIds: [\n            \"product\",\n            \"design\"\n        ]\n    }\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9kYXRhL3VzZXJzLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFFQTs7Ozs7OztDQU9DLEdBQ00sTUFBTUEsUUFBK0I7SUFDMUM7Ozs7Ozs7RUFPQSxHQUNBO1FBQ0VDLElBQUk7UUFDSkMsTUFBTTtRQUNOQyxRQUFRO1FBQ1JDLFVBQVU7WUFBQztZQUFXO1lBQWU7U0FBUztJQUNoRDtJQUNBO1FBQ0VILElBQUk7UUFDSkMsTUFBTTtRQUNOQyxRQUFRO1FBQ1JDLFVBQVU7WUFBQztTQUFjO0lBQzNCO0lBQ0E7UUFDRUgsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLFFBQVE7UUFDUkMsVUFBVTtZQUFDO1lBQWU7U0FBUztJQUNyQztJQUNBO1FBQ0VILElBQUk7UUFDSkMsTUFBTTtRQUNOQyxRQUFRO1FBQ1JDLFVBQVU7WUFBQztTQUFVO0lBQ3ZCO0lBQ0E7UUFDRUgsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLFFBQVE7UUFDUkMsVUFBVTtZQUFDO1lBQVc7U0FBUztJQUNqQztDQUNELENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kYXRhL3VzZXJzLnRzPzcwNWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuLi90eXBlc1wiO1xuXG4vKipcbiAqIFRoaXMgYXJyYXkgc2ltdWxhdGVzIGEgZGF0YWJhc2UgY29uc2lzdGluZyBvZiBhIGxpc3Qgb2YgdXNlcnMuXG4gKiBBZnRlciBzaWduaW5nIHVwIHdpdGggeW91ciBhdXRoIHNvbHV0aW9uIChlLmcuIEdpdEh1YiwgQXV0aDApXG4gKiBwbGFjZSB5b3VyIHVzZXIgaW5mbyBpbiBhbiBvYmplY3QsIHdpdGggdGhlIGVtYWlsIGFkZHJlc3MgeW91IHVzZWRcbiAqIGFzIHRoZSBpZC5cbiAqIFRoZSBncm91cElkcyBhcmUgdGhlIG5hbWVzIG9mIHRoZSBncm91cHMgdGhlIHVzZXIgaXMgcGFydCBvZi5cbiAqIEdyb3VwIGluZm8gaXMgaW4gL2RhdGEvZ3JvdXBzLnRzXG4gKi9cbmV4cG9ydCBjb25zdCB1c2VyczogT21pdDxVc2VyLCBcImNvbG9yXCI+W10gPSBbXG4gIC8qXG4gIHtcbiAgICBpZDogXCJbWU9VUiBFTUFJTCBBRERSRVNTXVwiLFxuICAgIG5hbWU6IFwiW1lPVVIgRElTUExBWSBOQU1FXVwiLFxuICAgIGF2YXRhcjogXCJodHRwczovL2xpdmVibG9ja3MuaW8vYXZhdGFycy9hdmF0YXItMC5wbmdcIixcbiAgICBncm91cElkczogW1wicHJvZHVjdFwiLCBcImVuZ2luZWVyaW5nXCIsIFwiZGVzaWduXCJdLFxuICB9LFxuICAqL1xuICB7XG4gICAgaWQ6IFwiY2hhcmxpZS5sYXluZUBleGFtcGxlLmNvbVwiLFxuICAgIG5hbWU6IFwiQ2hhcmxpZSBMYXluZVwiLFxuICAgIGF2YXRhcjogXCJodHRwczovL2xpdmVibG9ja3MuaW8vYXZhdGFycy9hdmF0YXItMi5wbmdcIixcbiAgICBncm91cElkczogW1wicHJvZHVjdFwiLCBcImVuZ2luZWVyaW5nXCIsIFwiZGVzaWduXCJdLFxuICB9LFxuICB7XG4gICAgaWQ6IFwibWlzbGF2LmFiaGFAZXhhbXBsZS5jb21cIixcbiAgICBuYW1lOiBcIk1pc2xhdiBBYmhhXCIsXG4gICAgYXZhdGFyOiBcImh0dHBzOi8vbGl2ZWJsb2Nrcy5pby9hdmF0YXJzL2F2YXRhci0zLnBuZ1wiLFxuICAgIGdyb3VwSWRzOiBbXCJlbmdpbmVlcmluZ1wiXSxcbiAgfSxcbiAge1xuICAgIGlkOiBcInRhdHVtLnBhb2xvQGV4YW1wbGUuY29tXCIsXG4gICAgbmFtZTogXCJUYXR1bSBQYW9sb1wiLFxuICAgIGF2YXRhcjogXCJodHRwczovL2xpdmVibG9ja3MuaW8vYXZhdGFycy9hdmF0YXItNC5wbmdcIixcbiAgICBncm91cElkczogW1wiZW5naW5lZXJpbmdcIiwgXCJkZXNpZ25cIl0sXG4gIH0sXG4gIHtcbiAgICBpZDogXCJhbmphbGkud2FuZGFAZXhhbXBsZS5jb21cIixcbiAgICBuYW1lOiBcIkFuamFsaSBXYW5kYVwiLFxuICAgIGF2YXRhcjogXCJodHRwczovL2xpdmVibG9ja3MuaW8vYXZhdGFycy9hdmF0YXItNS5wbmdcIixcbiAgICBncm91cElkczogW1wicHJvZHVjdFwiXSxcbiAgfSxcbiAge1xuICAgIGlkOiBcImVtaWwuam95Y2VAZXhhbXBsZS5jb21cIixcbiAgICBuYW1lOiBcIkVtaWwgSm95Y2VcIixcbiAgICBhdmF0YXI6IFwiaHR0cHM6Ly9saXZlYmxvY2tzLmlvL2F2YXRhcnMvYXZhdGFyLTYucG5nXCIsXG4gICAgZ3JvdXBJZHM6IFtcInByb2R1Y3RcIiwgXCJkZXNpZ25cIl0sXG4gIH0sXG5dO1xuIl0sIm5hbWVzIjpbInVzZXJzIiwiaWQiLCJuYW1lIiwiYXZhdGFyIiwiZ3JvdXBJZHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./data/users.ts\n");

/***/ }),

/***/ "(api)/./lib/server/auth/getServerSession.ts":
/*!*********************************************!*\
  !*** ./lib/server/auth/getServerSession.ts ***!
  \*********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getServerSession: () => (/* binding */ getServerSession)\n/* harmony export */ });\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/next */ \"next-auth/next\");\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_next__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _pages_api_auth_nextauth___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../pages/api/auth/[...nextauth] */ \"(api)/./pages/api/auth/[...nextauth].ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_auth_nextauth___WEBPACK_IMPORTED_MODULE_1__]);\n_pages_api_auth_nextauth___WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nfunction getServerSession(req, res) {\n    return (0,next_auth_next__WEBPACK_IMPORTED_MODULE_0__.unstable_getServerSession)(req, res, _pages_api_auth_nextauth___WEBPACK_IMPORTED_MODULE_1__.authOptions);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2F1dGgvZ2V0U2VydmVyU2Vzc2lvbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQzJEO0FBQ1M7QUFFN0QsU0FBU0UsaUJBQ2RDLEdBQXFDLEVBQ3JDQyxHQUFxQztJQUVyQyxPQUFPSix5RUFBeUJBLENBQUNHLEtBQUtDLEtBQUtILGtFQUFXQTtBQUN4RCIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvYXV0aC9nZXRTZXJ2ZXJTZXNzaW9uLnRzP2Y5ZjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0IH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCB7IHVuc3RhYmxlX2dldFNlcnZlclNlc3Npb24gfSBmcm9tIFwibmV4dC1hdXRoL25leHRcIjtcbmltcG9ydCB7IGF1dGhPcHRpb25zIH0gZnJvbSBcIi4uLy4uLy4uL3BhZ2VzL2FwaS9hdXRoL1suLi5uZXh0YXV0aF1cIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZlclNlc3Npb24oXG4gIHJlcTogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlcVwiXSxcbiAgcmVzOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVzXCJdXG4pIHtcbiAgcmV0dXJuIHVuc3RhYmxlX2dldFNlcnZlclNlc3Npb24ocmVxLCByZXMsIGF1dGhPcHRpb25zKTtcbn1cbiJdLCJuYW1lcyI6WyJ1bnN0YWJsZV9nZXRTZXJ2ZXJTZXNzaW9uIiwiYXV0aE9wdGlvbnMiLCJnZXRTZXJ2ZXJTZXNzaW9uIiwicmVxIiwicmVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/auth/getServerSession.ts\n");

/***/ }),

/***/ "(api)/./lib/server/auth/index.ts":
/*!**********************************!*\
  !*** ./lib/server/auth/index.ts ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _getServerSession__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getServerSession */ \"(api)/./lib/server/auth/getServerSession.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_getServerSession__WEBPACK_IMPORTED_MODULE_0__]);\n_getServerSession__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getServerSession__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getServerSession__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2F1dGgvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBbUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL2F1dGgvaW5kZXgudHM/NTZiNCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLi9nZXRTZXJ2ZXJTZXNzaW9uXCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/auth/index.ts\n");

/***/ }),

/***/ "(api)/./lib/server/database/getGroup.ts":
/*!*****************************************!*\
  !*** ./lib/server/database/getGroup.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getGroup: () => (/* binding */ getGroup)\n/* harmony export */ });\n/* harmony import */ var _data_groups__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../data/groups */ \"(api)/./data/groups.ts\");\n\n/**\n * Get Group\n *\n * Simulates calling your database and returning a group\n *\n * @param id - The group's id\n */ async function getGroup(id) {\n    return _data_groups__WEBPACK_IMPORTED_MODULE_0__.groups.find((group)=>group.id === id) ?? null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RhdGFiYXNlL2dldEdyb3VwLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQThDO0FBRzlDOzs7Ozs7Q0FNQyxHQUNNLGVBQWVDLFNBQVNDLEVBQVU7SUFDdkMsT0FBT0YsZ0RBQU1BLENBQUNHLElBQUksQ0FBQyxDQUFDQyxRQUFVQSxNQUFNRixFQUFFLEtBQUtBLE9BQU87QUFDcEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL2RhdGFiYXNlL2dldEdyb3VwLnRzP2JhMDEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ3JvdXBzIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvZ3JvdXBzXCI7XG5pbXBvcnQgeyBHcm91cCB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuXG4vKipcbiAqIEdldCBHcm91cFxuICpcbiAqIFNpbXVsYXRlcyBjYWxsaW5nIHlvdXIgZGF0YWJhc2UgYW5kIHJldHVybmluZyBhIGdyb3VwXG4gKlxuICogQHBhcmFtIGlkIC0gVGhlIGdyb3VwJ3MgaWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEdyb3VwKGlkOiBzdHJpbmcpOiBQcm9taXNlPEdyb3VwIHwgbnVsbD4ge1xuICByZXR1cm4gZ3JvdXBzLmZpbmQoKGdyb3VwKSA9PiBncm91cC5pZCA9PT0gaWQpID8/IG51bGw7XG59XG4iXSwibmFtZXMiOlsiZ3JvdXBzIiwiZ2V0R3JvdXAiLCJpZCIsImZpbmQiLCJncm91cCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/database/getGroup.ts\n");

/***/ }),

/***/ "(api)/./lib/server/database/getGroups.ts":
/*!******************************************!*\
  !*** ./lib/server/database/getGroups.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getGroups: () => (/* binding */ getGroups)\n/* harmony export */ });\n/* harmony import */ var _data_groups__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../data/groups */ \"(api)/./data/groups.ts\");\n\n/**\n * Get Groups\n *\n * Simulates calling your database and returning a list of groups\n *\n * @param ids - The group ids\n */ async function getGroups(ids) {\n    return _data_groups__WEBPACK_IMPORTED_MODULE_0__.groups.filter((group)=>ids.includes(group.id));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RhdGFiYXNlL2dldEdyb3Vwcy50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUE4QztBQUc5Qzs7Ozs7O0NBTUMsR0FDTSxlQUFlQyxVQUFVQyxHQUFhO0lBQzNDLE9BQU9GLGdEQUFNQSxDQUFDRyxNQUFNLENBQUMsQ0FBQ0MsUUFBVUYsSUFBSUcsUUFBUSxDQUFDRCxNQUFNRSxFQUFFO0FBQ3ZEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9kYXRhYmFzZS9nZXRHcm91cHMudHM/NTRlYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBncm91cHMgfSBmcm9tIFwiLi4vLi4vLi4vZGF0YS9ncm91cHNcIjtcbmltcG9ydCB7IEdyb3VwIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5cbi8qKlxuICogR2V0IEdyb3Vwc1xuICpcbiAqIFNpbXVsYXRlcyBjYWxsaW5nIHlvdXIgZGF0YWJhc2UgYW5kIHJldHVybmluZyBhIGxpc3Qgb2YgZ3JvdXBzXG4gKlxuICogQHBhcmFtIGlkcyAtIFRoZSBncm91cCBpZHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEdyb3VwcyhpZHM6IHN0cmluZ1tdKTogUHJvbWlzZTxHcm91cFtdPiB7XG4gIHJldHVybiBncm91cHMuZmlsdGVyKChncm91cCkgPT4gaWRzLmluY2x1ZGVzKGdyb3VwLmlkKSk7XG59XG4iXSwibmFtZXMiOlsiZ3JvdXBzIiwiZ2V0R3JvdXBzIiwiaWRzIiwiZmlsdGVyIiwiZ3JvdXAiLCJpbmNsdWRlcyIsImlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/database/getGroups.ts\n");

/***/ }),

/***/ "(api)/./lib/server/database/getUser.ts":
/*!****************************************!*\
  !*** ./lib/server/database/getUser.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getUser: () => (/* binding */ getUser)\n/* harmony export */ });\n/* harmony import */ var _data_colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../data/colors */ \"(api)/./data/colors.ts\");\n/* harmony import */ var _data_users__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../data/users */ \"(api)/./data/users.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n\n\n/**\n * Get User\n *\n * Simulates calling your database and returning a user with a seeded random colour\n *\n * @param userId - The user's id\n */ async function getUser(userId) {\n    const user = _data_users__WEBPACK_IMPORTED_MODULE_1__.users.find((user)=>user.id === userId);\n    if (!user) {\n        console.warn(`\nERROR: User \"${userId}\" was not found. \n\nCheck that you've added the user to data/users.ts, for example:\n{\n  id: \"${userId}\",\n  name: \"Tchoka Ahoki\",\n  avatar: \"https://liveblocks.io/avatars/avatar-7.png\",\n  groupIds: [\"product\", \"engineering\", \"design\"],\n},\n \n`);\n        return null;\n    }\n    const color = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.getRandom)(_data_colors__WEBPACK_IMPORTED_MODULE_0__.colors, userId);\n    return {\n        color,\n        ...user\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RhdGFiYXNlL2dldFVzZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE4QztBQUNGO0FBRVA7QUFFckM7Ozs7OztDQU1DLEdBQ00sZUFBZUcsUUFBUUMsTUFBYztJQUMxQyxNQUFNQyxPQUFPSiw4Q0FBS0EsQ0FBQ0ssSUFBSSxDQUFDLENBQUNELE9BQVNBLEtBQUtFLEVBQUUsS0FBS0g7SUFFOUMsSUFBSSxDQUFDQyxNQUFNO1FBQ1RHLFFBQVFDLElBQUksQ0FBQyxDQUFDO2FBQ0wsRUFBRUwsT0FBTzs7OztPQUlmLEVBQUVBLE9BQU87Ozs7OztBQU1oQixDQUFDO1FBQ0csT0FBTztJQUNUO0lBRUEsTUFBTU0sUUFBUVIsaURBQVNBLENBQUNGLGdEQUFNQSxFQUFFSTtJQUVoQyxPQUFPO1FBQUVNO1FBQU8sR0FBR0wsSUFBSTtJQUFDO0FBQzFCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9kYXRhYmFzZS9nZXRVc2VyLnRzPzRhYTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29sb3JzIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvY29sb3JzXCI7XG5pbXBvcnQgeyB1c2VycyB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL3VzZXJzXCI7XG5pbXBvcnQgeyBVc2VyIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRSYW5kb20gfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuLyoqXG4gKiBHZXQgVXNlclxuICpcbiAqIFNpbXVsYXRlcyBjYWxsaW5nIHlvdXIgZGF0YWJhc2UgYW5kIHJldHVybmluZyBhIHVzZXIgd2l0aCBhIHNlZWRlZCByYW5kb20gY29sb3VyXG4gKlxuICogQHBhcmFtIHVzZXJJZCAtIFRoZSB1c2VyJ3MgaWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXIodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCBudWxsPiB7XG4gIGNvbnN0IHVzZXIgPSB1c2Vycy5maW5kKCh1c2VyKSA9PiB1c2VyLmlkID09PSB1c2VySWQpO1xuXG4gIGlmICghdXNlcikge1xuICAgIGNvbnNvbGUud2FybihgXG5FUlJPUjogVXNlciBcIiR7dXNlcklkfVwiIHdhcyBub3QgZm91bmQuIFxuXG5DaGVjayB0aGF0IHlvdSd2ZSBhZGRlZCB0aGUgdXNlciB0byBkYXRhL3VzZXJzLnRzLCBmb3IgZXhhbXBsZTpcbntcbiAgaWQ6IFwiJHt1c2VySWR9XCIsXG4gIG5hbWU6IFwiVGNob2thIEFob2tpXCIsXG4gIGF2YXRhcjogXCJodHRwczovL2xpdmVibG9ja3MuaW8vYXZhdGFycy9hdmF0YXItNy5wbmdcIixcbiAgZ3JvdXBJZHM6IFtcInByb2R1Y3RcIiwgXCJlbmdpbmVlcmluZ1wiLCBcImRlc2lnblwiXSxcbn0sXG4gXG5gKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IGNvbG9yID0gZ2V0UmFuZG9tKGNvbG9ycywgdXNlcklkKTtcblxuICByZXR1cm4geyBjb2xvciwgLi4udXNlciB9O1xufVxuIl0sIm5hbWVzIjpbImNvbG9ycyIsInVzZXJzIiwiZ2V0UmFuZG9tIiwiZ2V0VXNlciIsInVzZXJJZCIsInVzZXIiLCJmaW5kIiwiaWQiLCJjb25zb2xlIiwid2FybiIsImNvbG9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/database/getUser.ts\n");

/***/ }),

/***/ "(api)/./lib/server/database/getUsers.ts":
/*!*****************************************!*\
  !*** ./lib/server/database/getUsers.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getUsers: () => (/* binding */ getUsers)\n/* harmony export */ });\n/* harmony import */ var _data_users__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../data/users */ \"(api)/./data/users.ts\");\n/* harmony import */ var _getUser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getUser */ \"(api)/./lib/server/database/getUser.ts\");\n\n\n/**\n * Get Users\n *\n * Simulates calling your database and returning a list of user with seeded random colours\n *\n * @param userIds - The user's ids to get\n * @param searchTerm - The term to filter your users by, checks users' ids and names\n */ async function getUsers({ userIds, search }) {\n    const usersPromises = [];\n    // Filter by userIds or get all users\n    if (userIds) {\n        for (const userId of userIds){\n            usersPromises.push((0,_getUser__WEBPACK_IMPORTED_MODULE_1__.getUser)(userId));\n        }\n    } else {\n        const allUserIds = _data_users__WEBPACK_IMPORTED_MODULE_0__.users.map((user)=>user.id);\n        for (const userId of allUserIds){\n            usersPromises.push((0,_getUser__WEBPACK_IMPORTED_MODULE_1__.getUser)(userId));\n        }\n    }\n    const userList = await Promise.all(usersPromises);\n    // If search term, check if term is included in name or id, and filter\n    if (search) {\n        const term = search.toLowerCase();\n        return userList.filter((user)=>{\n            if (!user) {\n                return false;\n            }\n            return user.name.toLowerCase().includes(term) || user.id.toLowerCase().includes(term);\n        });\n    }\n    return userList;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RhdGFiYXNlL2dldFVzZXJzLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE0QztBQUVSO0FBRXBDOzs7Ozs7O0NBT0MsR0FDTSxlQUFlRSxTQUFTLEVBQzdCQyxPQUFPLEVBQ1BDLE1BQU0sRUFDUTtJQUNkLE1BQU1DLGdCQUF3QyxFQUFFO0lBRWhELHFDQUFxQztJQUNyQyxJQUFJRixTQUFTO1FBQ1gsS0FBSyxNQUFNRyxVQUFVSCxRQUFTO1lBQzVCRSxjQUFjRSxJQUFJLENBQUNOLGlEQUFPQSxDQUFDSztRQUM3QjtJQUNGLE9BQU87UUFDTCxNQUFNRSxhQUFhUiw4Q0FBS0EsQ0FBQ1MsR0FBRyxDQUFDLENBQUNDLE9BQVNBLEtBQUtDLEVBQUU7UUFDOUMsS0FBSyxNQUFNTCxVQUFVRSxXQUFZO1lBQy9CSCxjQUFjRSxJQUFJLENBQUNOLGlEQUFPQSxDQUFDSztRQUM3QjtJQUNGO0lBRUEsTUFBTU0sV0FBVyxNQUFNQyxRQUFRQyxHQUFHLENBQUNUO0lBRW5DLHNFQUFzRTtJQUN0RSxJQUFJRCxRQUFRO1FBQ1YsTUFBTVcsT0FBT1gsT0FBT1ksV0FBVztRQUUvQixPQUFPSixTQUFTSyxNQUFNLENBQUMsQ0FBQ1A7WUFDdEIsSUFBSSxDQUFDQSxNQUFNO2dCQUNULE9BQU87WUFDVDtZQUVBLE9BQ0VBLEtBQUtRLElBQUksQ0FBQ0YsV0FBVyxHQUFHRyxRQUFRLENBQUNKLFNBQ2pDTCxLQUFLQyxFQUFFLENBQUNLLFdBQVcsR0FBR0csUUFBUSxDQUFDSjtRQUVuQztJQUNGO0lBRUEsT0FBT0g7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvZGF0YWJhc2UvZ2V0VXNlcnMudHM/OTBkYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VycyB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL3VzZXJzXCI7XG5pbXBvcnQgeyBHZXRVc2Vyc1Byb3BzLCBVc2VyIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRVc2VyIH0gZnJvbSBcIi4vZ2V0VXNlclwiO1xuXG4vKipcbiAqIEdldCBVc2Vyc1xuICpcbiAqIFNpbXVsYXRlcyBjYWxsaW5nIHlvdXIgZGF0YWJhc2UgYW5kIHJldHVybmluZyBhIGxpc3Qgb2YgdXNlciB3aXRoIHNlZWRlZCByYW5kb20gY29sb3Vyc1xuICpcbiAqIEBwYXJhbSB1c2VySWRzIC0gVGhlIHVzZXIncyBpZHMgdG8gZ2V0XG4gKiBAcGFyYW0gc2VhcmNoVGVybSAtIFRoZSB0ZXJtIHRvIGZpbHRlciB5b3VyIHVzZXJzIGJ5LCBjaGVja3MgdXNlcnMnIGlkcyBhbmQgbmFtZXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJzKHtcbiAgdXNlcklkcyxcbiAgc2VhcmNoLFxufTogR2V0VXNlcnNQcm9wcyk6IFByb21pc2U8KFVzZXIgfCBudWxsKVtdPiB7XG4gIGNvbnN0IHVzZXJzUHJvbWlzZXM6IFByb21pc2U8VXNlciB8IG51bGw+W10gPSBbXTtcblxuICAvLyBGaWx0ZXIgYnkgdXNlcklkcyBvciBnZXQgYWxsIHVzZXJzXG4gIGlmICh1c2VySWRzKSB7XG4gICAgZm9yIChjb25zdCB1c2VySWQgb2YgdXNlcklkcykge1xuICAgICAgdXNlcnNQcm9taXNlcy5wdXNoKGdldFVzZXIodXNlcklkKSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGNvbnN0IGFsbFVzZXJJZHMgPSB1c2Vycy5tYXAoKHVzZXIpID0+IHVzZXIuaWQpO1xuICAgIGZvciAoY29uc3QgdXNlcklkIG9mIGFsbFVzZXJJZHMpIHtcbiAgICAgIHVzZXJzUHJvbWlzZXMucHVzaChnZXRVc2VyKHVzZXJJZCkpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHVzZXJMaXN0ID0gYXdhaXQgUHJvbWlzZS5hbGwodXNlcnNQcm9taXNlcyk7XG5cbiAgLy8gSWYgc2VhcmNoIHRlcm0sIGNoZWNrIGlmIHRlcm0gaXMgaW5jbHVkZWQgaW4gbmFtZSBvciBpZCwgYW5kIGZpbHRlclxuICBpZiAoc2VhcmNoKSB7XG4gICAgY29uc3QgdGVybSA9IHNlYXJjaC50b0xvd2VyQ2FzZSgpO1xuXG4gICAgcmV0dXJuIHVzZXJMaXN0LmZpbHRlcigodXNlcikgPT4ge1xuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgdXNlci5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGVybSkgfHxcbiAgICAgICAgdXNlci5pZC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRlcm0pXG4gICAgICApO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHVzZXJMaXN0O1xufVxuIl0sIm5hbWVzIjpbInVzZXJzIiwiZ2V0VXNlciIsImdldFVzZXJzIiwidXNlcklkcyIsInNlYXJjaCIsInVzZXJzUHJvbWlzZXMiLCJ1c2VySWQiLCJwdXNoIiwiYWxsVXNlcklkcyIsIm1hcCIsInVzZXIiLCJpZCIsInVzZXJMaXN0IiwiUHJvbWlzZSIsImFsbCIsInRlcm0iLCJ0b0xvd2VyQ2FzZSIsImZpbHRlciIsIm5hbWUiLCJpbmNsdWRlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/database/getUsers.ts\n");

/***/ }),

/***/ "(api)/./lib/server/database/index.ts":
/*!**************************************!*\
  !*** ./lib/server/database/index.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _getGroup__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getGroup */ \"(api)/./lib/server/database/getGroup.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getGroup__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getGroup__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getGroups__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getGroups */ \"(api)/./lib/server/database/getGroups.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getGroups__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getGroups__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getUser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getUser */ \"(api)/./lib/server/database/getUser.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getUser__WEBPACK_IMPORTED_MODULE_2__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getUser__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getUsers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./getUsers */ \"(api)/./lib/server/database/getUsers.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getUsers__WEBPACK_IMPORTED_MODULE_3__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getUsers__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RhdGFiYXNlL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTJCO0FBQ0M7QUFDRjtBQUNDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9kYXRhYmFzZS9pbmRleC50cz82ZWM0Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gXCIuL2dldEdyb3VwXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9nZXRHcm91cHNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2dldFVzZXJcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2dldFVzZXJzXCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/database/index.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/createDocument.ts":
/*!************************************************!*\
  !*** ./lib/server/documents/createDocument.ts ***!
  \************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDocument: () => (/* binding */ createDocument)\n/* harmony export */ });\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nanoid */ \"nanoid\");\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ */ \"(api)/./lib/server/index.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([nanoid__WEBPACK_IMPORTED_MODULE_0__, ___WEBPACK_IMPORTED_MODULE_1__]);\n([nanoid__WEBPACK_IMPORTED_MODULE_0__, ___WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n/**\n * Create Document\n *\n * Create a new document, with a specified name and type, from userId and groupId\n *\n * @param name - The name of the new document\n * @param type - The type of the new document e.g. \"canvas\"\n * @param userId - The user creating the document\n * @param [groupIds] - The new document's initial groups\n * @param [draft] - If the document is a draft (no public or group access, but can invite)\n * @param req\n * @param res\n */ async function createDocument(req, res, { name, type, userId, groupIds, draft }) {\n    // Check user is logged in\n    const session = await (0,___WEBPACK_IMPORTED_MODULE_1__.getServerSession)(req, res);\n    if (!session) {\n        return {\n            error: {\n                code: 401,\n                message: \"Not signed in\",\n                suggestion: \"Sign in to create a new document\"\n            }\n        };\n    }\n    const id = (0,nanoid__WEBPACK_IMPORTED_MODULE_0__.nanoid)();\n    // Custom metadata for our document\n    const metadata = {\n        name: name,\n        type: type,\n        owner: userId,\n        draft: draft ? \"yes\" : \"no\"\n    };\n    // Give creator of document full access\n    const usersAccesses = {\n        [userId]: [\n            _types__WEBPACK_IMPORTED_MODULE_2__.RoomAccess.RoomWrite\n        ]\n    };\n    const groupsAccesses = {};\n    if (draft) {\n        // If draft, only add draft group access\n        groupsAccesses[(0,_utils__WEBPACK_IMPORTED_MODULE_3__.getDraftsGroupName)(userId)] = [\n            _types__WEBPACK_IMPORTED_MODULE_2__.RoomAccess.RoomWrite\n        ];\n    } else if (groupIds) {\n        // If groupIds sent, limit access to these groups\n        groupIds.forEach((groupId)=>{\n            groupsAccesses[groupId] = [\n                _types__WEBPACK_IMPORTED_MODULE_2__.RoomAccess.RoomWrite\n            ];\n        });\n    }\n    // Calling Liveblocks API with required info\n    const { data, error } = await (0,___WEBPACK_IMPORTED_MODULE_1__.createRoom)({\n        id,\n        metadata,\n        usersAccesses,\n        groupsAccesses\n    });\n    if (error || !data) {\n        return {\n            error\n        };\n    }\n    // Build createRoom result into our custom document format and return\n    const document = (0,___WEBPACK_IMPORTED_MODULE_1__.buildDocument)(data);\n    return {\n        data: document\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy9jcmVhdGVEb2N1bWVudC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFnQztBQUVrQztBQVExQztBQUNzQjtBQUU5Qzs7Ozs7Ozs7Ozs7O0NBWUMsR0FDTSxlQUFlTSxlQUNwQkMsR0FBcUMsRUFDckNDLEdBQXFDLEVBQ3JDLEVBQUVDLElBQUksRUFBRUMsSUFBSSxFQUFFQyxNQUFNLEVBQUVDLFFBQVEsRUFBRUMsS0FBSyxFQUF1QjtJQUU1RCwwQkFBMEI7SUFDMUIsTUFBTUMsVUFBVSxNQUFNWCxtREFBZ0JBLENBQUNJLEtBQUtDO0lBRTVDLElBQUksQ0FBQ00sU0FBUztRQUNaLE9BQU87WUFDTEMsT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRjtJQUVBLE1BQU1DLEtBQUtuQiw4Q0FBTUE7SUFFakIsbUNBQW1DO0lBQ25DLE1BQU1vQixXQUFpQztRQUNyQ1gsTUFBTUE7UUFDTkMsTUFBTUE7UUFDTlcsT0FBT1Y7UUFDUEUsT0FBT0EsUUFBUSxRQUFRO0lBQ3pCO0lBRUEsdUNBQXVDO0lBQ3ZDLE1BQU1TLGdCQUE4QjtRQUNsQyxDQUFDWCxPQUFPLEVBQUU7WUFBQ1AsOENBQVVBLENBQUNtQixTQUFTO1NBQUM7SUFDbEM7SUFFQSxNQUFNQyxpQkFBK0IsQ0FBQztJQUV0QyxJQUFJWCxPQUFPO1FBQ1Qsd0NBQXdDO1FBQ3hDVyxjQUFjLENBQUNuQiwwREFBa0JBLENBQUNNLFFBQVEsR0FBRztZQUFDUCw4Q0FBVUEsQ0FBQ21CLFNBQVM7U0FBQztJQUNyRSxPQUFPLElBQUlYLFVBQVU7UUFDbkIsaURBQWlEO1FBQ2pEQSxTQUFTYSxPQUFPLENBQUMsQ0FBQ0M7WUFDaEJGLGNBQWMsQ0FBQ0UsUUFBUSxHQUFHO2dCQUFDdEIsOENBQVVBLENBQUNtQixTQUFTO2FBQUM7UUFDbEQ7SUFDRjtJQUVBLDRDQUE0QztJQUM1QyxNQUFNLEVBQUVJLElBQUksRUFBRVosS0FBSyxFQUFFLEdBQUcsTUFBTWIsNkNBQVVBLENBQUM7UUFDdkNpQjtRQUNBQztRQUNBRTtRQUNBRTtJQUNGO0lBRUEsSUFBSVQsU0FBUyxDQUFDWSxNQUFNO1FBQ2xCLE9BQU87WUFBRVo7UUFBTTtJQUNqQjtJQUVBLHFFQUFxRTtJQUNyRSxNQUFNYSxXQUFxQjNCLGdEQUFhQSxDQUFDMEI7SUFDekMsT0FBTztRQUFFQSxNQUFNQztJQUFTO0FBQzFCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9kb2N1bWVudHMvY3JlYXRlRG9jdW1lbnQudHM/NjNkYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBuYW5vaWQgfSBmcm9tIFwibmFub2lkXCI7XG5pbXBvcnQgeyBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0IH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCB7IGJ1aWxkRG9jdW1lbnQsIGNyZWF0ZVJvb20sIGdldFNlcnZlclNlc3Npb24gfSBmcm9tIFwiLi4vXCI7XG5pbXBvcnQge1xuICBDcmVhdGVEb2N1bWVudFByb3BzLFxuICBEb2N1bWVudCxcbiAgRG9jdW1lbnRSb29tTWV0YWRhdGEsXG4gIEZldGNoQXBpUmVzdWx0LFxuICBSb29tQWNjZXNzLFxuICBSb29tQWNjZXNzZXMsXG59IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZ2V0RHJhZnRzR3JvdXBOYW1lIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbi8qKlxuICogQ3JlYXRlIERvY3VtZW50XG4gKlxuICogQ3JlYXRlIGEgbmV3IGRvY3VtZW50LCB3aXRoIGEgc3BlY2lmaWVkIG5hbWUgYW5kIHR5cGUsIGZyb20gdXNlcklkIGFuZCBncm91cElkXG4gKlxuICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgbmV3IGRvY3VtZW50XG4gKiBAcGFyYW0gdHlwZSAtIFRoZSB0eXBlIG9mIHRoZSBuZXcgZG9jdW1lbnQgZS5nLiBcImNhbnZhc1wiXG4gKiBAcGFyYW0gdXNlcklkIC0gVGhlIHVzZXIgY3JlYXRpbmcgdGhlIGRvY3VtZW50XG4gKiBAcGFyYW0gW2dyb3VwSWRzXSAtIFRoZSBuZXcgZG9jdW1lbnQncyBpbml0aWFsIGdyb3Vwc1xuICogQHBhcmFtIFtkcmFmdF0gLSBJZiB0aGUgZG9jdW1lbnQgaXMgYSBkcmFmdCAobm8gcHVibGljIG9yIGdyb3VwIGFjY2VzcywgYnV0IGNhbiBpbnZpdGUpXG4gKiBAcGFyYW0gcmVxXG4gKiBAcGFyYW0gcmVzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVEb2N1bWVudChcbiAgcmVxOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVxXCJdLFxuICByZXM6IEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHRbXCJyZXNcIl0sXG4gIHsgbmFtZSwgdHlwZSwgdXNlcklkLCBncm91cElkcywgZHJhZnQgfTogQ3JlYXRlRG9jdW1lbnRQcm9wc1xuKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDxEb2N1bWVudD4+IHtcbiAgLy8gQ2hlY2sgdXNlciBpcyBsb2dnZWQgaW5cbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24ocmVxLCByZXMpO1xuXG4gIGlmICghc2Vzc2lvbikge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDEsXG4gICAgICAgIG1lc3NhZ2U6IFwiTm90IHNpZ25lZCBpblwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIlNpZ24gaW4gdG8gY3JlYXRlIGEgbmV3IGRvY3VtZW50XCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBjb25zdCBpZCA9IG5hbm9pZCgpO1xuXG4gIC8vIEN1c3RvbSBtZXRhZGF0YSBmb3Igb3VyIGRvY3VtZW50XG4gIGNvbnN0IG1ldGFkYXRhOiBEb2N1bWVudFJvb21NZXRhZGF0YSA9IHtcbiAgICBuYW1lOiBuYW1lLFxuICAgIHR5cGU6IHR5cGUsXG4gICAgb3duZXI6IHVzZXJJZCxcbiAgICBkcmFmdDogZHJhZnQgPyBcInllc1wiIDogXCJub1wiLFxuICB9O1xuXG4gIC8vIEdpdmUgY3JlYXRvciBvZiBkb2N1bWVudCBmdWxsIGFjY2Vzc1xuICBjb25zdCB1c2Vyc0FjY2Vzc2VzOiBSb29tQWNjZXNzZXMgPSB7XG4gICAgW3VzZXJJZF06IFtSb29tQWNjZXNzLlJvb21Xcml0ZV0sXG4gIH07XG5cbiAgY29uc3QgZ3JvdXBzQWNjZXNzZXM6IFJvb21BY2Nlc3NlcyA9IHt9O1xuXG4gIGlmIChkcmFmdCkge1xuICAgIC8vIElmIGRyYWZ0LCBvbmx5IGFkZCBkcmFmdCBncm91cCBhY2Nlc3NcbiAgICBncm91cHNBY2Nlc3Nlc1tnZXREcmFmdHNHcm91cE5hbWUodXNlcklkKV0gPSBbUm9vbUFjY2Vzcy5Sb29tV3JpdGVdO1xuICB9IGVsc2UgaWYgKGdyb3VwSWRzKSB7XG4gICAgLy8gSWYgZ3JvdXBJZHMgc2VudCwgbGltaXQgYWNjZXNzIHRvIHRoZXNlIGdyb3Vwc1xuICAgIGdyb3VwSWRzLmZvckVhY2goKGdyb3VwSWQ6IHN0cmluZykgPT4ge1xuICAgICAgZ3JvdXBzQWNjZXNzZXNbZ3JvdXBJZF0gPSBbUm9vbUFjY2Vzcy5Sb29tV3JpdGVdO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gQ2FsbGluZyBMaXZlYmxvY2tzIEFQSSB3aXRoIHJlcXVpcmVkIGluZm9cbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgY3JlYXRlUm9vbSh7XG4gICAgaWQsXG4gICAgbWV0YWRhdGEsXG4gICAgdXNlcnNBY2Nlc3NlcyxcbiAgICBncm91cHNBY2Nlc3NlcyxcbiAgfSk7XG5cbiAgaWYgKGVycm9yIHx8ICFkYXRhKSB7XG4gICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgfVxuXG4gIC8vIEJ1aWxkIGNyZWF0ZVJvb20gcmVzdWx0IGludG8gb3VyIGN1c3RvbSBkb2N1bWVudCBmb3JtYXQgYW5kIHJldHVyblxuICBjb25zdCBkb2N1bWVudDogRG9jdW1lbnQgPSBidWlsZERvY3VtZW50KGRhdGEpO1xuICByZXR1cm4geyBkYXRhOiBkb2N1bWVudCB9O1xufVxuIl0sIm5hbWVzIjpbIm5hbm9pZCIsImJ1aWxkRG9jdW1lbnQiLCJjcmVhdGVSb29tIiwiZ2V0U2VydmVyU2Vzc2lvbiIsIlJvb21BY2Nlc3MiLCJnZXREcmFmdHNHcm91cE5hbWUiLCJjcmVhdGVEb2N1bWVudCIsInJlcSIsInJlcyIsIm5hbWUiLCJ0eXBlIiwidXNlcklkIiwiZ3JvdXBJZHMiLCJkcmFmdCIsInNlc3Npb24iLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwic3VnZ2VzdGlvbiIsImlkIiwibWV0YWRhdGEiLCJvd25lciIsInVzZXJzQWNjZXNzZXMiLCJSb29tV3JpdGUiLCJncm91cHNBY2Nlc3NlcyIsImZvckVhY2giLCJncm91cElkIiwiZGF0YSIsImRvY3VtZW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/createDocument.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/deleteDocument.ts":
/*!************************************************!*\
  !*** ./lib/server/documents/deleteDocument.ts ***!
  \************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteDocument: () => (/* binding */ deleteDocument)\n/* harmony export */ });\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ */ \"(api)/./lib/server/index.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n/* harmony import */ var _liveblocks_deleteRoom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../liveblocks/deleteRoom */ \"(api)/./lib/server/liveblocks/deleteRoom.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([___WEBPACK_IMPORTED_MODULE_0__]);\n___WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n/**\n * Delete Document\n *\n * Delete a document\n * Only allow if authorized with NextAuth and is added as a userId on usersAccesses\n * Do not allow if public access, or access granted through groupIds\n *\n * @param documentId - The document to delete\n * @param req\n * @param res\n */ async function deleteDocument(req, res, { documentId }) {\n    const [session, room] = await Promise.all([\n        (0,___WEBPACK_IMPORTED_MODULE_0__.getServerSession)(req, res),\n        (0,___WEBPACK_IMPORTED_MODULE_0__.getRoom)({\n            roomId: documentId\n        })\n    ]);\n    // Check user is logged in\n    if (!session) {\n        return {\n            error: {\n                code: 401,\n                message: \"Not signed in\",\n                suggestion: \"Sign in to update document users\"\n            }\n        };\n    }\n    // Check the room `documentId` exists\n    const { data: currentRoom, error } = room;\n    if (error) {\n        return {\n            error\n        };\n    }\n    if (!currentRoom) {\n        return {\n            error: {\n                code: 404,\n                message: \"Room not found\",\n                suggestion: \"Check that you're on the correct page\"\n            }\n        };\n    }\n    // Check current logged-in user has edit access to the room\n    if (!(0,___WEBPACK_IMPORTED_MODULE_0__.userAllowedInRoom)({\n        accessesAllowed: [\n            _types__WEBPACK_IMPORTED_MODULE_1__.RoomAccess.RoomWrite\n        ],\n        checkAccessLevels: [\n            _types__WEBPACK_IMPORTED_MODULE_1__.RoomAccessLevels.USER\n        ],\n        userId: session.user.info.id,\n        groupIds: session.user.info.groupIds,\n        room: currentRoom\n    })) {\n        return {\n            error: {\n                code: 403,\n                message: \"Not allowed access\",\n                suggestion: \"Check that you've been given permission to the document\"\n            }\n        };\n    }\n    const { error: deleteRoomError } = await (0,_liveblocks_deleteRoom__WEBPACK_IMPORTED_MODULE_2__.deleteRoom)({\n        roomId: documentId\n    });\n    if (deleteRoomError) {\n        return {\n            error: deleteRoomError\n        };\n    }\n    return {\n        data: documentId\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy9kZWxldGVEb2N1bWVudC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQ21FO0FBTzNDO0FBQzhCO0FBRXREOzs7Ozs7Ozs7O0NBVUMsR0FDTSxlQUFlTSxlQUNwQkMsR0FBcUMsRUFDckNDLEdBQXFDLEVBQ3JDLEVBQUVDLFVBQVUsRUFBdUI7SUFFbkMsTUFBTSxDQUFDQyxTQUFTQyxLQUFLLEdBQUcsTUFBTUMsUUFBUUMsR0FBRyxDQUFDO1FBQ3hDWixtREFBZ0JBLENBQUNNLEtBQUtDO1FBQ3RCUiwwQ0FBT0EsQ0FBQztZQUFFYyxRQUFRTDtRQUFXO0tBQzlCO0lBRUQsMEJBQTBCO0lBQzFCLElBQUksQ0FBQ0MsU0FBUztRQUNaLE9BQU87WUFDTEssT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRjtJQUVBLHFDQUFxQztJQUNyQyxNQUFNLEVBQUVDLE1BQU1DLFdBQVcsRUFBRUwsS0FBSyxFQUFFLEdBQUdKO0lBRXJDLElBQUlJLE9BQU87UUFDVCxPQUFPO1lBQUVBO1FBQU07SUFDakI7SUFFQSxJQUFJLENBQUNLLGFBQWE7UUFDaEIsT0FBTztZQUNMTCxPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGO0lBRUEsMkRBQTJEO0lBQzNELElBQ0UsQ0FBQ2hCLG9EQUFpQkEsQ0FBQztRQUNqQm1CLGlCQUFpQjtZQUFDbEIsOENBQVVBLENBQUNtQixTQUFTO1NBQUM7UUFDdkNDLG1CQUFtQjtZQUFDbkIsb0RBQWdCQSxDQUFDb0IsSUFBSTtTQUFDO1FBQzFDQyxRQUFRZixRQUFRZ0IsSUFBSSxDQUFDQyxJQUFJLENBQUNDLEVBQUU7UUFDNUJDLFVBQVVuQixRQUFRZ0IsSUFBSSxDQUFDQyxJQUFJLENBQUNFLFFBQVE7UUFDcENsQixNQUFNUztJQUNSLElBQ0E7UUFDQSxPQUFPO1lBQ0xMLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVk7WUFDZDtRQUNGO0lBQ0Y7SUFFQSxNQUFNLEVBQUVILE9BQU9lLGVBQWUsRUFBRSxHQUFHLE1BQU16QixrRUFBVUEsQ0FBQztRQUFFUyxRQUFRTDtJQUFXO0lBRXpFLElBQUlxQixpQkFBaUI7UUFDbkIsT0FBTztZQUFFZixPQUFPZTtRQUFnQjtJQUNsQztJQUVBLE9BQU87UUFBRVgsTUFBTVY7SUFBVztBQUM1QiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvZG9jdW1lbnRzL2RlbGV0ZURvY3VtZW50LnRzP2NkZGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dCB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQgeyBnZXRSb29tLCBnZXRTZXJ2ZXJTZXNzaW9uLCB1c2VyQWxsb3dlZEluUm9vbSB9IGZyb20gXCIuLi9cIjtcbmltcG9ydCB7XG4gIERlbGV0ZURvY3VtZW50UHJvcHMsXG4gIERvY3VtZW50LFxuICBGZXRjaEFwaVJlc3VsdCxcbiAgUm9vbUFjY2VzcyxcbiAgUm9vbUFjY2Vzc0xldmVscyxcbn0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBkZWxldGVSb29tIH0gZnJvbSBcIi4uL2xpdmVibG9ja3MvZGVsZXRlUm9vbVwiO1xuXG4vKipcbiAqIERlbGV0ZSBEb2N1bWVudFxuICpcbiAqIERlbGV0ZSBhIGRvY3VtZW50XG4gKiBPbmx5IGFsbG93IGlmIGF1dGhvcml6ZWQgd2l0aCBOZXh0QXV0aCBhbmQgaXMgYWRkZWQgYXMgYSB1c2VySWQgb24gdXNlcnNBY2Nlc3Nlc1xuICogRG8gbm90IGFsbG93IGlmIHB1YmxpYyBhY2Nlc3MsIG9yIGFjY2VzcyBncmFudGVkIHRocm91Z2ggZ3JvdXBJZHNcbiAqXG4gKiBAcGFyYW0gZG9jdW1lbnRJZCAtIFRoZSBkb2N1bWVudCB0byBkZWxldGVcbiAqIEBwYXJhbSByZXFcbiAqIEBwYXJhbSByZXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZURvY3VtZW50KFxuICByZXE6IEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHRbXCJyZXFcIl0sXG4gIHJlczogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlc1wiXSxcbiAgeyBkb2N1bWVudElkIH06IERlbGV0ZURvY3VtZW50UHJvcHNcbik6IFByb21pc2U8RmV0Y2hBcGlSZXN1bHQ8RG9jdW1lbnRbXCJpZFwiXT4+IHtcbiAgY29uc3QgW3Nlc3Npb24sIHJvb21dID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIGdldFNlcnZlclNlc3Npb24ocmVxLCByZXMpLFxuICAgIGdldFJvb20oeyByb29tSWQ6IGRvY3VtZW50SWQgfSksXG4gIF0pO1xuXG4gIC8vIENoZWNrIHVzZXIgaXMgbG9nZ2VkIGluXG4gIGlmICghc2Vzc2lvbikge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDEsXG4gICAgICAgIG1lc3NhZ2U6IFwiTm90IHNpZ25lZCBpblwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIlNpZ24gaW4gdG8gdXBkYXRlIGRvY3VtZW50IHVzZXJzXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBDaGVjayB0aGUgcm9vbSBgZG9jdW1lbnRJZGAgZXhpc3RzXG4gIGNvbnN0IHsgZGF0YTogY3VycmVudFJvb20sIGVycm9yIH0gPSByb29tO1xuXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiB7IGVycm9yIH07XG4gIH1cblxuICBpZiAoIWN1cnJlbnRSb29tKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwNCxcbiAgICAgICAgbWVzc2FnZTogXCJSb29tIG5vdCBmb3VuZFwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIkNoZWNrIHRoYXQgeW91J3JlIG9uIHRoZSBjb3JyZWN0IHBhZ2VcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIENoZWNrIGN1cnJlbnQgbG9nZ2VkLWluIHVzZXIgaGFzIGVkaXQgYWNjZXNzIHRvIHRoZSByb29tXG4gIGlmIChcbiAgICAhdXNlckFsbG93ZWRJblJvb20oe1xuICAgICAgYWNjZXNzZXNBbGxvd2VkOiBbUm9vbUFjY2Vzcy5Sb29tV3JpdGVdLFxuICAgICAgY2hlY2tBY2Nlc3NMZXZlbHM6IFtSb29tQWNjZXNzTGV2ZWxzLlVTRVJdLFxuICAgICAgdXNlcklkOiBzZXNzaW9uLnVzZXIuaW5mby5pZCxcbiAgICAgIGdyb3VwSWRzOiBzZXNzaW9uLnVzZXIuaW5mby5ncm91cElkcyxcbiAgICAgIHJvb206IGN1cnJlbnRSb29tLFxuICAgIH0pXG4gICkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDMsXG4gICAgICAgIG1lc3NhZ2U6IFwiTm90IGFsbG93ZWQgYWNjZXNzXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiQ2hlY2sgdGhhdCB5b3UndmUgYmVlbiBnaXZlbiBwZXJtaXNzaW9uIHRvIHRoZSBkb2N1bWVudFwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgeyBlcnJvcjogZGVsZXRlUm9vbUVycm9yIH0gPSBhd2FpdCBkZWxldGVSb29tKHsgcm9vbUlkOiBkb2N1bWVudElkIH0pO1xuXG4gIGlmIChkZWxldGVSb29tRXJyb3IpIHtcbiAgICByZXR1cm4geyBlcnJvcjogZGVsZXRlUm9vbUVycm9yIH07XG4gIH1cblxuICByZXR1cm4geyBkYXRhOiBkb2N1bWVudElkIH07XG59XG4iXSwibmFtZXMiOlsiZ2V0Um9vbSIsImdldFNlcnZlclNlc3Npb24iLCJ1c2VyQWxsb3dlZEluUm9vbSIsIlJvb21BY2Nlc3MiLCJSb29tQWNjZXNzTGV2ZWxzIiwiZGVsZXRlUm9vbSIsImRlbGV0ZURvY3VtZW50IiwicmVxIiwicmVzIiwiZG9jdW1lbnRJZCIsInNlc3Npb24iLCJyb29tIiwiUHJvbWlzZSIsImFsbCIsInJvb21JZCIsImVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJzdWdnZXN0aW9uIiwiZGF0YSIsImN1cnJlbnRSb29tIiwiYWNjZXNzZXNBbGxvd2VkIiwiUm9vbVdyaXRlIiwiY2hlY2tBY2Nlc3NMZXZlbHMiLCJVU0VSIiwidXNlcklkIiwidXNlciIsImluZm8iLCJpZCIsImdyb3VwSWRzIiwiZGVsZXRlUm9vbUVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/deleteDocument.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/getDocument.ts":
/*!*********************************************!*\
  !*** ./lib/server/documents/getDocument.ts ***!
  \*********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getDocument: () => (/* binding */ getDocument)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_1__]);\n_auth__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n/**\n * Get a document.\n * Only allow if user has access to room (including logged-out users and public rooms).\n *\n * @param req\n * @param res\n * @param documentId - The document id\n */ async function getDocument(req, res, { documentId }) {\n    // Get session and room\n    const [session, room] = await Promise.all([\n        (0,_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(req, res),\n        (0,_liveblocks__WEBPACK_IMPORTED_MODULE_2__.getRoom)({\n            roomId: documentId\n        })\n    ]);\n    const { data, error } = room;\n    if (error) {\n        return {\n            error\n        };\n    }\n    if (!data) {\n        return {\n            error: {\n                code: 404,\n                message: \"Room not found\",\n                suggestion: \"Check that you're on the correct page\"\n            }\n        };\n    }\n    // Check current user has access to the room (if not logged in, use empty values)\n    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_3__.userAllowedInRoom)({\n        accessesAllowed: [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomWrite,\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomRead\n        ],\n        userId: session?.user.info.id ?? \"\",\n        groupIds: session?.user.info.groupIds ?? [],\n        room: data\n    })) {\n        return {\n            error: {\n                code: 403,\n                message: \"Not allowed access\",\n                suggestion: \"Check that you've been given permission to the room\"\n            }\n        };\n    }\n    // Convert room into our custom document format and return\n    const document = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.buildDocument)(data);\n    return {\n        data: document\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy9nZXREb2N1bWVudC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQU13QjtBQUNtQjtBQUNIO0FBQ29CO0FBRTVEOzs7Ozs7O0NBT0MsR0FDTSxlQUFlSyxZQUNwQkMsR0FBcUMsRUFDckNDLEdBQXFDLEVBQ3JDLEVBQUVDLFVBQVUsRUFBb0I7SUFFaEMsdUJBQXVCO0lBQ3ZCLE1BQU0sQ0FBQ0MsU0FBU0MsS0FBSyxHQUFHLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztRQUN4Q1gsdURBQWdCQSxDQUFDSyxLQUFLQztRQUN0Qkwsb0RBQU9BLENBQUM7WUFBRVcsUUFBUUw7UUFBVztLQUM5QjtJQUVELE1BQU0sRUFBRU0sSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBR0w7SUFFeEIsSUFBSUssT0FBTztRQUNULE9BQU87WUFBRUE7UUFBTTtJQUNqQjtJQUVBLElBQUksQ0FBQ0QsTUFBTTtRQUNULE9BQU87WUFDTEMsT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRjtJQUVBLGlGQUFpRjtJQUNqRixJQUNFLENBQUNkLHlEQUFpQkEsQ0FBQztRQUNqQmUsaUJBQWlCO1lBQUNuQiw4Q0FBVUEsQ0FBQ29CLFNBQVM7WUFBRXBCLDhDQUFVQSxDQUFDcUIsUUFBUTtTQUFDO1FBQzVEQyxRQUFRYixTQUFTYyxLQUFLQyxLQUFLQyxNQUFNO1FBQ2pDQyxVQUFVakIsU0FBU2MsS0FBS0MsS0FBS0UsWUFBWSxFQUFFO1FBQzNDaEIsTUFBTUk7SUFDUixJQUNBO1FBQ0EsT0FBTztZQUNMQyxPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGO0lBRUEsMERBQTBEO0lBQzFELE1BQU1TLFdBQXFCeEIscURBQWFBLENBQUNXO0lBQ3pDLE9BQU87UUFBRUEsTUFBTWE7SUFBUztBQUMxQiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvZG9jdW1lbnRzL2dldERvY3VtZW50LnRzP2IzMWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dCB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQge1xuICBEb2N1bWVudCxcbiAgRmV0Y2hBcGlSZXN1bHQsXG4gIEdldERvY3VtZW50UHJvcHMsXG4gIFJvb21BY2Nlc3MsXG59IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gXCIuLi9hdXRoXCI7XG5pbXBvcnQgeyBnZXRSb29tIH0gZnJvbSBcIi4uL2xpdmVibG9ja3NcIjtcbmltcG9ydCB7IGJ1aWxkRG9jdW1lbnQsIHVzZXJBbGxvd2VkSW5Sb29tIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbi8qKlxuICogR2V0IGEgZG9jdW1lbnQuXG4gKiBPbmx5IGFsbG93IGlmIHVzZXIgaGFzIGFjY2VzcyB0byByb29tIChpbmNsdWRpbmcgbG9nZ2VkLW91dCB1c2VycyBhbmQgcHVibGljIHJvb21zKS5cbiAqXG4gKiBAcGFyYW0gcmVxXG4gKiBAcGFyYW0gcmVzXG4gKiBAcGFyYW0gZG9jdW1lbnRJZCAtIFRoZSBkb2N1bWVudCBpZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RG9jdW1lbnQoXG4gIHJlcTogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlcVwiXSxcbiAgcmVzOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVzXCJdLFxuICB7IGRvY3VtZW50SWQgfTogR2V0RG9jdW1lbnRQcm9wc1xuKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDxEb2N1bWVudD4+IHtcbiAgLy8gR2V0IHNlc3Npb24gYW5kIHJvb21cbiAgY29uc3QgW3Nlc3Npb24sIHJvb21dID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIGdldFNlcnZlclNlc3Npb24ocmVxLCByZXMpLFxuICAgIGdldFJvb20oeyByb29tSWQ6IGRvY3VtZW50SWQgfSksXG4gIF0pO1xuXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IHJvb207XG5cbiAgaWYgKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgfVxuXG4gIGlmICghZGF0YSkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDQsXG4gICAgICAgIG1lc3NhZ2U6IFwiUm9vbSBub3QgZm91bmRcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJDaGVjayB0aGF0IHlvdSdyZSBvbiB0aGUgY29ycmVjdCBwYWdlXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBDaGVjayBjdXJyZW50IHVzZXIgaGFzIGFjY2VzcyB0byB0aGUgcm9vbSAoaWYgbm90IGxvZ2dlZCBpbiwgdXNlIGVtcHR5IHZhbHVlcylcbiAgaWYgKFxuICAgICF1c2VyQWxsb3dlZEluUm9vbSh7XG4gICAgICBhY2Nlc3Nlc0FsbG93ZWQ6IFtSb29tQWNjZXNzLlJvb21Xcml0ZSwgUm9vbUFjY2Vzcy5Sb29tUmVhZF0sXG4gICAgICB1c2VySWQ6IHNlc3Npb24/LnVzZXIuaW5mby5pZCA/PyBcIlwiLFxuICAgICAgZ3JvdXBJZHM6IHNlc3Npb24/LnVzZXIuaW5mby5ncm91cElkcyA/PyBbXSxcbiAgICAgIHJvb206IGRhdGEsXG4gICAgfSlcbiAgKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwMyxcbiAgICAgICAgbWVzc2FnZTogXCJOb3QgYWxsb3dlZCBhY2Nlc3NcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJDaGVjayB0aGF0IHlvdSd2ZSBiZWVuIGdpdmVuIHBlcm1pc3Npb24gdG8gdGhlIHJvb21cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIENvbnZlcnQgcm9vbSBpbnRvIG91ciBjdXN0b20gZG9jdW1lbnQgZm9ybWF0IGFuZCByZXR1cm5cbiAgY29uc3QgZG9jdW1lbnQ6IERvY3VtZW50ID0gYnVpbGREb2N1bWVudChkYXRhKTtcbiAgcmV0dXJuIHsgZGF0YTogZG9jdW1lbnQgfTtcbn1cbiJdLCJuYW1lcyI6WyJSb29tQWNjZXNzIiwiZ2V0U2VydmVyU2Vzc2lvbiIsImdldFJvb20iLCJidWlsZERvY3VtZW50IiwidXNlckFsbG93ZWRJblJvb20iLCJnZXREb2N1bWVudCIsInJlcSIsInJlcyIsImRvY3VtZW50SWQiLCJzZXNzaW9uIiwicm9vbSIsIlByb21pc2UiLCJhbGwiLCJyb29tSWQiLCJkYXRhIiwiZXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsInN1Z2dlc3Rpb24iLCJhY2Nlc3Nlc0FsbG93ZWQiLCJSb29tV3JpdGUiLCJSb29tUmVhZCIsInVzZXJJZCIsInVzZXIiLCJpbmZvIiwiaWQiLCJncm91cElkcyIsImRvY3VtZW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/getDocument.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/getDocumentGroups.ts":
/*!***************************************************!*\
  !*** ./lib/server/documents/getDocumentGroups.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getDocumentGroups: () => (/* binding */ getDocumentGroups)\n/* harmony export */ });\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n\n/**\n * Get all groups attached to a given document.\n *\n * @param req\n * @param res\n * @param documentId - The document's id\n */ async function getDocumentGroups(req, res, { documentId }) {\n    // Get session and room\n    const room = await (0,_liveblocks__WEBPACK_IMPORTED_MODULE_0__.getRoom)({\n        roomId: documentId\n    });\n    // Get the room from documentId\n    const { data, error } = room;\n    if (error) {\n        return {\n            error\n        };\n    }\n    if (!data) {\n        return {\n            error: {\n                code: 404,\n                message: \"Room not found\",\n                suggestion: \"Check that you're on the correct page\"\n            }\n        };\n    }\n    // If successful, convert room to a list of groups and send\n    const result = await (0,_utils__WEBPACK_IMPORTED_MODULE_1__.buildDocumentGroups)(data);\n    return {\n        data: result\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy9nZXREb2N1bWVudEdyb3Vwcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFNd0M7QUFDTztBQUUvQzs7Ozs7O0NBTUMsR0FDTSxlQUFlRSxrQkFDcEJDLEdBQXFDLEVBQ3JDQyxHQUFxQyxFQUNyQyxFQUFFQyxVQUFVLEVBQTBCO0lBRXRDLHVCQUF1QjtJQUN2QixNQUFNQyxPQUFPLE1BQU1OLG9EQUFPQSxDQUFDO1FBQUVPLFFBQVFGO0lBQVc7SUFFaEQsK0JBQStCO0lBQy9CLE1BQU0sRUFBRUcsSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBR0g7SUFFeEIsSUFBSUcsT0FBTztRQUNULE9BQU87WUFBRUE7UUFBTTtJQUNqQjtJQUVBLElBQUksQ0FBQ0QsTUFBTTtRQUNULE9BQU87WUFDTEMsT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRjtJQUVBLDJEQUEyRDtJQUMzRCxNQUFNQyxTQUEwQixNQUFNWiwyREFBbUJBLENBQUNPO0lBQzFELE9BQU87UUFBRUEsTUFBTUs7SUFBTztBQUN4QiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvZG9jdW1lbnRzL2dldERvY3VtZW50R3JvdXBzLnRzP2VkOWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dCB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQge1xuICBEb2N1bWVudEdyb3VwLFxuICBGZXRjaEFwaVJlc3VsdCxcbiAgR2V0RG9jdW1lbnRHcm91cHNQcm9wcyxcbn0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRSb29tIH0gZnJvbSBcIi4uL2xpdmVibG9ja3NcIjtcbmltcG9ydCB7IGJ1aWxkRG9jdW1lbnRHcm91cHMgfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuLyoqXG4gKiBHZXQgYWxsIGdyb3VwcyBhdHRhY2hlZCB0byBhIGdpdmVuIGRvY3VtZW50LlxuICpcbiAqIEBwYXJhbSByZXFcbiAqIEBwYXJhbSByZXNcbiAqIEBwYXJhbSBkb2N1bWVudElkIC0gVGhlIGRvY3VtZW50J3MgaWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERvY3VtZW50R3JvdXBzKFxuICByZXE6IEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHRbXCJyZXFcIl0sXG4gIHJlczogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlc1wiXSxcbiAgeyBkb2N1bWVudElkIH06IEdldERvY3VtZW50R3JvdXBzUHJvcHNcbik6IFByb21pc2U8RmV0Y2hBcGlSZXN1bHQ8RG9jdW1lbnRHcm91cFtdPj4ge1xuICAvLyBHZXQgc2Vzc2lvbiBhbmQgcm9vbVxuICBjb25zdCByb29tID0gYXdhaXQgZ2V0Um9vbSh7IHJvb21JZDogZG9jdW1lbnRJZCB9KTtcblxuICAvLyBHZXQgdGhlIHJvb20gZnJvbSBkb2N1bWVudElkXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IHJvb207XG5cbiAgaWYgKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgfVxuXG4gIGlmICghZGF0YSkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDQsXG4gICAgICAgIG1lc3NhZ2U6IFwiUm9vbSBub3QgZm91bmRcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJDaGVjayB0aGF0IHlvdSdyZSBvbiB0aGUgY29ycmVjdCBwYWdlXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBJZiBzdWNjZXNzZnVsLCBjb252ZXJ0IHJvb20gdG8gYSBsaXN0IG9mIGdyb3VwcyBhbmQgc2VuZFxuICBjb25zdCByZXN1bHQ6IERvY3VtZW50R3JvdXBbXSA9IGF3YWl0IGJ1aWxkRG9jdW1lbnRHcm91cHMoZGF0YSk7XG4gIHJldHVybiB7IGRhdGE6IHJlc3VsdCB9O1xufVxuIl0sIm5hbWVzIjpbImdldFJvb20iLCJidWlsZERvY3VtZW50R3JvdXBzIiwiZ2V0RG9jdW1lbnRHcm91cHMiLCJyZXEiLCJyZXMiLCJkb2N1bWVudElkIiwicm9vbSIsInJvb21JZCIsImRhdGEiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwic3VnZ2VzdGlvbiIsInJlc3VsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/getDocumentGroups.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/getDocumentUsers.ts":
/*!**************************************************!*\
  !*** ./lib/server/documents/getDocumentUsers.ts ***!
  \**************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getDocumentUsers: () => (/* binding */ getDocumentUsers)\n/* harmony export */ });\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_0__]);\n_auth__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n/**\n * Get all collaborators in a given document.\n *\n * @param req\n * @param res\n * @param documentId - The document's id\n */ async function getDocumentUsers(req, res, { documentId }) {\n    // Get session and room\n    const [session, room] = await Promise.all([\n        (0,_auth__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(req, res),\n        (0,_liveblocks__WEBPACK_IMPORTED_MODULE_1__.getRoom)({\n            roomId: documentId\n        })\n    ]);\n    // Get the room from documentId\n    const { data, error } = room;\n    if (error) {\n        return {\n            error\n        };\n    }\n    if (!data) {\n        return {\n            error: {\n                code: 404,\n                message: \"Room not found\",\n                suggestion: \"Check that you're on the correct page\"\n            }\n        };\n    }\n    // If successful, convert room to a list of collaborators and send\n    const result = await (0,_utils__WEBPACK_IMPORTED_MODULE_2__.buildDocumentUsers)(data, session?.user.info.id ?? \"\");\n    return {\n        data: result\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy9nZXREb2N1bWVudFVzZXJzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFNMkM7QUFDSDtBQUNNO0FBRTlDOzs7Ozs7Q0FNQyxHQUNNLGVBQWVHLGlCQUNwQkMsR0FBcUMsRUFDckNDLEdBQXFDLEVBQ3JDLEVBQUVDLFVBQVUsRUFBeUI7SUFFckMsdUJBQXVCO0lBQ3ZCLE1BQU0sQ0FBQ0MsU0FBU0MsS0FBSyxHQUFHLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztRQUN4Q1YsdURBQWdCQSxDQUFDSSxLQUFLQztRQUN0Qkosb0RBQU9BLENBQUM7WUFBRVUsUUFBUUw7UUFBVztLQUM5QjtJQUVELCtCQUErQjtJQUMvQixNQUFNLEVBQUVNLElBQUksRUFBRUMsS0FBSyxFQUFFLEdBQUdMO0lBRXhCLElBQUlLLE9BQU87UUFDVCxPQUFPO1lBQUVBO1FBQU07SUFDakI7SUFFQSxJQUFJLENBQUNELE1BQU07UUFDVCxPQUFPO1lBQ0xDLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVk7WUFDZDtRQUNGO0lBQ0Y7SUFFQSxrRUFBa0U7SUFDbEUsTUFBTUMsU0FBeUIsTUFBTWYsMERBQWtCQSxDQUNyRFUsTUFDQUwsU0FBU1csS0FBS0MsS0FBS0MsTUFBTTtJQUUzQixPQUFPO1FBQUVSLE1BQU1LO0lBQU87QUFDeEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL2RvY3VtZW50cy9nZXREb2N1bWVudFVzZXJzLnRzPzg0MjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dCB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQge1xuICBEb2N1bWVudFVzZXIsXG4gIEZldGNoQXBpUmVzdWx0LFxuICBHZXREb2N1bWVudFVzZXJzUHJvcHMsXG59IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gXCIuLi9hdXRoXCI7XG5pbXBvcnQgeyBnZXRSb29tIH0gZnJvbSBcIi4uL2xpdmVibG9ja3NcIjtcbmltcG9ydCB7IGJ1aWxkRG9jdW1lbnRVc2VycyB9IGZyb20gXCIuLi91dGlsc1wiO1xuXG4vKipcbiAqIEdldCBhbGwgY29sbGFib3JhdG9ycyBpbiBhIGdpdmVuIGRvY3VtZW50LlxuICpcbiAqIEBwYXJhbSByZXFcbiAqIEBwYXJhbSByZXNcbiAqIEBwYXJhbSBkb2N1bWVudElkIC0gVGhlIGRvY3VtZW50J3MgaWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERvY3VtZW50VXNlcnMoXG4gIHJlcTogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlcVwiXSxcbiAgcmVzOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVzXCJdLFxuICB7IGRvY3VtZW50SWQgfTogR2V0RG9jdW1lbnRVc2Vyc1Byb3BzXG4pOiBQcm9taXNlPEZldGNoQXBpUmVzdWx0PERvY3VtZW50VXNlcltdPj4ge1xuICAvLyBHZXQgc2Vzc2lvbiBhbmQgcm9vbVxuICBjb25zdCBbc2Vzc2lvbiwgcm9vbV0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgZ2V0U2VydmVyU2Vzc2lvbihyZXEsIHJlcyksXG4gICAgZ2V0Um9vbSh7IHJvb21JZDogZG9jdW1lbnRJZCB9KSxcbiAgXSk7XG5cbiAgLy8gR2V0IHRoZSByb29tIGZyb20gZG9jdW1lbnRJZFxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSByb29tO1xuXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiB7IGVycm9yIH07XG4gIH1cblxuICBpZiAoIWRhdGEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDA0LFxuICAgICAgICBtZXNzYWdlOiBcIlJvb20gbm90IGZvdW5kXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiQ2hlY2sgdGhhdCB5b3UncmUgb24gdGhlIGNvcnJlY3QgcGFnZVwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gSWYgc3VjY2Vzc2Z1bCwgY29udmVydCByb29tIHRvIGEgbGlzdCBvZiBjb2xsYWJvcmF0b3JzIGFuZCBzZW5kXG4gIGNvbnN0IHJlc3VsdDogRG9jdW1lbnRVc2VyW10gPSBhd2FpdCBidWlsZERvY3VtZW50VXNlcnMoXG4gICAgZGF0YSxcbiAgICBzZXNzaW9uPy51c2VyLmluZm8uaWQgPz8gXCJcIlxuICApO1xuICByZXR1cm4geyBkYXRhOiByZXN1bHQgfTtcbn1cbiJdLCJuYW1lcyI6WyJnZXRTZXJ2ZXJTZXNzaW9uIiwiZ2V0Um9vbSIsImJ1aWxkRG9jdW1lbnRVc2VycyIsImdldERvY3VtZW50VXNlcnMiLCJyZXEiLCJyZXMiLCJkb2N1bWVudElkIiwic2Vzc2lvbiIsInJvb20iLCJQcm9taXNlIiwiYWxsIiwicm9vbUlkIiwiZGF0YSIsImVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJzdWdnZXN0aW9uIiwicmVzdWx0IiwidXNlciIsImluZm8iLCJpZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/getDocumentUsers.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/getDocuments.ts":
/*!**********************************************!*\
  !*** ./lib/server/documents/getDocuments.ts ***!
  \**********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getDocuments: () => (/* binding */ getDocuments)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_1__]);\n_auth__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n/**\n * Get a list of documents.\n * Filter by sending userId, groupIds, or metadata in the query, otherwise return all.\n * Only allow if authorized with NextAuth and user has access to each room.\n *\n * @param req\n * @param res\n * @param [userId] - Optional, filter to rooms with this userAccess set\n * @param [groupIds] - Optional, filter to rooms with these groupIds set (comma separated)\n * @param [documentType] - Optional, filter for this type of document e.g. \"canvas\"\n * @param [drafts] - Optional, retrieve only draft documents\n * @param [limit] - Optional, the amount of documents to retrieve\n */ async function getDocuments(req, res, { userId = \"\", groupIds = [], documentType, drafts, limit }) {\n    // Build getRooms arguments\n    const metadata = {};\n    if (documentType) {\n        metadata[\"type\"] = documentType;\n    }\n    let getRoomsOptions = {\n        limit,\n        metadata\n    };\n    const draftGroupName = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.getDraftsGroupName)(userId);\n    if (drafts) {\n        // Drafts are stored as a group that uses the userId\n        getRoomsOptions = {\n            ...getRoomsOptions,\n            groupIds: [\n                draftGroupName\n            ]\n        };\n    } else {\n        // Not a draft, use other info\n        getRoomsOptions = {\n            ...getRoomsOptions,\n            groupIds: groupIds.filter((id)=>id !== draftGroupName),\n            userId: userId\n        };\n    }\n    // Get session and rooms\n    const [session, rooms] = await Promise.all([\n        (0,_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(req, res),\n        (0,_liveblocks__WEBPACK_IMPORTED_MODULE_2__.getRooms)(getRoomsOptions)\n    ]);\n    // Check user is logged in\n    if (!session) {\n        return {\n            error: {\n                code: 401,\n                message: \"Not signed in\",\n                suggestion: \"Sign in to get documents\"\n            }\n        };\n    }\n    // Call Liveblocks API and get rooms\n    const { data, error } = rooms;\n    if (error || !data) {\n        return {\n            error\n        };\n    }\n    // Check current logged-in user has access to each room\n    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_3__.userAllowedInRooms)({\n        accessesAllowed: [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomWrite,\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomRead\n        ],\n        userId: session.user.info.id,\n        groupIds: groupIds,\n        rooms: data.data\n    })) {\n        return {\n            error: {\n                code: 403,\n                message: \"Not allowed access\",\n                suggestion: \"Check that you've been given permission to the document\"\n            }\n        };\n    }\n    // Convert rooms to custom document format\n    const documents = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.buildDocuments)(data.data ?? []);\n    const result = {\n        documents: documents,\n        nextPage: data.nextPage\n    };\n    return {\n        data: result\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy9nZXREb2N1bWVudHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFNd0I7QUFDbUI7QUFDRjtBQUt2QjtBQUVsQjs7Ozs7Ozs7Ozs7O0NBWUMsR0FDTSxlQUFlTSxhQUNwQkMsR0FBcUMsRUFDckNDLEdBQXFDLEVBQ3JDLEVBQUVDLFNBQVMsRUFBRSxFQUFFQyxXQUFXLEVBQUUsRUFBRUMsWUFBWSxFQUFFQyxNQUFNLEVBQUVDLEtBQUssRUFBcUI7SUFFOUUsMkJBQTJCO0lBQzNCLE1BQU1DLFdBQXlCLENBQUM7SUFFaEMsSUFBSUgsY0FBYztRQUNoQkcsUUFBUSxDQUFDLE9BQU8sR0FBR0g7SUFDckI7SUFFQSxJQUFJSSxrQkFBa0Q7UUFDcERGO1FBQ0FDO0lBQ0Y7SUFFQSxNQUFNRSxpQkFBaUJaLDBEQUFrQkEsQ0FBQ0s7SUFFMUMsSUFBSUcsUUFBUTtRQUNWLG9EQUFvRDtRQUNwREcsa0JBQWtCO1lBQ2hCLEdBQUdBLGVBQWU7WUFDbEJMLFVBQVU7Z0JBQUNNO2FBQWU7UUFDNUI7SUFDRixPQUFPO1FBQ0wsOEJBQThCO1FBQzlCRCxrQkFBa0I7WUFDaEIsR0FBR0EsZUFBZTtZQUNsQkwsVUFBVUEsU0FBU08sTUFBTSxDQUFDLENBQUNDLEtBQU9BLE9BQU9GO1lBQ3pDUCxRQUFRQTtRQUNWO0lBQ0Y7SUFFQSx3QkFBd0I7SUFDeEIsTUFBTSxDQUFDVSxTQUFTQyxNQUFNLEdBQUcsTUFBTUMsUUFBUUMsR0FBRyxDQUFDO1FBQ3pDckIsdURBQWdCQSxDQUFDTSxLQUFLQztRQUN0Qk4scURBQVFBLENBQUNhO0tBQ1Y7SUFFRCwwQkFBMEI7SUFDMUIsSUFBSSxDQUFDSSxTQUFTO1FBQ1osT0FBTztZQUNMSSxPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGO0lBRUEsb0NBQW9DO0lBQ3BDLE1BQU0sRUFBRUMsSUFBSSxFQUFFSixLQUFLLEVBQUUsR0FBR0g7SUFFeEIsSUFBSUcsU0FBUyxDQUFDSSxNQUFNO1FBQ2xCLE9BQU87WUFBRUo7UUFBTTtJQUNqQjtJQUVBLHVEQUF1RDtJQUN2RCxJQUNFLENBQUNsQiwwREFBa0JBLENBQUM7UUFDbEJ1QixpQkFBaUI7WUFBQzVCLDhDQUFVQSxDQUFDNkIsU0FBUztZQUFFN0IsOENBQVVBLENBQUM4QixRQUFRO1NBQUM7UUFDNURyQixRQUFRVSxRQUFRWSxJQUFJLENBQUNDLElBQUksQ0FBQ2QsRUFBRTtRQUM1QlIsVUFBVUE7UUFDVlUsT0FBT08sS0FBS0EsSUFBSTtJQUNsQixJQUNBO1FBQ0EsT0FBTztZQUNMSixPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGO0lBRUEsMENBQTBDO0lBQzFDLE1BQU1PLFlBQVk5QixzREFBY0EsQ0FBQ3dCLEtBQUtBLElBQUksSUFBSSxFQUFFO0lBRWhELE1BQU1PLFNBQStCO1FBQ25DRCxXQUFXQTtRQUNYRSxVQUFVUixLQUFLUSxRQUFRO0lBQ3pCO0lBRUEsT0FBTztRQUFFUixNQUFNTztJQUFPO0FBQ3hCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9kb2N1bWVudHMvZ2V0RG9jdW1lbnRzLnRzPzM3MDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dCB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQge1xuICBHZXREb2N1bWVudHNQcm9wcyxcbiAgR2V0RG9jdW1lbnRzUmVzcG9uc2UsXG4gIFJvb21BY2Nlc3MsXG4gIFJvb21NZXRhZGF0YSxcbn0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSBcIi4uL2F1dGhcIjtcbmltcG9ydCB7IGdldFJvb21zIH0gZnJvbSBcIi4uL2xpdmVibG9ja3NcIjtcbmltcG9ydCB7XG4gIGJ1aWxkRG9jdW1lbnRzLFxuICBnZXREcmFmdHNHcm91cE5hbWUsXG4gIHVzZXJBbGxvd2VkSW5Sb29tcyxcbn0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbi8qKlxuICogR2V0IGEgbGlzdCBvZiBkb2N1bWVudHMuXG4gKiBGaWx0ZXIgYnkgc2VuZGluZyB1c2VySWQsIGdyb3VwSWRzLCBvciBtZXRhZGF0YSBpbiB0aGUgcXVlcnksIG90aGVyd2lzZSByZXR1cm4gYWxsLlxuICogT25seSBhbGxvdyBpZiBhdXRob3JpemVkIHdpdGggTmV4dEF1dGggYW5kIHVzZXIgaGFzIGFjY2VzcyB0byBlYWNoIHJvb20uXG4gKlxuICogQHBhcmFtIHJlcVxuICogQHBhcmFtIHJlc1xuICogQHBhcmFtIFt1c2VySWRdIC0gT3B0aW9uYWwsIGZpbHRlciB0byByb29tcyB3aXRoIHRoaXMgdXNlckFjY2VzcyBzZXRcbiAqIEBwYXJhbSBbZ3JvdXBJZHNdIC0gT3B0aW9uYWwsIGZpbHRlciB0byByb29tcyB3aXRoIHRoZXNlIGdyb3VwSWRzIHNldCAoY29tbWEgc2VwYXJhdGVkKVxuICogQHBhcmFtIFtkb2N1bWVudFR5cGVdIC0gT3B0aW9uYWwsIGZpbHRlciBmb3IgdGhpcyB0eXBlIG9mIGRvY3VtZW50IGUuZy4gXCJjYW52YXNcIlxuICogQHBhcmFtIFtkcmFmdHNdIC0gT3B0aW9uYWwsIHJldHJpZXZlIG9ubHkgZHJhZnQgZG9jdW1lbnRzXG4gKiBAcGFyYW0gW2xpbWl0XSAtIE9wdGlvbmFsLCB0aGUgYW1vdW50IG9mIGRvY3VtZW50cyB0byByZXRyaWV2ZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RG9jdW1lbnRzKFxuICByZXE6IEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHRbXCJyZXFcIl0sXG4gIHJlczogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlc1wiXSxcbiAgeyB1c2VySWQgPSBcIlwiLCBncm91cElkcyA9IFtdLCBkb2N1bWVudFR5cGUsIGRyYWZ0cywgbGltaXQgfTogR2V0RG9jdW1lbnRzUHJvcHNcbikge1xuICAvLyBCdWlsZCBnZXRSb29tcyBhcmd1bWVudHNcbiAgY29uc3QgbWV0YWRhdGE6IFJvb21NZXRhZGF0YSA9IHt9O1xuXG4gIGlmIChkb2N1bWVudFR5cGUpIHtcbiAgICBtZXRhZGF0YVtcInR5cGVcIl0gPSBkb2N1bWVudFR5cGU7XG4gIH1cblxuICBsZXQgZ2V0Um9vbXNPcHRpb25zOiBQYXJhbWV0ZXJzPHR5cGVvZiBnZXRSb29tcz5bMF0gPSB7XG4gICAgbGltaXQsXG4gICAgbWV0YWRhdGEsXG4gIH07XG5cbiAgY29uc3QgZHJhZnRHcm91cE5hbWUgPSBnZXREcmFmdHNHcm91cE5hbWUodXNlcklkKTtcblxuICBpZiAoZHJhZnRzKSB7XG4gICAgLy8gRHJhZnRzIGFyZSBzdG9yZWQgYXMgYSBncm91cCB0aGF0IHVzZXMgdGhlIHVzZXJJZFxuICAgIGdldFJvb21zT3B0aW9ucyA9IHtcbiAgICAgIC4uLmdldFJvb21zT3B0aW9ucyxcbiAgICAgIGdyb3VwSWRzOiBbZHJhZnRHcm91cE5hbWVdLFxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgLy8gTm90IGEgZHJhZnQsIHVzZSBvdGhlciBpbmZvXG4gICAgZ2V0Um9vbXNPcHRpb25zID0ge1xuICAgICAgLi4uZ2V0Um9vbXNPcHRpb25zLFxuICAgICAgZ3JvdXBJZHM6IGdyb3VwSWRzLmZpbHRlcigoaWQpID0+IGlkICE9PSBkcmFmdEdyb3VwTmFtZSksXG4gICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICB9O1xuICB9XG5cbiAgLy8gR2V0IHNlc3Npb24gYW5kIHJvb21zXG4gIGNvbnN0IFtzZXNzaW9uLCByb29tc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgZ2V0U2VydmVyU2Vzc2lvbihyZXEsIHJlcyksXG4gICAgZ2V0Um9vbXMoZ2V0Um9vbXNPcHRpb25zKSxcbiAgXSk7XG5cbiAgLy8gQ2hlY2sgdXNlciBpcyBsb2dnZWQgaW5cbiAgaWYgKCFzZXNzaW9uKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwMSxcbiAgICAgICAgbWVzc2FnZTogXCJOb3Qgc2lnbmVkIGluXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiU2lnbiBpbiB0byBnZXQgZG9jdW1lbnRzXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBDYWxsIExpdmVibG9ja3MgQVBJIGFuZCBnZXQgcm9vbXNcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gcm9vbXM7XG5cbiAgaWYgKGVycm9yIHx8ICFkYXRhKSB7XG4gICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgfVxuXG4gIC8vIENoZWNrIGN1cnJlbnQgbG9nZ2VkLWluIHVzZXIgaGFzIGFjY2VzcyB0byBlYWNoIHJvb21cbiAgaWYgKFxuICAgICF1c2VyQWxsb3dlZEluUm9vbXMoe1xuICAgICAgYWNjZXNzZXNBbGxvd2VkOiBbUm9vbUFjY2Vzcy5Sb29tV3JpdGUsIFJvb21BY2Nlc3MuUm9vbVJlYWRdLFxuICAgICAgdXNlcklkOiBzZXNzaW9uLnVzZXIuaW5mby5pZCxcbiAgICAgIGdyb3VwSWRzOiBncm91cElkcyxcbiAgICAgIHJvb21zOiBkYXRhLmRhdGEsXG4gICAgfSlcbiAgKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwMyxcbiAgICAgICAgbWVzc2FnZTogXCJOb3QgYWxsb3dlZCBhY2Nlc3NcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJDaGVjayB0aGF0IHlvdSd2ZSBiZWVuIGdpdmVuIHBlcm1pc3Npb24gdG8gdGhlIGRvY3VtZW50XCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBDb252ZXJ0IHJvb21zIHRvIGN1c3RvbSBkb2N1bWVudCBmb3JtYXRcbiAgY29uc3QgZG9jdW1lbnRzID0gYnVpbGREb2N1bWVudHMoZGF0YS5kYXRhID8/IFtdKTtcblxuICBjb25zdCByZXN1bHQ6IEdldERvY3VtZW50c1Jlc3BvbnNlID0ge1xuICAgIGRvY3VtZW50czogZG9jdW1lbnRzLFxuICAgIG5leHRQYWdlOiBkYXRhLm5leHRQYWdlLFxuICB9O1xuXG4gIHJldHVybiB7IGRhdGE6IHJlc3VsdCB9O1xufVxuIl0sIm5hbWVzIjpbIlJvb21BY2Nlc3MiLCJnZXRTZXJ2ZXJTZXNzaW9uIiwiZ2V0Um9vbXMiLCJidWlsZERvY3VtZW50cyIsImdldERyYWZ0c0dyb3VwTmFtZSIsInVzZXJBbGxvd2VkSW5Sb29tcyIsImdldERvY3VtZW50cyIsInJlcSIsInJlcyIsInVzZXJJZCIsImdyb3VwSWRzIiwiZG9jdW1lbnRUeXBlIiwiZHJhZnRzIiwibGltaXQiLCJtZXRhZGF0YSIsImdldFJvb21zT3B0aW9ucyIsImRyYWZ0R3JvdXBOYW1lIiwiZmlsdGVyIiwiaWQiLCJzZXNzaW9uIiwicm9vbXMiLCJQcm9taXNlIiwiYWxsIiwiZXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsInN1Z2dlc3Rpb24iLCJkYXRhIiwiYWNjZXNzZXNBbGxvd2VkIiwiUm9vbVdyaXRlIiwiUm9vbVJlYWQiLCJ1c2VyIiwiaW5mbyIsImRvY3VtZW50cyIsInJlc3VsdCIsIm5leHRQYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/getDocuments.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/getLiveUsers.ts":
/*!**********************************************!*\
  !*** ./lib/server/documents/getLiveUsers.ts ***!
  \**********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getLiveUsers: () => (/* binding */ getLiveUsers)\n/* harmony export */ });\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_0__]);\n_auth__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n/**\n * Retrieve the current live users in documents\n * Select documents by posting an array of documentIds in the body\n * Only allow if authorized with NextAuth\n *\n * @param req\n * @param res\n * @param documentIds - A list of document ids to select\n */ async function getLiveUsers(req, res, { documentIds }) {\n    // Get session and active users\n    const [session, activeUsers] = await Promise.all([\n        (0,_auth__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(req, res),\n        (0,_liveblocks__WEBPACK_IMPORTED_MODULE_1__.getActiveUsersInRooms)({\n            roomIds: documentIds\n        })\n    ]);\n    // Check user is logged in\n    if (!session) {\n        return {\n            error: {\n                code: 401,\n                message: \"Not signed in\",\n                suggestion: \"Sign in to access active users\"\n            }\n        };\n    }\n    // Check active users returned successfully\n    const { data, error } = activeUsers;\n    if (error) {\n        return {\n            error\n        };\n    }\n    // If you'd like to filter which data about users is sent, do so here\n    // Example - only name is sent as live user data:\n    // data.forEach(room => room.users = room.users.map(\n    //   (user: ActiveUser) => ({ name: user.info.name })\n    // ))\n    return {\n        data\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy9nZXRMaXZlVXNlcnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBTTJDO0FBQ1c7QUFFdEQ7Ozs7Ozs7O0NBUUMsR0FDTSxlQUFlRSxhQUNwQkMsR0FBcUMsRUFDckNDLEdBQXFDLEVBQ3JDLEVBQUVDLFdBQVcsRUFBcUI7SUFFbEMsK0JBQStCO0lBQy9CLE1BQU0sQ0FBQ0MsU0FBU0MsWUFBWSxHQUFHLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztRQUMvQ1QsdURBQWdCQSxDQUFDRyxLQUFLQztRQUN0Qkgsa0VBQXFCQSxDQUFDO1lBQUVTLFNBQVNMO1FBQVk7S0FDOUM7SUFFRCwwQkFBMEI7SUFDMUIsSUFBSSxDQUFDQyxTQUFTO1FBQ1osT0FBTztZQUNMSyxPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGO0lBRUEsMkNBQTJDO0lBQzNDLE1BQU0sRUFBRUMsSUFBSSxFQUFFSixLQUFLLEVBQUUsR0FBR0o7SUFFeEIsSUFBSUksT0FBTztRQUNULE9BQU87WUFBRUE7UUFBTTtJQUNqQjtJQUVBLHFFQUFxRTtJQUNyRSxpREFBaUQ7SUFDakQsb0RBQW9EO0lBQ3BELHFEQUFxRDtJQUNyRCxLQUFLO0lBRUwsT0FBTztRQUFFSTtJQUFLO0FBQ2hCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9kb2N1bWVudHMvZ2V0TGl2ZVVzZXJzLnRzP2FhY2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dCB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQge1xuICBGZXRjaEFwaVJlc3VsdCxcbiAgR2V0TGl2ZVVzZXJzUHJvcHMsXG4gIExpdmVVc2Vyc1Jlc3BvbnNlLFxufSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGdldFNlcnZlclNlc3Npb24gfSBmcm9tIFwiLi4vYXV0aFwiO1xuaW1wb3J0IHsgZ2V0QWN0aXZlVXNlcnNJblJvb21zIH0gZnJvbSBcIi4uL2xpdmVibG9ja3NcIjtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgY3VycmVudCBsaXZlIHVzZXJzIGluIGRvY3VtZW50c1xuICogU2VsZWN0IGRvY3VtZW50cyBieSBwb3N0aW5nIGFuIGFycmF5IG9mIGRvY3VtZW50SWRzIGluIHRoZSBib2R5XG4gKiBPbmx5IGFsbG93IGlmIGF1dGhvcml6ZWQgd2l0aCBOZXh0QXV0aFxuICpcbiAqIEBwYXJhbSByZXFcbiAqIEBwYXJhbSByZXNcbiAqIEBwYXJhbSBkb2N1bWVudElkcyAtIEEgbGlzdCBvZiBkb2N1bWVudCBpZHMgdG8gc2VsZWN0XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRMaXZlVXNlcnMoXG4gIHJlcTogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlcVwiXSxcbiAgcmVzOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVzXCJdLFxuICB7IGRvY3VtZW50SWRzIH06IEdldExpdmVVc2Vyc1Byb3BzXG4pOiBQcm9taXNlPEZldGNoQXBpUmVzdWx0PExpdmVVc2Vyc1Jlc3BvbnNlW10+PiB7XG4gIC8vIEdldCBzZXNzaW9uIGFuZCBhY3RpdmUgdXNlcnNcbiAgY29uc3QgW3Nlc3Npb24sIGFjdGl2ZVVzZXJzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBnZXRTZXJ2ZXJTZXNzaW9uKHJlcSwgcmVzKSxcbiAgICBnZXRBY3RpdmVVc2Vyc0luUm9vbXMoeyByb29tSWRzOiBkb2N1bWVudElkcyB9KSxcbiAgXSk7XG5cbiAgLy8gQ2hlY2sgdXNlciBpcyBsb2dnZWQgaW5cbiAgaWYgKCFzZXNzaW9uKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwMSxcbiAgICAgICAgbWVzc2FnZTogXCJOb3Qgc2lnbmVkIGluXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiU2lnbiBpbiB0byBhY2Nlc3MgYWN0aXZlIHVzZXJzXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBDaGVjayBhY3RpdmUgdXNlcnMgcmV0dXJuZWQgc3VjY2Vzc2Z1bGx5XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGFjdGl2ZVVzZXJzO1xuXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiB7IGVycm9yIH07XG4gIH1cblxuICAvLyBJZiB5b3UnZCBsaWtlIHRvIGZpbHRlciB3aGljaCBkYXRhIGFib3V0IHVzZXJzIGlzIHNlbnQsIGRvIHNvIGhlcmVcbiAgLy8gRXhhbXBsZSAtIG9ubHkgbmFtZSBpcyBzZW50IGFzIGxpdmUgdXNlciBkYXRhOlxuICAvLyBkYXRhLmZvckVhY2gocm9vbSA9PiByb29tLnVzZXJzID0gcm9vbS51c2Vycy5tYXAoXG4gIC8vICAgKHVzZXI6IEFjdGl2ZVVzZXIpID0+ICh7IG5hbWU6IHVzZXIuaW5mby5uYW1lIH0pXG4gIC8vICkpXG5cbiAgcmV0dXJuIHsgZGF0YSB9O1xufVxuIl0sIm5hbWVzIjpbImdldFNlcnZlclNlc3Npb24iLCJnZXRBY3RpdmVVc2Vyc0luUm9vbXMiLCJnZXRMaXZlVXNlcnMiLCJyZXEiLCJyZXMiLCJkb2N1bWVudElkcyIsInNlc3Npb24iLCJhY3RpdmVVc2VycyIsIlByb21pc2UiLCJhbGwiLCJyb29tSWRzIiwiZXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsInN1Z2dlc3Rpb24iLCJkYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/getLiveUsers.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/getNextDocuments.ts":
/*!**************************************************!*\
  !*** ./lib/server/documents/getNextDocuments.ts ***!
  \**************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getNextDocuments: () => (/* binding */ getNextDocuments)\n/* harmony export */ });\n/* harmony import */ var base_64__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! base-64 */ \"base-64\");\n/* harmony import */ var base_64__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(base_64__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_2__]);\n_auth__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n/**\n * Get the next rooms from the next param\n * The `next` param is retrieved from /pages/api/documents/index.ts\n * That API is called on the client within /lib/client/getDocumentsByGroup.ts\n * Only allow if authorized with NextAuth and user has access to each room.\n *\n * @param req\n * @param res\n * @param nextPage - String containing a URL to get the next set of rooms, returned from Liveblocks API\n */ async function getNextDocuments(req, res, { nextPage }) {\n    // Get session and next rooms\n    const [session, nextRooms] = await Promise.all([\n        (0,_auth__WEBPACK_IMPORTED_MODULE_2__.getServerSession)(req, res),\n        (0,_liveblocks__WEBPACK_IMPORTED_MODULE_3__.getNextRoom)({\n            next: (0,base_64__WEBPACK_IMPORTED_MODULE_0__.decode)(nextPage)\n        })\n    ]);\n    // Check user is logged in\n    if (!session) {\n        return {\n            error: {\n                code: 401,\n                message: \"Not signed in\",\n                suggestion: \"Sign in to get documents\"\n            }\n        };\n    }\n    // Get list of next rooms\n    const { data, error } = nextRooms;\n    if (error) {\n        return {\n            error\n        };\n    }\n    if (!data) {\n        return {\n            error: {\n                code: 404,\n                message: \"No more rooms found\",\n                suggestion: \"No more rooms to paginate\"\n            }\n        };\n    }\n    // Check current logged-in user has access to each room\n    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_4__.userAllowedInRooms)({\n        accessesAllowed: [\n            _types__WEBPACK_IMPORTED_MODULE_1__.RoomAccess.RoomWrite,\n            _types__WEBPACK_IMPORTED_MODULE_1__.RoomAccess.RoomRead\n        ],\n        userId: session.user.info.id,\n        groupIds: session.user.info.groupIds,\n        rooms: data.data\n    })) {\n        return {\n            error: {\n                code: 403,\n                message: \"Not allowed access\",\n                suggestion: \"Check that you've been given permission to the document\"\n            }\n        };\n    }\n    // Convert to our document format and return\n    const documents = (0,_utils__WEBPACK_IMPORTED_MODULE_4__.buildDocuments)(data.data);\n    const result = {\n        documents: documents,\n        nextPage: data.nextPage\n    };\n    return {\n        data: result\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy9nZXROZXh0RG9jdW1lbnRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBaUM7QUFPVDtBQUNtQjtBQUNDO0FBQ2tCO0FBRTlEOzs7Ozs7Ozs7Q0FTQyxHQUNNLGVBQWVNLGlCQUNwQkMsR0FBcUMsRUFDckNDLEdBQXFDLEVBQ3JDLEVBQUVDLFFBQVEsRUFBeUI7SUFFbkMsNkJBQTZCO0lBQzdCLE1BQU0sQ0FBQ0MsU0FBU0MsVUFBVSxHQUFHLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztRQUM3Q1gsdURBQWdCQSxDQUFDSyxLQUFLQztRQUN0Qkwsd0RBQVdBLENBQUM7WUFBRVcsTUFBTWQsK0NBQU1BLENBQUNTO1FBQVU7S0FDdEM7SUFFRCwwQkFBMEI7SUFDMUIsSUFBSSxDQUFDQyxTQUFTO1FBQ1osT0FBTztZQUNMSyxPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGO0lBRUEseUJBQXlCO0lBQ3pCLE1BQU0sRUFBRUMsSUFBSSxFQUFFSixLQUFLLEVBQUUsR0FBR0o7SUFFeEIsSUFBSUksT0FBTztRQUNULE9BQU87WUFBRUE7UUFBTTtJQUNqQjtJQUVBLElBQUksQ0FBQ0ksTUFBTTtRQUNULE9BQU87WUFDTEosT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRjtJQUVBLHVEQUF1RDtJQUN2RCxJQUNFLENBQUNiLDBEQUFrQkEsQ0FBQztRQUNsQmUsaUJBQWlCO1lBQUNuQiw4Q0FBVUEsQ0FBQ29CLFNBQVM7WUFBRXBCLDhDQUFVQSxDQUFDcUIsUUFBUTtTQUFDO1FBQzVEQyxRQUFRYixRQUFRYyxJQUFJLENBQUNDLElBQUksQ0FBQ0MsRUFBRTtRQUM1QkMsVUFBVWpCLFFBQVFjLElBQUksQ0FBQ0MsSUFBSSxDQUFDRSxRQUFRO1FBQ3BDQyxPQUFPVCxLQUFLQSxJQUFJO0lBQ2xCLElBQ0E7UUFDQSxPQUFPO1lBQ0xKLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVk7WUFDZDtRQUNGO0lBQ0Y7SUFFQSw0Q0FBNEM7SUFDNUMsTUFBTVcsWUFBWXpCLHNEQUFjQSxDQUFDZSxLQUFLQSxJQUFJO0lBRTFDLE1BQU1XLFNBQStCO1FBQ25DRCxXQUFXQTtRQUNYcEIsVUFBVVUsS0FBS1YsUUFBUTtJQUN6QjtJQUNBLE9BQU87UUFBRVUsTUFBTVc7SUFBTztBQUN4QiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvZG9jdW1lbnRzL2dldE5leHREb2N1bWVudHMudHM/NzdlYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWNvZGUgfSBmcm9tIFwiYmFzZS02NFwiO1xuaW1wb3J0IHsgR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dCB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQge1xuICBGZXRjaEFwaVJlc3VsdCxcbiAgR2V0RG9jdW1lbnRzUmVzcG9uc2UsXG4gIEdldE5leHREb2N1bWVudHNQcm9wcyxcbiAgUm9vbUFjY2Vzcyxcbn0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSBcIi4uL2F1dGhcIjtcbmltcG9ydCB7IGdldE5leHRSb29tIH0gZnJvbSBcIi4uL2xpdmVibG9ja3NcIjtcbmltcG9ydCB7IGJ1aWxkRG9jdW1lbnRzLCB1c2VyQWxsb3dlZEluUm9vbXMgfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuLyoqXG4gKiBHZXQgdGhlIG5leHQgcm9vbXMgZnJvbSB0aGUgbmV4dCBwYXJhbVxuICogVGhlIGBuZXh0YCBwYXJhbSBpcyByZXRyaWV2ZWQgZnJvbSAvcGFnZXMvYXBpL2RvY3VtZW50cy9pbmRleC50c1xuICogVGhhdCBBUEkgaXMgY2FsbGVkIG9uIHRoZSBjbGllbnQgd2l0aGluIC9saWIvY2xpZW50L2dldERvY3VtZW50c0J5R3JvdXAudHNcbiAqIE9ubHkgYWxsb3cgaWYgYXV0aG9yaXplZCB3aXRoIE5leHRBdXRoIGFuZCB1c2VyIGhhcyBhY2Nlc3MgdG8gZWFjaCByb29tLlxuICpcbiAqIEBwYXJhbSByZXFcbiAqIEBwYXJhbSByZXNcbiAqIEBwYXJhbSBuZXh0UGFnZSAtIFN0cmluZyBjb250YWluaW5nIGEgVVJMIHRvIGdldCB0aGUgbmV4dCBzZXQgb2Ygcm9vbXMsIHJldHVybmVkIGZyb20gTGl2ZWJsb2NrcyBBUElcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE5leHREb2N1bWVudHMoXG4gIHJlcTogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlcVwiXSxcbiAgcmVzOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVzXCJdLFxuICB7IG5leHRQYWdlIH06IEdldE5leHREb2N1bWVudHNQcm9wc1xuKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDxHZXREb2N1bWVudHNSZXNwb25zZT4+IHtcbiAgLy8gR2V0IHNlc3Npb24gYW5kIG5leHQgcm9vbXNcbiAgY29uc3QgW3Nlc3Npb24sIG5leHRSb29tc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgZ2V0U2VydmVyU2Vzc2lvbihyZXEsIHJlcyksXG4gICAgZ2V0TmV4dFJvb20oeyBuZXh0OiBkZWNvZGUobmV4dFBhZ2UpIH0pLFxuICBdKTtcblxuICAvLyBDaGVjayB1c2VyIGlzIGxvZ2dlZCBpblxuICBpZiAoIXNlc3Npb24pIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDAxLFxuICAgICAgICBtZXNzYWdlOiBcIk5vdCBzaWduZWQgaW5cIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJTaWduIGluIHRvIGdldCBkb2N1bWVudHNcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIEdldCBsaXN0IG9mIG5leHQgcm9vbXNcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gbmV4dFJvb21zO1xuXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiB7IGVycm9yIH07XG4gIH1cblxuICBpZiAoIWRhdGEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDA0LFxuICAgICAgICBtZXNzYWdlOiBcIk5vIG1vcmUgcm9vbXMgZm91bmRcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJObyBtb3JlIHJvb21zIHRvIHBhZ2luYXRlXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBDaGVjayBjdXJyZW50IGxvZ2dlZC1pbiB1c2VyIGhhcyBhY2Nlc3MgdG8gZWFjaCByb29tXG4gIGlmIChcbiAgICAhdXNlckFsbG93ZWRJblJvb21zKHtcbiAgICAgIGFjY2Vzc2VzQWxsb3dlZDogW1Jvb21BY2Nlc3MuUm9vbVdyaXRlLCBSb29tQWNjZXNzLlJvb21SZWFkXSxcbiAgICAgIHVzZXJJZDogc2Vzc2lvbi51c2VyLmluZm8uaWQsXG4gICAgICBncm91cElkczogc2Vzc2lvbi51c2VyLmluZm8uZ3JvdXBJZHMsXG4gICAgICByb29tczogZGF0YS5kYXRhLFxuICAgIH0pXG4gICkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDMsXG4gICAgICAgIG1lc3NhZ2U6IFwiTm90IGFsbG93ZWQgYWNjZXNzXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiQ2hlY2sgdGhhdCB5b3UndmUgYmVlbiBnaXZlbiBwZXJtaXNzaW9uIHRvIHRoZSBkb2N1bWVudFwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gQ29udmVydCB0byBvdXIgZG9jdW1lbnQgZm9ybWF0IGFuZCByZXR1cm5cbiAgY29uc3QgZG9jdW1lbnRzID0gYnVpbGREb2N1bWVudHMoZGF0YS5kYXRhKTtcblxuICBjb25zdCByZXN1bHQ6IEdldERvY3VtZW50c1Jlc3BvbnNlID0ge1xuICAgIGRvY3VtZW50czogZG9jdW1lbnRzLFxuICAgIG5leHRQYWdlOiBkYXRhLm5leHRQYWdlLFxuICB9O1xuICByZXR1cm4geyBkYXRhOiByZXN1bHQgfTtcbn1cbiJdLCJuYW1lcyI6WyJkZWNvZGUiLCJSb29tQWNjZXNzIiwiZ2V0U2VydmVyU2Vzc2lvbiIsImdldE5leHRSb29tIiwiYnVpbGREb2N1bWVudHMiLCJ1c2VyQWxsb3dlZEluUm9vbXMiLCJnZXROZXh0RG9jdW1lbnRzIiwicmVxIiwicmVzIiwibmV4dFBhZ2UiLCJzZXNzaW9uIiwibmV4dFJvb21zIiwiUHJvbWlzZSIsImFsbCIsIm5leHQiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwic3VnZ2VzdGlvbiIsImRhdGEiLCJhY2Nlc3Nlc0FsbG93ZWQiLCJSb29tV3JpdGUiLCJSb29tUmVhZCIsInVzZXJJZCIsInVzZXIiLCJpbmZvIiwiaWQiLCJncm91cElkcyIsInJvb21zIiwiZG9jdW1lbnRzIiwicmVzdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/getNextDocuments.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/index.ts":
/*!***************************************!*\
  !*** ./lib/server/documents/index.ts ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _createDocument__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./createDocument */ \"(api)/./lib/server/documents/createDocument.ts\");\n/* harmony import */ var _deleteDocument__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./deleteDocument */ \"(api)/./lib/server/documents/deleteDocument.ts\");\n/* harmony import */ var _getDocument__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getDocument */ \"(api)/./lib/server/documents/getDocument.ts\");\n/* harmony import */ var _getDocuments__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./getDocuments */ \"(api)/./lib/server/documents/getDocuments.ts\");\n/* harmony import */ var _getDocumentGroups__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./getDocumentGroups */ \"(api)/./lib/server/documents/getDocumentGroups.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getDocumentGroups__WEBPACK_IMPORTED_MODULE_4__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getDocumentGroups__WEBPACK_IMPORTED_MODULE_4__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getDocumentUsers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./getDocumentUsers */ \"(api)/./lib/server/documents/getDocumentUsers.ts\");\n/* harmony import */ var _getLiveUsers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./getLiveUsers */ \"(api)/./lib/server/documents/getLiveUsers.ts\");\n/* harmony import */ var _getNextDocuments__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./getNextDocuments */ \"(api)/./lib/server/documents/getNextDocuments.ts\");\n/* harmony import */ var _removeGroupAccess__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./removeGroupAccess */ \"(api)/./lib/server/documents/removeGroupAccess.ts\");\n/* harmony import */ var _removeUserAccess__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./removeUserAccess */ \"(api)/./lib/server/documents/removeUserAccess.ts\");\n/* harmony import */ var _updateDefaultAccess__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./updateDefaultAccess */ \"(api)/./lib/server/documents/updateDefaultAccess.ts\");\n/* harmony import */ var _updateDocument__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./updateDocument */ \"(api)/./lib/server/documents/updateDocument.ts\");\n/* harmony import */ var _updateGroupAccess__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./updateGroupAccess */ \"(api)/./lib/server/documents/updateGroupAccess.ts\");\n/* harmony import */ var _updateUserAccess__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./updateUserAccess */ \"(api)/./lib/server/documents/updateUserAccess.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_createDocument__WEBPACK_IMPORTED_MODULE_0__, _deleteDocument__WEBPACK_IMPORTED_MODULE_1__, _getDocument__WEBPACK_IMPORTED_MODULE_2__, _getDocuments__WEBPACK_IMPORTED_MODULE_3__, _getDocumentUsers__WEBPACK_IMPORTED_MODULE_5__, _getLiveUsers__WEBPACK_IMPORTED_MODULE_6__, _getNextDocuments__WEBPACK_IMPORTED_MODULE_7__, _removeGroupAccess__WEBPACK_IMPORTED_MODULE_8__, _removeUserAccess__WEBPACK_IMPORTED_MODULE_9__, _updateDefaultAccess__WEBPACK_IMPORTED_MODULE_10__, _updateDocument__WEBPACK_IMPORTED_MODULE_11__, _updateGroupAccess__WEBPACK_IMPORTED_MODULE_12__, _updateUserAccess__WEBPACK_IMPORTED_MODULE_13__]);\n([_createDocument__WEBPACK_IMPORTED_MODULE_0__, _deleteDocument__WEBPACK_IMPORTED_MODULE_1__, _getDocument__WEBPACK_IMPORTED_MODULE_2__, _getDocuments__WEBPACK_IMPORTED_MODULE_3__, _getDocumentUsers__WEBPACK_IMPORTED_MODULE_5__, _getLiveUsers__WEBPACK_IMPORTED_MODULE_6__, _getNextDocuments__WEBPACK_IMPORTED_MODULE_7__, _removeGroupAccess__WEBPACK_IMPORTED_MODULE_8__, _removeUserAccess__WEBPACK_IMPORTED_MODULE_9__, _updateDefaultAccess__WEBPACK_IMPORTED_MODULE_10__, _updateDocument__WEBPACK_IMPORTED_MODULE_11__, _updateGroupAccess__WEBPACK_IMPORTED_MODULE_12__, _updateUserAccess__WEBPACK_IMPORTED_MODULE_13__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _createDocument__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _createDocument__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _deleteDocument__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _deleteDocument__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getDocument__WEBPACK_IMPORTED_MODULE_2__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getDocument__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getDocuments__WEBPACK_IMPORTED_MODULE_3__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getDocuments__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getDocumentUsers__WEBPACK_IMPORTED_MODULE_5__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getDocumentUsers__WEBPACK_IMPORTED_MODULE_5__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getLiveUsers__WEBPACK_IMPORTED_MODULE_6__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getLiveUsers__WEBPACK_IMPORTED_MODULE_6__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getNextDocuments__WEBPACK_IMPORTED_MODULE_7__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getNextDocuments__WEBPACK_IMPORTED_MODULE_7__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _removeGroupAccess__WEBPACK_IMPORTED_MODULE_8__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _removeGroupAccess__WEBPACK_IMPORTED_MODULE_8__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _removeUserAccess__WEBPACK_IMPORTED_MODULE_9__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _removeUserAccess__WEBPACK_IMPORTED_MODULE_9__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _updateDefaultAccess__WEBPACK_IMPORTED_MODULE_10__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _updateDefaultAccess__WEBPACK_IMPORTED_MODULE_10__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _updateDocument__WEBPACK_IMPORTED_MODULE_11__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _updateDocument__WEBPACK_IMPORTED_MODULE_11__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _updateGroupAccess__WEBPACK_IMPORTED_MODULE_12__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _updateGroupAccess__WEBPACK_IMPORTED_MODULE_12__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _updateUserAccess__WEBPACK_IMPORTED_MODULE_13__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _updateUserAccess__WEBPACK_IMPORTED_MODULE_13__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUM7QUFDQTtBQUNIO0FBQ0M7QUFDSztBQUNEO0FBQ0o7QUFDSTtBQUNDO0FBQ0Q7QUFDRztBQUNMO0FBQ0c7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvZG9jdW1lbnRzL2luZGV4LnRzPzZhOGEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vY3JlYXRlRG9jdW1lbnRcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2RlbGV0ZURvY3VtZW50XCI7XG5leHBvcnQgKiBmcm9tIFwiLi9nZXREb2N1bWVudFwiO1xuZXhwb3J0ICogZnJvbSBcIi4vZ2V0RG9jdW1lbnRzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9nZXREb2N1bWVudEdyb3Vwc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZ2V0RG9jdW1lbnRVc2Vyc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZ2V0TGl2ZVVzZXJzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9nZXROZXh0RG9jdW1lbnRzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9yZW1vdmVHcm91cEFjY2Vzc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vcmVtb3ZlVXNlckFjY2Vzc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vdXBkYXRlRGVmYXVsdEFjY2Vzc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vdXBkYXRlRG9jdW1lbnRcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3VwZGF0ZUdyb3VwQWNjZXNzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi91cGRhdGVVc2VyQWNjZXNzXCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/index.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/removeGroupAccess.ts":
/*!***************************************************!*\
  !*** ./lib/server/documents/removeGroupAccess.ts ***!
  \***************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   removeGroupAccess: () => (/* binding */ removeGroupAccess)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _database__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../database */ \"(api)/./lib/server/database/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_1__]);\n_auth__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n/**\n * Remove a group from a document\n * Only allow if authorized with NextAuth and is added as a userId on usersAccesses\n * Do not allow if public access, or access granted through groupIds\n *\n * @param req\n * @param res\n * @param documentId - The document's id\n * @param groupId - The removed group's id\n */ async function removeGroupAccess(req, res, { documentId, groupId }) {\n    // Get session, room, and group\n    const [session, room, group] = await Promise.all([\n        (0,_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(req, res),\n        (0,_liveblocks__WEBPACK_IMPORTED_MODULE_3__.getRoom)({\n            roomId: documentId\n        }),\n        (0,_database__WEBPACK_IMPORTED_MODULE_2__.getGroup)(groupId)\n    ]);\n    // Check user is logged in\n    if (!session) {\n        return {\n            error: {\n                code: 401,\n                message: \"Not signed in\",\n                suggestion: \"Sign in to delete groups\"\n            }\n        };\n    }\n    // Check the room `documentId` exists\n    const { data, error } = room;\n    if (error) {\n        return {\n            error\n        };\n    }\n    if (!data) {\n        return {\n            error: {\n                code: 404,\n                message: \"Room not found\",\n                suggestion: \"Check that you're on the correct page\"\n            }\n        };\n    }\n    // Check current logged-in user is set as a user with id, ignoring groupIds and default access\n    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_4__.userAllowedInRoom)({\n        accessesAllowed: [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomWrite\n        ],\n        checkAccessLevels: [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccessLevels.USER\n        ],\n        userId: session.user.info.id,\n        groupIds: [],\n        room: data\n    })) {\n        return {\n            error: {\n                code: 403,\n                message: \"Not allowed access\",\n                suggestion: \"Check that you've been given permission to remove groups from the room\"\n            }\n        };\n    }\n    // Check group exists in system\n    if (!group) {\n        return {\n            error: {\n                code: 400,\n                message: \"Group does not exist\",\n                suggestion: `Check that that group ${groupId} exists in the system`\n            }\n        };\n    }\n    // If room exists, create groupsAccess element for removing the current group\n    const groupsAccesses = {\n        [groupId]: null\n    };\n    // Update the room with the new group\n    const { data: updatedRoom, error: updateRoomError } = await (0,_liveblocks__WEBPACK_IMPORTED_MODULE_3__.updateRoom)({\n        roomId: documentId,\n        groupsAccesses: groupsAccesses\n    });\n    if (updateRoomError) {\n        return {\n            error: updateRoomError\n        };\n    }\n    if (!updatedRoom) {\n        return {\n            error: {\n                code: 404,\n                message: \"Updated group not found\",\n                suggestion: \"Contact an administrator\"\n            }\n        };\n    }\n    // If successful, convert room to a list of groups and send\n    const result = await (0,_utils__WEBPACK_IMPORTED_MODULE_4__.buildDocumentGroups)(updatedRoom);\n    return {\n        data: result\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy9yZW1vdmVHcm91cEFjY2Vzcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFPd0I7QUFDbUI7QUFDSjtBQUNhO0FBQ2M7QUFFbEU7Ozs7Ozs7OztDQVNDLEdBQ00sZUFBZVEsa0JBQ3BCQyxHQUFxQyxFQUNyQ0MsR0FBcUMsRUFDckMsRUFBRUMsVUFBVSxFQUFFQyxPQUFPLEVBQTBCO0lBRS9DLCtCQUErQjtJQUMvQixNQUFNLENBQUNDLFNBQVNDLE1BQU1DLE1BQU0sR0FBRyxNQUFNQyxRQUFRQyxHQUFHLENBQUM7UUFDL0NmLHVEQUFnQkEsQ0FBQ08sS0FBS0M7UUFDdEJOLG9EQUFPQSxDQUFDO1lBQUVjLFFBQVFQO1FBQVc7UUFDN0JSLG1EQUFRQSxDQUFDUztLQUNWO0lBRUQsMEJBQTBCO0lBQzFCLElBQUksQ0FBQ0MsU0FBUztRQUNaLE9BQU87WUFDTE0sT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRjtJQUVBLHFDQUFxQztJQUNyQyxNQUFNLEVBQUVDLElBQUksRUFBRUosS0FBSyxFQUFFLEdBQUdMO0lBRXhCLElBQUlLLE9BQU87UUFDVCxPQUFPO1lBQUVBO1FBQU07SUFDakI7SUFFQSxJQUFJLENBQUNJLE1BQU07UUFDVCxPQUFPO1lBQ0xKLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVk7WUFDZDtRQUNGO0lBQ0Y7SUFFQSw4RkFBOEY7SUFDOUYsSUFDRSxDQUFDZix5REFBaUJBLENBQUM7UUFDakJpQixpQkFBaUI7WUFBQ3hCLDhDQUFVQSxDQUFDeUIsU0FBUztTQUFDO1FBQ3ZDQyxtQkFBbUI7WUFBQ3pCLG9EQUFnQkEsQ0FBQzBCLElBQUk7U0FBQztRQUMxQ0MsUUFBUWYsUUFBUWdCLElBQUksQ0FBQ0MsSUFBSSxDQUFDQyxFQUFFO1FBQzVCQyxVQUFVLEVBQUU7UUFDWmxCLE1BQU1TO0lBQ1IsSUFDQTtRQUNBLE9BQU87WUFDTEosT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFDRTtZQUNKO1FBQ0Y7SUFDRjtJQUVBLCtCQUErQjtJQUMvQixJQUFJLENBQUNQLE9BQU87UUFDVixPQUFPO1lBQ0xJLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVksQ0FBQyxzQkFBc0IsRUFBRVYsUUFBUSxxQkFBcUIsQ0FBQztZQUNyRTtRQUNGO0lBQ0Y7SUFFQSw2RUFBNkU7SUFDN0UsTUFBTXFCLGlCQUFpQjtRQUNyQixDQUFDckIsUUFBUSxFQUFFO0lBQ2I7SUFFQSxxQ0FBcUM7SUFDckMsTUFBTSxFQUFFVyxNQUFNVyxXQUFXLEVBQUVmLE9BQU9nQixlQUFlLEVBQUUsR0FBRyxNQUFNOUIsdURBQVVBLENBQUM7UUFDckVhLFFBQVFQO1FBQ1JzQixnQkFBZ0JBO0lBQ2xCO0lBRUEsSUFBSUUsaUJBQWlCO1FBQ25CLE9BQU87WUFBRWhCLE9BQU9nQjtRQUFnQjtJQUNsQztJQUVBLElBQUksQ0FBQ0QsYUFBYTtRQUNoQixPQUFPO1lBQ0xmLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVk7WUFDZDtRQUNGO0lBQ0Y7SUFFQSwyREFBMkQ7SUFDM0QsTUFBTWMsU0FBMEIsTUFBTTlCLDJEQUFtQkEsQ0FBQzRCO0lBQzFELE9BQU87UUFBRVgsTUFBTWE7SUFBTztBQUN4QiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvZG9jdW1lbnRzL3JlbW92ZUdyb3VwQWNjZXNzLnRzPzEwNTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dCB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQge1xuICBEb2N1bWVudEdyb3VwLFxuICBGZXRjaEFwaVJlc3VsdCxcbiAgUmVtb3ZlR3JvdXBBY2Nlc3NQcm9wcyxcbiAgUm9vbUFjY2VzcyxcbiAgUm9vbUFjY2Vzc0xldmVscyxcbn0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSBcIi4uL2F1dGhcIjtcbmltcG9ydCB7IGdldEdyb3VwIH0gZnJvbSBcIi4uL2RhdGFiYXNlXCI7XG5pbXBvcnQgeyBnZXRSb29tLCB1cGRhdGVSb29tIH0gZnJvbSBcIi4uL2xpdmVibG9ja3NcIjtcbmltcG9ydCB7IGJ1aWxkRG9jdW1lbnRHcm91cHMsIHVzZXJBbGxvd2VkSW5Sb29tIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbi8qKlxuICogUmVtb3ZlIGEgZ3JvdXAgZnJvbSBhIGRvY3VtZW50XG4gKiBPbmx5IGFsbG93IGlmIGF1dGhvcml6ZWQgd2l0aCBOZXh0QXV0aCBhbmQgaXMgYWRkZWQgYXMgYSB1c2VySWQgb24gdXNlcnNBY2Nlc3Nlc1xuICogRG8gbm90IGFsbG93IGlmIHB1YmxpYyBhY2Nlc3MsIG9yIGFjY2VzcyBncmFudGVkIHRocm91Z2ggZ3JvdXBJZHNcbiAqXG4gKiBAcGFyYW0gcmVxXG4gKiBAcGFyYW0gcmVzXG4gKiBAcGFyYW0gZG9jdW1lbnRJZCAtIFRoZSBkb2N1bWVudCdzIGlkXG4gKiBAcGFyYW0gZ3JvdXBJZCAtIFRoZSByZW1vdmVkIGdyb3VwJ3MgaWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbW92ZUdyb3VwQWNjZXNzKFxuICByZXE6IEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHRbXCJyZXFcIl0sXG4gIHJlczogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlc1wiXSxcbiAgeyBkb2N1bWVudElkLCBncm91cElkIH06IFJlbW92ZUdyb3VwQWNjZXNzUHJvcHNcbik6IFByb21pc2U8RmV0Y2hBcGlSZXN1bHQ8RG9jdW1lbnRHcm91cFtdPj4ge1xuICAvLyBHZXQgc2Vzc2lvbiwgcm9vbSwgYW5kIGdyb3VwXG4gIGNvbnN0IFtzZXNzaW9uLCByb29tLCBncm91cF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgZ2V0U2VydmVyU2Vzc2lvbihyZXEsIHJlcyksXG4gICAgZ2V0Um9vbSh7IHJvb21JZDogZG9jdW1lbnRJZCB9KSxcbiAgICBnZXRHcm91cChncm91cElkKSxcbiAgXSk7XG5cbiAgLy8gQ2hlY2sgdXNlciBpcyBsb2dnZWQgaW5cbiAgaWYgKCFzZXNzaW9uKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwMSxcbiAgICAgICAgbWVzc2FnZTogXCJOb3Qgc2lnbmVkIGluXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiU2lnbiBpbiB0byBkZWxldGUgZ3JvdXBzXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBDaGVjayB0aGUgcm9vbSBgZG9jdW1lbnRJZGAgZXhpc3RzXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IHJvb207XG5cbiAgaWYgKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgfVxuXG4gIGlmICghZGF0YSkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDQsXG4gICAgICAgIG1lc3NhZ2U6IFwiUm9vbSBub3QgZm91bmRcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJDaGVjayB0aGF0IHlvdSdyZSBvbiB0aGUgY29ycmVjdCBwYWdlXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBDaGVjayBjdXJyZW50IGxvZ2dlZC1pbiB1c2VyIGlzIHNldCBhcyBhIHVzZXIgd2l0aCBpZCwgaWdub3JpbmcgZ3JvdXBJZHMgYW5kIGRlZmF1bHQgYWNjZXNzXG4gIGlmIChcbiAgICAhdXNlckFsbG93ZWRJblJvb20oe1xuICAgICAgYWNjZXNzZXNBbGxvd2VkOiBbUm9vbUFjY2Vzcy5Sb29tV3JpdGVdLFxuICAgICAgY2hlY2tBY2Nlc3NMZXZlbHM6IFtSb29tQWNjZXNzTGV2ZWxzLlVTRVJdLFxuICAgICAgdXNlcklkOiBzZXNzaW9uLnVzZXIuaW5mby5pZCxcbiAgICAgIGdyb3VwSWRzOiBbXSxcbiAgICAgIHJvb206IGRhdGEsXG4gICAgfSlcbiAgKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwMyxcbiAgICAgICAgbWVzc2FnZTogXCJOb3QgYWxsb3dlZCBhY2Nlc3NcIixcbiAgICAgICAgc3VnZ2VzdGlvbjpcbiAgICAgICAgICBcIkNoZWNrIHRoYXQgeW91J3ZlIGJlZW4gZ2l2ZW4gcGVybWlzc2lvbiB0byByZW1vdmUgZ3JvdXBzIGZyb20gdGhlIHJvb21cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIENoZWNrIGdyb3VwIGV4aXN0cyBpbiBzeXN0ZW1cbiAgaWYgKCFncm91cCkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDAsXG4gICAgICAgIG1lc3NhZ2U6IFwiR3JvdXAgZG9lcyBub3QgZXhpc3RcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogYENoZWNrIHRoYXQgdGhhdCBncm91cCAke2dyb3VwSWR9IGV4aXN0cyBpbiB0aGUgc3lzdGVtYCxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIElmIHJvb20gZXhpc3RzLCBjcmVhdGUgZ3JvdXBzQWNjZXNzIGVsZW1lbnQgZm9yIHJlbW92aW5nIHRoZSBjdXJyZW50IGdyb3VwXG4gIGNvbnN0IGdyb3Vwc0FjY2Vzc2VzID0ge1xuICAgIFtncm91cElkXTogbnVsbCxcbiAgfTtcblxuICAvLyBVcGRhdGUgdGhlIHJvb20gd2l0aCB0aGUgbmV3IGdyb3VwXG4gIGNvbnN0IHsgZGF0YTogdXBkYXRlZFJvb20sIGVycm9yOiB1cGRhdGVSb29tRXJyb3IgfSA9IGF3YWl0IHVwZGF0ZVJvb20oe1xuICAgIHJvb21JZDogZG9jdW1lbnRJZCxcbiAgICBncm91cHNBY2Nlc3NlczogZ3JvdXBzQWNjZXNzZXMsXG4gIH0pO1xuXG4gIGlmICh1cGRhdGVSb29tRXJyb3IpIHtcbiAgICByZXR1cm4geyBlcnJvcjogdXBkYXRlUm9vbUVycm9yIH07XG4gIH1cblxuICBpZiAoIXVwZGF0ZWRSb29tKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwNCxcbiAgICAgICAgbWVzc2FnZTogXCJVcGRhdGVkIGdyb3VwIG5vdCBmb3VuZFwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIkNvbnRhY3QgYW4gYWRtaW5pc3RyYXRvclwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gSWYgc3VjY2Vzc2Z1bCwgY29udmVydCByb29tIHRvIGEgbGlzdCBvZiBncm91cHMgYW5kIHNlbmRcbiAgY29uc3QgcmVzdWx0OiBEb2N1bWVudEdyb3VwW10gPSBhd2FpdCBidWlsZERvY3VtZW50R3JvdXBzKHVwZGF0ZWRSb29tKTtcbiAgcmV0dXJuIHsgZGF0YTogcmVzdWx0IH07XG59XG4iXSwibmFtZXMiOlsiUm9vbUFjY2VzcyIsIlJvb21BY2Nlc3NMZXZlbHMiLCJnZXRTZXJ2ZXJTZXNzaW9uIiwiZ2V0R3JvdXAiLCJnZXRSb29tIiwidXBkYXRlUm9vbSIsImJ1aWxkRG9jdW1lbnRHcm91cHMiLCJ1c2VyQWxsb3dlZEluUm9vbSIsInJlbW92ZUdyb3VwQWNjZXNzIiwicmVxIiwicmVzIiwiZG9jdW1lbnRJZCIsImdyb3VwSWQiLCJzZXNzaW9uIiwicm9vbSIsImdyb3VwIiwiUHJvbWlzZSIsImFsbCIsInJvb21JZCIsImVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJzdWdnZXN0aW9uIiwiZGF0YSIsImFjY2Vzc2VzQWxsb3dlZCIsIlJvb21Xcml0ZSIsImNoZWNrQWNjZXNzTGV2ZWxzIiwiVVNFUiIsInVzZXJJZCIsInVzZXIiLCJpbmZvIiwiaWQiLCJncm91cElkcyIsImdyb3Vwc0FjY2Vzc2VzIiwidXBkYXRlZFJvb20iLCJ1cGRhdGVSb29tRXJyb3IiLCJyZXN1bHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/removeGroupAccess.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/removeUserAccess.ts":
/*!**************************************************!*\
  !*** ./lib/server/documents/removeUserAccess.ts ***!
  \**************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   removeUserAccess: () => (/* binding */ removeUserAccess)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _database__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../database */ \"(api)/./lib/server/database/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_1__]);\n_auth__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n/**\n * Remove a collaborator from a document\n * Only allow if authorized with NextAuth and is added as a userId on usersAccesses\n * Do not allow if public access, or access granted through groupIds\n *\n * @param req\n * @param res\n * @param documentId - The document's id\n * @param userId - The removed user's id\n */ async function removeUserAccess(req, res, { documentId, userId }) {\n    // Get session, room, and user\n    const [session, room, user] = await Promise.all([\n        (0,_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(req, res),\n        (0,_liveblocks__WEBPACK_IMPORTED_MODULE_3__.getRoom)({\n            roomId: documentId\n        }),\n        (0,_database__WEBPACK_IMPORTED_MODULE_2__.getUser)(userId)\n    ]);\n    // Check user is logged in\n    if (!session) {\n        return {\n            error: {\n                code: 401,\n                message: \"Not signed in\",\n                suggestion: \"Sign in to remove a user\"\n            }\n        };\n    }\n    // Check the room `documentId` exists\n    const { data: currentRoom, error } = room;\n    if (error) {\n        return {\n            error\n        };\n    }\n    if (!currentRoom) {\n        return {\n            error: {\n                code: 404,\n                message: \"Room not found\",\n                suggestion: \"Check that you're on the correct page\"\n            }\n        };\n    }\n    // Check current logged-in user is set as a user with id, ignoring groupIds and default access\n    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_4__.userAllowedInRoom)({\n        accessesAllowed: [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomWrite\n        ],\n        checkAccessLevels: [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccessLevels.USER\n        ],\n        userId: session.user.info.id,\n        groupIds: [],\n        room: currentRoom\n    })) {\n        return {\n            error: {\n                code: 403,\n                message: \"Not allowed access\",\n                suggestion: \"Check that you've been given permission to the document\"\n            }\n        };\n    }\n    // Check user exists in system\n    if (!user) {\n        return {\n            error: {\n                code: 400,\n                message: \"User not found\",\n                suggestion: \"Check that you've used the correct user id\"\n            }\n        };\n    }\n    // If user exists, check that they are not the owner\n    if ((0,_utils__WEBPACK_IMPORTED_MODULE_4__.isUserDocumentOwner)({\n        room: currentRoom,\n        userId: userId\n    })) {\n        return {\n            error: {\n                code: 400,\n                message: \"User is owner\",\n                suggestion: `User ${userId} is the document owner and cannot be edited`\n            }\n        };\n    }\n    // If room exists, create userAccess element for removing the current collaborator\n    const usersAccesses = {\n        [userId]: null\n    };\n    // Update the room with the new collaborators\n    const { data: updatedRoom, error: updateRoomError } = await (0,_liveblocks__WEBPACK_IMPORTED_MODULE_3__.updateRoom)({\n        roomId: documentId,\n        usersAccesses: usersAccesses\n    });\n    if (updateRoomError) {\n        return {\n            error: updateRoomError\n        };\n    }\n    if (!updatedRoom) {\n        return {\n            error: {\n                code: 404,\n                message: \"Updated room not found\",\n                suggestion: \"Contact an administrator\"\n            }\n        };\n    }\n    const result = await (0,_utils__WEBPACK_IMPORTED_MODULE_4__.buildDocumentUsers)(updatedRoom, session.user.info.id);\n    return {\n        data: result\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy9yZW1vdmVVc2VyQWNjZXNzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQU93QjtBQUNtQjtBQUNMO0FBQ2M7QUFLbEM7QUFFbEI7Ozs7Ozs7OztDQVNDLEdBQ00sZUFBZVMsaUJBQ3BCQyxHQUFxQyxFQUNyQ0MsR0FBcUMsRUFDckMsRUFBRUMsVUFBVSxFQUFFQyxNQUFNLEVBQXlCO0lBRTdDLDhCQUE4QjtJQUM5QixNQUFNLENBQUNDLFNBQVNDLE1BQU1DLEtBQUssR0FBRyxNQUFNQyxRQUFRQyxHQUFHLENBQUM7UUFDOUNoQix1REFBZ0JBLENBQUNRLEtBQUtDO1FBQ3RCUCxvREFBT0EsQ0FBQztZQUFFZSxRQUFRUDtRQUFXO1FBQzdCVCxrREFBT0EsQ0FBQ1U7S0FDVDtJQUVELDBCQUEwQjtJQUMxQixJQUFJLENBQUNDLFNBQVM7UUFDWixPQUFPO1lBQ0xNLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVk7WUFDZDtRQUNGO0lBQ0Y7SUFFQSxxQ0FBcUM7SUFDckMsTUFBTSxFQUFFQyxNQUFNQyxXQUFXLEVBQUVMLEtBQUssRUFBRSxHQUFHTDtJQUVyQyxJQUFJSyxPQUFPO1FBQ1QsT0FBTztZQUFFQTtRQUFNO0lBQ2pCO0lBRUEsSUFBSSxDQUFDSyxhQUFhO1FBQ2hCLE9BQU87WUFDTEwsT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRjtJQUVBLDhGQUE4RjtJQUM5RixJQUNFLENBQUNmLHlEQUFpQkEsQ0FBQztRQUNqQmtCLGlCQUFpQjtZQUFDMUIsOENBQVVBLENBQUMyQixTQUFTO1NBQUM7UUFDdkNDLG1CQUFtQjtZQUFDM0Isb0RBQWdCQSxDQUFDNEIsSUFBSTtTQUFDO1FBQzFDaEIsUUFBUUMsUUFBUUUsSUFBSSxDQUFDYyxJQUFJLENBQUNDLEVBQUU7UUFDNUJDLFVBQVUsRUFBRTtRQUNaakIsTUFBTVU7SUFDUixJQUNBO1FBQ0EsT0FBTztZQUNMTCxPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGO0lBRUEsOEJBQThCO0lBQzlCLElBQUksQ0FBQ1AsTUFBTTtRQUNULE9BQU87WUFDTEksT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRjtJQUVBLG9EQUFvRDtJQUNwRCxJQUFJaEIsMkRBQW1CQSxDQUFDO1FBQUVRLE1BQU1VO1FBQWFaLFFBQVFBO0lBQU8sSUFBSTtRQUM5RCxPQUFPO1lBQ0xPLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVksQ0FBQyxLQUFLLEVBQUVWLE9BQU8sMkNBQTJDLENBQUM7WUFDekU7UUFDRjtJQUNGO0lBRUEsa0ZBQWtGO0lBQ2xGLE1BQU1vQixnQkFBZ0I7UUFDcEIsQ0FBQ3BCLE9BQU8sRUFBRTtJQUNaO0lBRUEsNkNBQTZDO0lBQzdDLE1BQU0sRUFBRVcsTUFBTVUsV0FBVyxFQUFFZCxPQUFPZSxlQUFlLEVBQUUsR0FBRyxNQUFNOUIsdURBQVVBLENBQUM7UUFDckVjLFFBQVFQO1FBQ1JxQixlQUFlQTtJQUNqQjtJQUVBLElBQUlFLGlCQUFpQjtRQUNuQixPQUFPO1lBQUVmLE9BQU9lO1FBQWdCO0lBQ2xDO0lBRUEsSUFBSSxDQUFDRCxhQUFhO1FBQ2hCLE9BQU87WUFDTGQsT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRjtJQUVBLE1BQU1hLFNBQXlCLE1BQU05QiwwREFBa0JBLENBQ3JENEIsYUFDQXBCLFFBQVFFLElBQUksQ0FBQ2MsSUFBSSxDQUFDQyxFQUFFO0lBRXRCLE9BQU87UUFBRVAsTUFBTVk7SUFBTztBQUN4QiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvZG9jdW1lbnRzL3JlbW92ZVVzZXJBY2Nlc3MudHM/N2JmMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0IH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCB7XG4gIERvY3VtZW50VXNlcixcbiAgRmV0Y2hBcGlSZXN1bHQsXG4gIFJlbW92ZVVzZXJBY2Nlc3NQcm9wcyxcbiAgUm9vbUFjY2VzcyxcbiAgUm9vbUFjY2Vzc0xldmVscyxcbn0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSBcIi4uL2F1dGhcIjtcbmltcG9ydCB7IGdldFVzZXIgfSBmcm9tIFwiLi4vZGF0YWJhc2VcIjtcbmltcG9ydCB7IGdldFJvb20sIHVwZGF0ZVJvb20gfSBmcm9tIFwiLi4vbGl2ZWJsb2Nrc1wiO1xuaW1wb3J0IHtcbiAgYnVpbGREb2N1bWVudFVzZXJzLFxuICBpc1VzZXJEb2N1bWVudE93bmVyLFxuICB1c2VyQWxsb3dlZEluUm9vbSxcbn0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbi8qKlxuICogUmVtb3ZlIGEgY29sbGFib3JhdG9yIGZyb20gYSBkb2N1bWVudFxuICogT25seSBhbGxvdyBpZiBhdXRob3JpemVkIHdpdGggTmV4dEF1dGggYW5kIGlzIGFkZGVkIGFzIGEgdXNlcklkIG9uIHVzZXJzQWNjZXNzZXNcbiAqIERvIG5vdCBhbGxvdyBpZiBwdWJsaWMgYWNjZXNzLCBvciBhY2Nlc3MgZ3JhbnRlZCB0aHJvdWdoIGdyb3VwSWRzXG4gKlxuICogQHBhcmFtIHJlcVxuICogQHBhcmFtIHJlc1xuICogQHBhcmFtIGRvY3VtZW50SWQgLSBUaGUgZG9jdW1lbnQncyBpZFxuICogQHBhcmFtIHVzZXJJZCAtIFRoZSByZW1vdmVkIHVzZXIncyBpZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVtb3ZlVXNlckFjY2VzcyhcbiAgcmVxOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVxXCJdLFxuICByZXM6IEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHRbXCJyZXNcIl0sXG4gIHsgZG9jdW1lbnRJZCwgdXNlcklkIH06IFJlbW92ZVVzZXJBY2Nlc3NQcm9wc1xuKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDxEb2N1bWVudFVzZXJbXT4+IHtcbiAgLy8gR2V0IHNlc3Npb24sIHJvb20sIGFuZCB1c2VyXG4gIGNvbnN0IFtzZXNzaW9uLCByb29tLCB1c2VyXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBnZXRTZXJ2ZXJTZXNzaW9uKHJlcSwgcmVzKSxcbiAgICBnZXRSb29tKHsgcm9vbUlkOiBkb2N1bWVudElkIH0pLFxuICAgIGdldFVzZXIodXNlcklkKSxcbiAgXSk7XG5cbiAgLy8gQ2hlY2sgdXNlciBpcyBsb2dnZWQgaW5cbiAgaWYgKCFzZXNzaW9uKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwMSxcbiAgICAgICAgbWVzc2FnZTogXCJOb3Qgc2lnbmVkIGluXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiU2lnbiBpbiB0byByZW1vdmUgYSB1c2VyXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBDaGVjayB0aGUgcm9vbSBgZG9jdW1lbnRJZGAgZXhpc3RzXG4gIGNvbnN0IHsgZGF0YTogY3VycmVudFJvb20sIGVycm9yIH0gPSByb29tO1xuXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiB7IGVycm9yIH07XG4gIH1cblxuICBpZiAoIWN1cnJlbnRSb29tKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwNCxcbiAgICAgICAgbWVzc2FnZTogXCJSb29tIG5vdCBmb3VuZFwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIkNoZWNrIHRoYXQgeW91J3JlIG9uIHRoZSBjb3JyZWN0IHBhZ2VcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIENoZWNrIGN1cnJlbnQgbG9nZ2VkLWluIHVzZXIgaXMgc2V0IGFzIGEgdXNlciB3aXRoIGlkLCBpZ25vcmluZyBncm91cElkcyBhbmQgZGVmYXVsdCBhY2Nlc3NcbiAgaWYgKFxuICAgICF1c2VyQWxsb3dlZEluUm9vbSh7XG4gICAgICBhY2Nlc3Nlc0FsbG93ZWQ6IFtSb29tQWNjZXNzLlJvb21Xcml0ZV0sXG4gICAgICBjaGVja0FjY2Vzc0xldmVsczogW1Jvb21BY2Nlc3NMZXZlbHMuVVNFUl0sXG4gICAgICB1c2VySWQ6IHNlc3Npb24udXNlci5pbmZvLmlkLFxuICAgICAgZ3JvdXBJZHM6IFtdLFxuICAgICAgcm9vbTogY3VycmVudFJvb20sXG4gICAgfSlcbiAgKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwMyxcbiAgICAgICAgbWVzc2FnZTogXCJOb3QgYWxsb3dlZCBhY2Nlc3NcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJDaGVjayB0aGF0IHlvdSd2ZSBiZWVuIGdpdmVuIHBlcm1pc3Npb24gdG8gdGhlIGRvY3VtZW50XCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBDaGVjayB1c2VyIGV4aXN0cyBpbiBzeXN0ZW1cbiAgaWYgKCF1c2VyKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwMCxcbiAgICAgICAgbWVzc2FnZTogXCJVc2VyIG5vdCBmb3VuZFwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIkNoZWNrIHRoYXQgeW91J3ZlIHVzZWQgdGhlIGNvcnJlY3QgdXNlciBpZFwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gSWYgdXNlciBleGlzdHMsIGNoZWNrIHRoYXQgdGhleSBhcmUgbm90IHRoZSBvd25lclxuICBpZiAoaXNVc2VyRG9jdW1lbnRPd25lcih7IHJvb206IGN1cnJlbnRSb29tLCB1c2VySWQ6IHVzZXJJZCB9KSkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDAsXG4gICAgICAgIG1lc3NhZ2U6IFwiVXNlciBpcyBvd25lclwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBgVXNlciAke3VzZXJJZH0gaXMgdGhlIGRvY3VtZW50IG93bmVyIGFuZCBjYW5ub3QgYmUgZWRpdGVkYCxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIElmIHJvb20gZXhpc3RzLCBjcmVhdGUgdXNlckFjY2VzcyBlbGVtZW50IGZvciByZW1vdmluZyB0aGUgY3VycmVudCBjb2xsYWJvcmF0b3JcbiAgY29uc3QgdXNlcnNBY2Nlc3NlcyA9IHtcbiAgICBbdXNlcklkXTogbnVsbCxcbiAgfTtcblxuICAvLyBVcGRhdGUgdGhlIHJvb20gd2l0aCB0aGUgbmV3IGNvbGxhYm9yYXRvcnNcbiAgY29uc3QgeyBkYXRhOiB1cGRhdGVkUm9vbSwgZXJyb3I6IHVwZGF0ZVJvb21FcnJvciB9ID0gYXdhaXQgdXBkYXRlUm9vbSh7XG4gICAgcm9vbUlkOiBkb2N1bWVudElkLFxuICAgIHVzZXJzQWNjZXNzZXM6IHVzZXJzQWNjZXNzZXMsXG4gIH0pO1xuXG4gIGlmICh1cGRhdGVSb29tRXJyb3IpIHtcbiAgICByZXR1cm4geyBlcnJvcjogdXBkYXRlUm9vbUVycm9yIH07XG4gIH1cblxuICBpZiAoIXVwZGF0ZWRSb29tKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwNCxcbiAgICAgICAgbWVzc2FnZTogXCJVcGRhdGVkIHJvb20gbm90IGZvdW5kXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiQ29udGFjdCBhbiBhZG1pbmlzdHJhdG9yXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBjb25zdCByZXN1bHQ6IERvY3VtZW50VXNlcltdID0gYXdhaXQgYnVpbGREb2N1bWVudFVzZXJzKFxuICAgIHVwZGF0ZWRSb29tLFxuICAgIHNlc3Npb24udXNlci5pbmZvLmlkXG4gICk7XG4gIHJldHVybiB7IGRhdGE6IHJlc3VsdCB9O1xufVxuIl0sIm5hbWVzIjpbIlJvb21BY2Nlc3MiLCJSb29tQWNjZXNzTGV2ZWxzIiwiZ2V0U2VydmVyU2Vzc2lvbiIsImdldFVzZXIiLCJnZXRSb29tIiwidXBkYXRlUm9vbSIsImJ1aWxkRG9jdW1lbnRVc2VycyIsImlzVXNlckRvY3VtZW50T3duZXIiLCJ1c2VyQWxsb3dlZEluUm9vbSIsInJlbW92ZVVzZXJBY2Nlc3MiLCJyZXEiLCJyZXMiLCJkb2N1bWVudElkIiwidXNlcklkIiwic2Vzc2lvbiIsInJvb20iLCJ1c2VyIiwiUHJvbWlzZSIsImFsbCIsInJvb21JZCIsImVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJzdWdnZXN0aW9uIiwiZGF0YSIsImN1cnJlbnRSb29tIiwiYWNjZXNzZXNBbGxvd2VkIiwiUm9vbVdyaXRlIiwiY2hlY2tBY2Nlc3NMZXZlbHMiLCJVU0VSIiwiaW5mbyIsImlkIiwiZ3JvdXBJZHMiLCJ1c2Vyc0FjY2Vzc2VzIiwidXBkYXRlZFJvb20iLCJ1cGRhdGVSb29tRXJyb3IiLCJyZXN1bHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/removeUserAccess.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/updateDefaultAccess.ts":
/*!*****************************************************!*\
  !*** ./lib/server/documents/updateDefaultAccess.ts ***!
  \*****************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateDefaultAccess: () => (/* binding */ updateDefaultAccess)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_1__]);\n_auth__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n/**\n * POST Default access - used in /lib/client/updateDocumentScope.ts\n *\n * Update the default access for a document to public or private\n *\n * @param req\n * @param res\n * @param documentId - The document's id\n * @param access - The new default access: \"public\" or \"private\"\n */ async function updateDefaultAccess(req, res, { documentId, access }) {\n    // Get session and room\n    const [session, room] = await Promise.all([\n        (0,_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(req, res),\n        (0,_liveblocks__WEBPACK_IMPORTED_MODULE_2__.getRoom)({\n            roomId: documentId\n        })\n    ]);\n    // Check user is logged in\n    if (!session) {\n        return {\n            error: {\n                code: 401,\n                message: \"Not signed in\",\n                suggestion: \"Sign in to update public access level\"\n            }\n        };\n    }\n    // Check the room exists\n    const { data, error } = room;\n    if (error) {\n        return {\n            error\n        };\n    }\n    if (!data) {\n        return {\n            error: {\n                code: 404,\n                message: \"Room not found\",\n                suggestion: \"Check that you're on the correct page\"\n            }\n        };\n    }\n    // Check current logged-in user has access to the room\n    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_3__.userAllowedInRoom)({\n        accessesAllowed: [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomWrite\n        ],\n        userId: session.user.info.id,\n        groupIds: session.user.info.groupIds,\n        room: data\n    })) {\n        return {\n            error: {\n                code: 403,\n                message: \"Not allowed access\",\n                suggestion: \"Check that you've been given permission to the room\"\n            }\n        };\n    }\n    // If room exists, create default access parameter for room\n    const defaultAccesses = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.documentAccessToRoomAccesses)(access);\n    // Update the room with the new default access\n    const { data: updatedRoom, error: updateRoomError } = await (0,_liveblocks__WEBPACK_IMPORTED_MODULE_2__.updateRoom)({\n        roomId: documentId,\n        defaultAccesses: defaultAccesses\n    });\n    if (updateRoomError) {\n        return {\n            error: updateRoomError\n        };\n    }\n    if (!updatedRoom) {\n        return {\n            error: {\n                code: 404,\n                message: \"Updated room not found\",\n                suggestion: \"Contact an administrator\"\n            }\n        };\n    }\n    // If successful, covert to custom document format and return\n    const document = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.buildDocument)(updatedRoom);\n    return {\n        data: document\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy91cGRhdGVEZWZhdWx0QWNjZXNzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBTXdCO0FBQ21CO0FBQ1M7QUFLbEM7QUFFbEI7Ozs7Ozs7OztDQVNDLEdBQ00sZUFBZU8sb0JBQ3BCQyxHQUFxQyxFQUNyQ0MsR0FBcUMsRUFDckMsRUFBRUMsVUFBVSxFQUFFQyxNQUFNLEVBQTRCO0lBRWhELHVCQUF1QjtJQUN2QixNQUFNLENBQUNDLFNBQVNDLEtBQUssR0FBRyxNQUFNQyxRQUFRQyxHQUFHLENBQUM7UUFDeENkLHVEQUFnQkEsQ0FBQ08sS0FBS0M7UUFDdEJQLG9EQUFPQSxDQUFDO1lBQUVjLFFBQVFOO1FBQVc7S0FDOUI7SUFFRCwwQkFBMEI7SUFDMUIsSUFBSSxDQUFDRSxTQUFTO1FBQ1osT0FBTztZQUNMSyxPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGO0lBRUEsd0JBQXdCO0lBQ3hCLE1BQU0sRUFBRUMsSUFBSSxFQUFFSixLQUFLLEVBQUUsR0FBR0o7SUFFeEIsSUFBSUksT0FBTztRQUNULE9BQU87WUFBRUE7UUFBTTtJQUNqQjtJQUVBLElBQUksQ0FBQ0ksTUFBTTtRQUNULE9BQU87WUFDTEosT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRjtJQUVBLHNEQUFzRDtJQUN0RCxJQUNFLENBQUNkLHlEQUFpQkEsQ0FBQztRQUNqQmdCLGlCQUFpQjtZQUFDdEIsOENBQVVBLENBQUN1QixTQUFTO1NBQUM7UUFDdkNDLFFBQVFaLFFBQVFhLElBQUksQ0FBQ0MsSUFBSSxDQUFDQyxFQUFFO1FBQzVCQyxVQUFVaEIsUUFBUWEsSUFBSSxDQUFDQyxJQUFJLENBQUNFLFFBQVE7UUFDcENmLE1BQU1RO0lBQ1IsSUFDQTtRQUNBLE9BQU87WUFDTEosT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRjtJQUVBLDJEQUEyRDtJQUMzRCxNQUFNUyxrQkFBa0J4QixvRUFBNEJBLENBQUNNO0lBRXJELDhDQUE4QztJQUM5QyxNQUFNLEVBQUVVLE1BQU1TLFdBQVcsRUFBRWIsT0FBT2MsZUFBZSxFQUFFLEdBQUcsTUFBTTVCLHVEQUFVQSxDQUFDO1FBQ3JFYSxRQUFRTjtRQUNSbUIsaUJBQWlCQTtJQUNuQjtJQUVBLElBQUlFLGlCQUFpQjtRQUNuQixPQUFPO1lBQUVkLE9BQU9jO1FBQWdCO0lBQ2xDO0lBRUEsSUFBSSxDQUFDRCxhQUFhO1FBQ2hCLE9BQU87WUFDTGIsT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRjtJQUVBLDZEQUE2RDtJQUM3RCxNQUFNWSxXQUFxQjVCLHFEQUFhQSxDQUFDMEI7SUFDekMsT0FBTztRQUFFVCxNQUFNVztJQUFTO0FBQzFCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9kb2N1bWVudHMvdXBkYXRlRGVmYXVsdEFjY2Vzcy50cz9jZTcxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHQgfSBmcm9tIFwibmV4dFwiO1xuaW1wb3J0IHtcbiAgRG9jdW1lbnQsXG4gIEZldGNoQXBpUmVzdWx0LFxuICBSb29tQWNjZXNzLFxuICBVcGRhdGVEZWZhdWx0QWNjZXNzUHJvcHMsXG59IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gXCIuLi9hdXRoXCI7XG5pbXBvcnQgeyBnZXRSb29tLCB1cGRhdGVSb29tIH0gZnJvbSBcIi4uL2xpdmVibG9ja3NcIjtcbmltcG9ydCB7XG4gIGJ1aWxkRG9jdW1lbnQsXG4gIGRvY3VtZW50QWNjZXNzVG9Sb29tQWNjZXNzZXMsXG4gIHVzZXJBbGxvd2VkSW5Sb29tLFxufSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuLyoqXG4gKiBQT1NUIERlZmF1bHQgYWNjZXNzIC0gdXNlZCBpbiAvbGliL2NsaWVudC91cGRhdGVEb2N1bWVudFNjb3BlLnRzXG4gKlxuICogVXBkYXRlIHRoZSBkZWZhdWx0IGFjY2VzcyBmb3IgYSBkb2N1bWVudCB0byBwdWJsaWMgb3IgcHJpdmF0ZVxuICpcbiAqIEBwYXJhbSByZXFcbiAqIEBwYXJhbSByZXNcbiAqIEBwYXJhbSBkb2N1bWVudElkIC0gVGhlIGRvY3VtZW50J3MgaWRcbiAqIEBwYXJhbSBhY2Nlc3MgLSBUaGUgbmV3IGRlZmF1bHQgYWNjZXNzOiBcInB1YmxpY1wiIG9yIFwicHJpdmF0ZVwiXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVEZWZhdWx0QWNjZXNzKFxuICByZXE6IEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHRbXCJyZXFcIl0sXG4gIHJlczogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlc1wiXSxcbiAgeyBkb2N1bWVudElkLCBhY2Nlc3MgfTogVXBkYXRlRGVmYXVsdEFjY2Vzc1Byb3BzXG4pOiBQcm9taXNlPEZldGNoQXBpUmVzdWx0PERvY3VtZW50Pj4ge1xuICAvLyBHZXQgc2Vzc2lvbiBhbmQgcm9vbVxuICBjb25zdCBbc2Vzc2lvbiwgcm9vbV0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgZ2V0U2VydmVyU2Vzc2lvbihyZXEsIHJlcyksXG4gICAgZ2V0Um9vbSh7IHJvb21JZDogZG9jdW1lbnRJZCB9KSxcbiAgXSk7XG5cbiAgLy8gQ2hlY2sgdXNlciBpcyBsb2dnZWQgaW5cbiAgaWYgKCFzZXNzaW9uKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwMSxcbiAgICAgICAgbWVzc2FnZTogXCJOb3Qgc2lnbmVkIGluXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiU2lnbiBpbiB0byB1cGRhdGUgcHVibGljIGFjY2VzcyBsZXZlbFwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gQ2hlY2sgdGhlIHJvb20gZXhpc3RzXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IHJvb207XG5cbiAgaWYgKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgfVxuXG4gIGlmICghZGF0YSkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDQsXG4gICAgICAgIG1lc3NhZ2U6IFwiUm9vbSBub3QgZm91bmRcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJDaGVjayB0aGF0IHlvdSdyZSBvbiB0aGUgY29ycmVjdCBwYWdlXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBDaGVjayBjdXJyZW50IGxvZ2dlZC1pbiB1c2VyIGhhcyBhY2Nlc3MgdG8gdGhlIHJvb21cbiAgaWYgKFxuICAgICF1c2VyQWxsb3dlZEluUm9vbSh7XG4gICAgICBhY2Nlc3Nlc0FsbG93ZWQ6IFtSb29tQWNjZXNzLlJvb21Xcml0ZV0sXG4gICAgICB1c2VySWQ6IHNlc3Npb24udXNlci5pbmZvLmlkLFxuICAgICAgZ3JvdXBJZHM6IHNlc3Npb24udXNlci5pbmZvLmdyb3VwSWRzLFxuICAgICAgcm9vbTogZGF0YSxcbiAgICB9KVxuICApIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDAzLFxuICAgICAgICBtZXNzYWdlOiBcIk5vdCBhbGxvd2VkIGFjY2Vzc1wiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIkNoZWNrIHRoYXQgeW91J3ZlIGJlZW4gZ2l2ZW4gcGVybWlzc2lvbiB0byB0aGUgcm9vbVwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gSWYgcm9vbSBleGlzdHMsIGNyZWF0ZSBkZWZhdWx0IGFjY2VzcyBwYXJhbWV0ZXIgZm9yIHJvb21cbiAgY29uc3QgZGVmYXVsdEFjY2Vzc2VzID0gZG9jdW1lbnRBY2Nlc3NUb1Jvb21BY2Nlc3NlcyhhY2Nlc3MpO1xuXG4gIC8vIFVwZGF0ZSB0aGUgcm9vbSB3aXRoIHRoZSBuZXcgZGVmYXVsdCBhY2Nlc3NcbiAgY29uc3QgeyBkYXRhOiB1cGRhdGVkUm9vbSwgZXJyb3I6IHVwZGF0ZVJvb21FcnJvciB9ID0gYXdhaXQgdXBkYXRlUm9vbSh7XG4gICAgcm9vbUlkOiBkb2N1bWVudElkLFxuICAgIGRlZmF1bHRBY2Nlc3NlczogZGVmYXVsdEFjY2Vzc2VzLFxuICB9KTtcblxuICBpZiAodXBkYXRlUm9vbUVycm9yKSB7XG4gICAgcmV0dXJuIHsgZXJyb3I6IHVwZGF0ZVJvb21FcnJvciB9O1xuICB9XG5cbiAgaWYgKCF1cGRhdGVkUm9vbSkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDQsXG4gICAgICAgIG1lc3NhZ2U6IFwiVXBkYXRlZCByb29tIG5vdCBmb3VuZFwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIkNvbnRhY3QgYW4gYWRtaW5pc3RyYXRvclwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gSWYgc3VjY2Vzc2Z1bCwgY292ZXJ0IHRvIGN1c3RvbSBkb2N1bWVudCBmb3JtYXQgYW5kIHJldHVyblxuICBjb25zdCBkb2N1bWVudDogRG9jdW1lbnQgPSBidWlsZERvY3VtZW50KHVwZGF0ZWRSb29tKTtcbiAgcmV0dXJuIHsgZGF0YTogZG9jdW1lbnQgfTtcbn1cbiJdLCJuYW1lcyI6WyJSb29tQWNjZXNzIiwiZ2V0U2VydmVyU2Vzc2lvbiIsImdldFJvb20iLCJ1cGRhdGVSb29tIiwiYnVpbGREb2N1bWVudCIsImRvY3VtZW50QWNjZXNzVG9Sb29tQWNjZXNzZXMiLCJ1c2VyQWxsb3dlZEluUm9vbSIsInVwZGF0ZURlZmF1bHRBY2Nlc3MiLCJyZXEiLCJyZXMiLCJkb2N1bWVudElkIiwiYWNjZXNzIiwic2Vzc2lvbiIsInJvb20iLCJQcm9taXNlIiwiYWxsIiwicm9vbUlkIiwiZXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsInN1Z2dlc3Rpb24iLCJkYXRhIiwiYWNjZXNzZXNBbGxvd2VkIiwiUm9vbVdyaXRlIiwidXNlcklkIiwidXNlciIsImluZm8iLCJpZCIsImdyb3VwSWRzIiwiZGVmYXVsdEFjY2Vzc2VzIiwidXBkYXRlZFJvb20iLCJ1cGRhdGVSb29tRXJyb3IiLCJkb2N1bWVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/updateDefaultAccess.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/updateDocument.ts":
/*!************************************************!*\
  !*** ./lib/server/documents/updateDocument.ts ***!
  \************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateDocument: () => (/* binding */ updateDocument)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_1__]);\n_auth__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n/**\n * Update a document with new data\n * Only allow if user has access to room (including logged-out users and public rooms).\n * Do not allow if public access, or access granted through groupIds\n *\n * @param req\n * @param res\n * @param documentId - The document id\n * @param documentData - Data to update in the document\n */ async function updateDocument(req, res, { documentId, documentData }) {\n    // Get session and room\n    const [session, room] = await Promise.all([\n        (0,_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(req, res),\n        (0,_liveblocks__WEBPACK_IMPORTED_MODULE_2__.getRoom)({\n            roomId: documentId\n        })\n    ]);\n    // Check user is logged in\n    if (!session) {\n        return {\n            error: {\n                code: 401,\n                message: \"Not signed in\",\n                suggestion: \"Sign in to get rooms information\"\n            }\n        };\n    }\n    // Get the room to update\n    const { data, error } = room;\n    if (error) {\n        return {\n            error\n        };\n    }\n    if (!data) {\n        return {\n            error: {\n                code: 404,\n                message: \"Room not found\",\n                suggestion: \"Check that you're on the correct page\"\n            }\n        };\n    }\n    // Check current logged-in user has access to the room\n    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_3__.userAllowedInRoom)({\n        accessesAllowed: [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomWrite\n        ],\n        userId: session.user.info.id,\n        groupIds: session.user.info.groupIds,\n        room: data\n    })) {\n        return {\n            error: {\n                code: 403,\n                message: \"Not allowed access\",\n                suggestion: \"Check that you've been given permission to the document\"\n            }\n        };\n    }\n    // If successful, update room with new data\n    const { data: updatedRoomData, error: updatedRoomError } = await (0,_liveblocks__WEBPACK_IMPORTED_MODULE_2__.updateRoom)({\n        ...documentData,\n        roomId: documentId\n    });\n    if (updatedRoomError) {\n        return {\n            error: updatedRoomError\n        };\n    }\n    if (!updatedRoomData) {\n        return {\n            error: {\n                code: 404,\n                message: \"Updated room not found\",\n                suggestion: \"Contact an administrator\"\n            }\n        };\n    }\n    // If update successful, convert to custom document format and return\n    const document = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.buildDocument)(updatedRoomData);\n    return {\n        data: document\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy91cGRhdGVEb2N1bWVudC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQU13QjtBQUNtQjtBQUNTO0FBQ1E7QUFFNUQ7Ozs7Ozs7OztDQVNDLEdBQ00sZUFBZU0sZUFDcEJDLEdBQXFDLEVBQ3JDQyxHQUFxQyxFQUNyQyxFQUFFQyxVQUFVLEVBQUVDLFlBQVksRUFBdUI7SUFFakQsdUJBQXVCO0lBQ3ZCLE1BQU0sQ0FBQ0MsU0FBU0MsS0FBSyxHQUFHLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztRQUN4Q2IsdURBQWdCQSxDQUFDTSxLQUFLQztRQUN0Qk4sb0RBQU9BLENBQUM7WUFBRWEsUUFBUU47UUFBVztLQUM5QjtJQUVELDBCQUEwQjtJQUMxQixJQUFJLENBQUNFLFNBQVM7UUFDWixPQUFPO1lBQ0xLLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVk7WUFDZDtRQUNGO0lBQ0Y7SUFFQSx5QkFBeUI7SUFDekIsTUFBTSxFQUFFQyxJQUFJLEVBQUVKLEtBQUssRUFBRSxHQUFHSjtJQUV4QixJQUFJSSxPQUFPO1FBQ1QsT0FBTztZQUFFQTtRQUFNO0lBQ2pCO0lBRUEsSUFBSSxDQUFDSSxNQUFNO1FBQ1QsT0FBTztZQUNMSixPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGO0lBRUEsc0RBQXNEO0lBQ3RELElBQ0UsQ0FBQ2QseURBQWlCQSxDQUFDO1FBQ2pCZ0IsaUJBQWlCO1lBQUNyQiw4Q0FBVUEsQ0FBQ3NCLFNBQVM7U0FBQztRQUN2Q0MsUUFBUVosUUFBUWEsSUFBSSxDQUFDQyxJQUFJLENBQUNDLEVBQUU7UUFDNUJDLFVBQVVoQixRQUFRYSxJQUFJLENBQUNDLElBQUksQ0FBQ0UsUUFBUTtRQUNwQ2YsTUFBTVE7SUFDUixJQUNBO1FBQ0EsT0FBTztZQUNMSixPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGO0lBRUEsMkNBQTJDO0lBQzNDLE1BQU0sRUFBRUMsTUFBTVEsZUFBZSxFQUFFWixPQUFPYSxnQkFBZ0IsRUFBRSxHQUFHLE1BQU0xQix1REFBVUEsQ0FBQztRQUMxRSxHQUFHTyxZQUFZO1FBQ2ZLLFFBQVFOO0lBQ1Y7SUFFQSxJQUFJb0Isa0JBQWtCO1FBQ3BCLE9BQU87WUFBRWIsT0FBT2E7UUFBaUI7SUFDbkM7SUFFQSxJQUFJLENBQUNELGlCQUFpQjtRQUNwQixPQUFPO1lBQ0xaLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVk7WUFDZDtRQUNGO0lBQ0Y7SUFFQSxxRUFBcUU7SUFDckUsTUFBTVcsV0FBcUIxQixxREFBYUEsQ0FBQ3dCO0lBQ3pDLE9BQU87UUFBRVIsTUFBTVU7SUFBUztBQUMxQiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvZG9jdW1lbnRzL3VwZGF0ZURvY3VtZW50LnRzP2RkNzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dCB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQge1xuICBEb2N1bWVudCxcbiAgRmV0Y2hBcGlSZXN1bHQsXG4gIFJvb21BY2Nlc3MsXG4gIFVwZGF0ZURvY3VtZW50UHJvcHMsXG59IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gXCIuLi9hdXRoXCI7XG5pbXBvcnQgeyBnZXRSb29tLCB1cGRhdGVSb29tIH0gZnJvbSBcIi4uL2xpdmVibG9ja3NcIjtcbmltcG9ydCB7IGJ1aWxkRG9jdW1lbnQsIHVzZXJBbGxvd2VkSW5Sb29tIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbi8qKlxuICogVXBkYXRlIGEgZG9jdW1lbnQgd2l0aCBuZXcgZGF0YVxuICogT25seSBhbGxvdyBpZiB1c2VyIGhhcyBhY2Nlc3MgdG8gcm9vbSAoaW5jbHVkaW5nIGxvZ2dlZC1vdXQgdXNlcnMgYW5kIHB1YmxpYyByb29tcykuXG4gKiBEbyBub3QgYWxsb3cgaWYgcHVibGljIGFjY2Vzcywgb3IgYWNjZXNzIGdyYW50ZWQgdGhyb3VnaCBncm91cElkc1xuICpcbiAqIEBwYXJhbSByZXFcbiAqIEBwYXJhbSByZXNcbiAqIEBwYXJhbSBkb2N1bWVudElkIC0gVGhlIGRvY3VtZW50IGlkXG4gKiBAcGFyYW0gZG9jdW1lbnREYXRhIC0gRGF0YSB0byB1cGRhdGUgaW4gdGhlIGRvY3VtZW50XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVEb2N1bWVudChcbiAgcmVxOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVxXCJdLFxuICByZXM6IEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHRbXCJyZXNcIl0sXG4gIHsgZG9jdW1lbnRJZCwgZG9jdW1lbnREYXRhIH06IFVwZGF0ZURvY3VtZW50UHJvcHNcbik6IFByb21pc2U8RmV0Y2hBcGlSZXN1bHQ8RG9jdW1lbnQ+PiB7XG4gIC8vIEdldCBzZXNzaW9uIGFuZCByb29tXG4gIGNvbnN0IFtzZXNzaW9uLCByb29tXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBnZXRTZXJ2ZXJTZXNzaW9uKHJlcSwgcmVzKSxcbiAgICBnZXRSb29tKHsgcm9vbUlkOiBkb2N1bWVudElkIH0pLFxuICBdKTtcblxuICAvLyBDaGVjayB1c2VyIGlzIGxvZ2dlZCBpblxuICBpZiAoIXNlc3Npb24pIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDAxLFxuICAgICAgICBtZXNzYWdlOiBcIk5vdCBzaWduZWQgaW5cIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJTaWduIGluIHRvIGdldCByb29tcyBpbmZvcm1hdGlvblwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gR2V0IHRoZSByb29tIHRvIHVwZGF0ZVxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSByb29tO1xuXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiB7IGVycm9yIH07XG4gIH1cblxuICBpZiAoIWRhdGEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDA0LFxuICAgICAgICBtZXNzYWdlOiBcIlJvb20gbm90IGZvdW5kXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiQ2hlY2sgdGhhdCB5b3UncmUgb24gdGhlIGNvcnJlY3QgcGFnZVwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gQ2hlY2sgY3VycmVudCBsb2dnZWQtaW4gdXNlciBoYXMgYWNjZXNzIHRvIHRoZSByb29tXG4gIGlmIChcbiAgICAhdXNlckFsbG93ZWRJblJvb20oe1xuICAgICAgYWNjZXNzZXNBbGxvd2VkOiBbUm9vbUFjY2Vzcy5Sb29tV3JpdGVdLFxuICAgICAgdXNlcklkOiBzZXNzaW9uLnVzZXIuaW5mby5pZCxcbiAgICAgIGdyb3VwSWRzOiBzZXNzaW9uLnVzZXIuaW5mby5ncm91cElkcyxcbiAgICAgIHJvb206IGRhdGEsXG4gICAgfSlcbiAgKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwMyxcbiAgICAgICAgbWVzc2FnZTogXCJOb3QgYWxsb3dlZCBhY2Nlc3NcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJDaGVjayB0aGF0IHlvdSd2ZSBiZWVuIGdpdmVuIHBlcm1pc3Npb24gdG8gdGhlIGRvY3VtZW50XCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBJZiBzdWNjZXNzZnVsLCB1cGRhdGUgcm9vbSB3aXRoIG5ldyBkYXRhXG4gIGNvbnN0IHsgZGF0YTogdXBkYXRlZFJvb21EYXRhLCBlcnJvcjogdXBkYXRlZFJvb21FcnJvciB9ID0gYXdhaXQgdXBkYXRlUm9vbSh7XG4gICAgLi4uZG9jdW1lbnREYXRhLFxuICAgIHJvb21JZDogZG9jdW1lbnRJZCxcbiAgfSk7XG5cbiAgaWYgKHVwZGF0ZWRSb29tRXJyb3IpIHtcbiAgICByZXR1cm4geyBlcnJvcjogdXBkYXRlZFJvb21FcnJvciB9O1xuICB9XG5cbiAgaWYgKCF1cGRhdGVkUm9vbURhdGEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDA0LFxuICAgICAgICBtZXNzYWdlOiBcIlVwZGF0ZWQgcm9vbSBub3QgZm91bmRcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJDb250YWN0IGFuIGFkbWluaXN0cmF0b3JcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIElmIHVwZGF0ZSBzdWNjZXNzZnVsLCBjb252ZXJ0IHRvIGN1c3RvbSBkb2N1bWVudCBmb3JtYXQgYW5kIHJldHVyblxuICBjb25zdCBkb2N1bWVudDogRG9jdW1lbnQgPSBidWlsZERvY3VtZW50KHVwZGF0ZWRSb29tRGF0YSk7XG4gIHJldHVybiB7IGRhdGE6IGRvY3VtZW50IH07XG59XG4iXSwibmFtZXMiOlsiUm9vbUFjY2VzcyIsImdldFNlcnZlclNlc3Npb24iLCJnZXRSb29tIiwidXBkYXRlUm9vbSIsImJ1aWxkRG9jdW1lbnQiLCJ1c2VyQWxsb3dlZEluUm9vbSIsInVwZGF0ZURvY3VtZW50IiwicmVxIiwicmVzIiwiZG9jdW1lbnRJZCIsImRvY3VtZW50RGF0YSIsInNlc3Npb24iLCJyb29tIiwiUHJvbWlzZSIsImFsbCIsInJvb21JZCIsImVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJzdWdnZXN0aW9uIiwiZGF0YSIsImFjY2Vzc2VzQWxsb3dlZCIsIlJvb21Xcml0ZSIsInVzZXJJZCIsInVzZXIiLCJpbmZvIiwiaWQiLCJncm91cElkcyIsInVwZGF0ZWRSb29tRGF0YSIsInVwZGF0ZWRSb29tRXJyb3IiLCJkb2N1bWVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/updateDocument.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/updateGroupAccess.ts":
/*!***************************************************!*\
  !*** ./lib/server/documents/updateGroupAccess.ts ***!
  \***************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateGroupAccess: () => (/* binding */ updateGroupAccess)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _database__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../database */ \"(api)/./lib/server/database/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_1__]);\n_auth__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n/**\n * Add a new group to a document, or edit an old group's permissions\n * Only allow if authorized with NextAuth and if user is added as a userId on usersAccesses\n * Do not allow if public access, or access granted through groupIds\n *\n * @param req\n * @param res\n * @param documentId - The document's id\n * @param groupId - The edit group's id\n * @param access - The invited user's new document access\n */ async function updateGroupAccess(req, res, { documentId, groupId, access }) {\n    // Get session and room\n    const [session, room, group] = await Promise.all([\n        (0,_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(req, res),\n        (0,_liveblocks__WEBPACK_IMPORTED_MODULE_3__.getRoom)({\n            roomId: documentId\n        }),\n        (0,_database__WEBPACK_IMPORTED_MODULE_2__.getGroup)(groupId)\n    ]);\n    // Check user is logged in\n    if (!session) {\n        return {\n            error: {\n                code: 401,\n                message: \"Not signed in\",\n                suggestion: \"Sign in to update groups\"\n            }\n        };\n    }\n    // Check the room `documentId` exists\n    const { data, error } = room;\n    if (error) {\n        return {\n            error\n        };\n    }\n    if (!data) {\n        return {\n            error: {\n                code: 404,\n                message: \"Room not found\",\n                suggestion: \"Check that you're on the correct page\"\n            }\n        };\n    }\n    // Check current logged-in user has edit access to the room\n    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_4__.userAllowedInRoom)({\n        accessesAllowed: [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomWrite\n        ],\n        checkAccessLevels: [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccessLevels.USER\n        ],\n        userId: session.user.info.id,\n        groupIds: session.user.info.groupIds,\n        room: data\n    })) {\n        return {\n            error: {\n                code: 403,\n                message: \"Not allowed access\",\n                suggestion: \"Check that you've been given permission to the room\"\n            }\n        };\n    }\n    // Check group exists in system\n    if (!group) {\n        return {\n            error: {\n                code: 400,\n                message: \"Group does not exist\",\n                suggestion: `Check that that group ${groupId} exists in the system`\n            }\n        };\n    }\n    // If room exists, create userAccesses element for new collaborator with passed access level\n    const groupsAccesses = {\n        [groupId]: (0,_utils__WEBPACK_IMPORTED_MODULE_4__.documentAccessToRoomAccesses)(access)\n    };\n    // If draft and adding a group, remove drafts group\n    const draftGroupId = (0,_utils__WEBPACK_IMPORTED_MODULE_4__.getDraftsGroupName)(session.user.info.id);\n    if (groupId !== draftGroupId && draftGroupId in data.groupsAccesses) {\n        groupsAccesses[draftGroupId] = null;\n    }\n    // Update the room with the new collaborators\n    const { data: updatedRoom, error: updateRoomError } = await (0,_liveblocks__WEBPACK_IMPORTED_MODULE_3__.updateRoom)({\n        roomId: documentId,\n        groupsAccesses: groupsAccesses\n    });\n    if (updateRoomError) {\n        return {\n            error: updateRoomError\n        };\n    }\n    if (!updatedRoom) {\n        return {\n            error: {\n                code: 404,\n                message: \"Updated room not found\",\n                suggestion: \"Contact an administrator\"\n            }\n        };\n    }\n    // If successful, convert room to a list of groups and send\n    const result = await (0,_utils__WEBPACK_IMPORTED_MODULE_4__.buildDocumentGroups)(updatedRoom);\n    return {\n        data: result\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy91cGRhdGVHcm91cEFjY2Vzcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFRd0I7QUFDbUI7QUFDSjtBQUNhO0FBTWxDO0FBRWxCOzs7Ozs7Ozs7O0NBVUMsR0FDTSxlQUFlVSxrQkFDcEJDLEdBQXFDLEVBQ3JDQyxHQUFxQyxFQUNyQyxFQUFFQyxVQUFVLEVBQUVDLE9BQU8sRUFBRUMsTUFBTSxFQUEwQjtJQUV2RCx1QkFBdUI7SUFDdkIsTUFBTSxDQUFDQyxTQUFTQyxNQUFNQyxNQUFNLEdBQUcsTUFBTUMsUUFBUUMsR0FBRyxDQUFDO1FBQy9DbEIsdURBQWdCQSxDQUFDUyxLQUFLQztRQUN0QlIsb0RBQU9BLENBQUM7WUFBRWlCLFFBQVFSO1FBQVc7UUFDN0JWLG1EQUFRQSxDQUFDVztLQUNWO0lBRUQsMEJBQTBCO0lBQzFCLElBQUksQ0FBQ0UsU0FBUztRQUNaLE9BQU87WUFDTE0sT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRjtJQUVBLHFDQUFxQztJQUNyQyxNQUFNLEVBQUVDLElBQUksRUFBRUosS0FBSyxFQUFFLEdBQUdMO0lBRXhCLElBQUlLLE9BQU87UUFDVCxPQUFPO1lBQUVBO1FBQU07SUFDakI7SUFFQSxJQUFJLENBQUNJLE1BQU07UUFDVCxPQUFPO1lBQ0xKLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVk7WUFDZDtRQUNGO0lBQ0Y7SUFFQSwyREFBMkQ7SUFDM0QsSUFDRSxDQUFDaEIseURBQWlCQSxDQUFDO1FBQ2pCa0IsaUJBQWlCO1lBQUMzQiw4Q0FBVUEsQ0FBQzRCLFNBQVM7U0FBQztRQUN2Q0MsbUJBQW1CO1lBQUM1QixvREFBZ0JBLENBQUM2QixJQUFJO1NBQUM7UUFDMUNDLFFBQVFmLFFBQVFnQixJQUFJLENBQUNDLElBQUksQ0FBQ0MsRUFBRTtRQUM1QkMsVUFBVW5CLFFBQVFnQixJQUFJLENBQUNDLElBQUksQ0FBQ0UsUUFBUTtRQUNwQ2xCLE1BQU1TO0lBQ1IsSUFDQTtRQUNBLE9BQU87WUFDTEosT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRjtJQUVBLCtCQUErQjtJQUMvQixJQUFJLENBQUNQLE9BQU87UUFDVixPQUFPO1lBQ0xJLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVksQ0FBQyxzQkFBc0IsRUFBRVgsUUFBUSxxQkFBcUIsQ0FBQztZQUNyRTtRQUNGO0lBQ0Y7SUFFQSw0RkFBNEY7SUFDNUYsTUFBTXNCLGlCQUErQjtRQUNuQyxDQUFDdEIsUUFBUSxFQUFFUCxvRUFBNEJBLENBQUNRO0lBQzFDO0lBRUEsbURBQW1EO0lBQ25ELE1BQU1zQixlQUFlN0IsMERBQWtCQSxDQUFDUSxRQUFRZ0IsSUFBSSxDQUFDQyxJQUFJLENBQUNDLEVBQUU7SUFDNUQsSUFBSXBCLFlBQVl1QixnQkFBZ0JBLGdCQUFnQlgsS0FBS1UsY0FBYyxFQUFFO1FBQ25FQSxjQUFjLENBQUNDLGFBQWEsR0FBRztJQUNqQztJQUVBLDZDQUE2QztJQUM3QyxNQUFNLEVBQUVYLE1BQU1ZLFdBQVcsRUFBRWhCLE9BQU9pQixlQUFlLEVBQUUsR0FBRyxNQUFNbEMsdURBQVVBLENBQUM7UUFDckVnQixRQUFRUjtRQUNSdUIsZ0JBQWdCQTtJQUNsQjtJQUVBLElBQUlHLGlCQUFpQjtRQUNuQixPQUFPO1lBQUVqQixPQUFPaUI7UUFBZ0I7SUFDbEM7SUFFQSxJQUFJLENBQUNELGFBQWE7UUFDaEIsT0FBTztZQUNMaEIsT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRjtJQUVBLDJEQUEyRDtJQUMzRCxNQUFNZSxTQUEwQixNQUFNbEMsMkRBQW1CQSxDQUFDZ0M7SUFDMUQsT0FBTztRQUFFWixNQUFNYztJQUFPO0FBQ3hCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9kb2N1bWVudHMvdXBkYXRlR3JvdXBBY2Nlc3MudHM/NmFhMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0IH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCB7XG4gIERvY3VtZW50R3JvdXAsXG4gIEZldGNoQXBpUmVzdWx0LFxuICBSb29tQWNjZXNzLFxuICBSb29tQWNjZXNzTGV2ZWxzLFxuICBSb29tQWNjZXNzZXMsXG4gIFVwZGF0ZUdyb3VwQWNjZXNzUHJvcHMsXG59IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gXCIuLi9hdXRoXCI7XG5pbXBvcnQgeyBnZXRHcm91cCB9IGZyb20gXCIuLi9kYXRhYmFzZVwiO1xuaW1wb3J0IHsgZ2V0Um9vbSwgdXBkYXRlUm9vbSB9IGZyb20gXCIuLi9saXZlYmxvY2tzXCI7XG5pbXBvcnQge1xuICBidWlsZERvY3VtZW50R3JvdXBzLFxuICBkb2N1bWVudEFjY2Vzc1RvUm9vbUFjY2Vzc2VzLFxuICBnZXREcmFmdHNHcm91cE5hbWUsXG4gIHVzZXJBbGxvd2VkSW5Sb29tLFxufSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuLyoqXG4gKiBBZGQgYSBuZXcgZ3JvdXAgdG8gYSBkb2N1bWVudCwgb3IgZWRpdCBhbiBvbGQgZ3JvdXAncyBwZXJtaXNzaW9uc1xuICogT25seSBhbGxvdyBpZiBhdXRob3JpemVkIHdpdGggTmV4dEF1dGggYW5kIGlmIHVzZXIgaXMgYWRkZWQgYXMgYSB1c2VySWQgb24gdXNlcnNBY2Nlc3Nlc1xuICogRG8gbm90IGFsbG93IGlmIHB1YmxpYyBhY2Nlc3MsIG9yIGFjY2VzcyBncmFudGVkIHRocm91Z2ggZ3JvdXBJZHNcbiAqXG4gKiBAcGFyYW0gcmVxXG4gKiBAcGFyYW0gcmVzXG4gKiBAcGFyYW0gZG9jdW1lbnRJZCAtIFRoZSBkb2N1bWVudCdzIGlkXG4gKiBAcGFyYW0gZ3JvdXBJZCAtIFRoZSBlZGl0IGdyb3VwJ3MgaWRcbiAqIEBwYXJhbSBhY2Nlc3MgLSBUaGUgaW52aXRlZCB1c2VyJ3MgbmV3IGRvY3VtZW50IGFjY2Vzc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlR3JvdXBBY2Nlc3MoXG4gIHJlcTogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlcVwiXSxcbiAgcmVzOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVzXCJdLFxuICB7IGRvY3VtZW50SWQsIGdyb3VwSWQsIGFjY2VzcyB9OiBVcGRhdGVHcm91cEFjY2Vzc1Byb3BzXG4pOiBQcm9taXNlPEZldGNoQXBpUmVzdWx0PERvY3VtZW50R3JvdXBbXT4+IHtcbiAgLy8gR2V0IHNlc3Npb24gYW5kIHJvb21cbiAgY29uc3QgW3Nlc3Npb24sIHJvb20sIGdyb3VwXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBnZXRTZXJ2ZXJTZXNzaW9uKHJlcSwgcmVzKSxcbiAgICBnZXRSb29tKHsgcm9vbUlkOiBkb2N1bWVudElkIH0pLFxuICAgIGdldEdyb3VwKGdyb3VwSWQpLFxuICBdKTtcblxuICAvLyBDaGVjayB1c2VyIGlzIGxvZ2dlZCBpblxuICBpZiAoIXNlc3Npb24pIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDAxLFxuICAgICAgICBtZXNzYWdlOiBcIk5vdCBzaWduZWQgaW5cIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJTaWduIGluIHRvIHVwZGF0ZSBncm91cHNcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIENoZWNrIHRoZSByb29tIGBkb2N1bWVudElkYCBleGlzdHNcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gcm9vbTtcblxuICBpZiAoZXJyb3IpIHtcbiAgICByZXR1cm4geyBlcnJvciB9O1xuICB9XG5cbiAgaWYgKCFkYXRhKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwNCxcbiAgICAgICAgbWVzc2FnZTogXCJSb29tIG5vdCBmb3VuZFwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIkNoZWNrIHRoYXQgeW91J3JlIG9uIHRoZSBjb3JyZWN0IHBhZ2VcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIENoZWNrIGN1cnJlbnQgbG9nZ2VkLWluIHVzZXIgaGFzIGVkaXQgYWNjZXNzIHRvIHRoZSByb29tXG4gIGlmIChcbiAgICAhdXNlckFsbG93ZWRJblJvb20oe1xuICAgICAgYWNjZXNzZXNBbGxvd2VkOiBbUm9vbUFjY2Vzcy5Sb29tV3JpdGVdLFxuICAgICAgY2hlY2tBY2Nlc3NMZXZlbHM6IFtSb29tQWNjZXNzTGV2ZWxzLlVTRVJdLFxuICAgICAgdXNlcklkOiBzZXNzaW9uLnVzZXIuaW5mby5pZCxcbiAgICAgIGdyb3VwSWRzOiBzZXNzaW9uLnVzZXIuaW5mby5ncm91cElkcyxcbiAgICAgIHJvb206IGRhdGEsXG4gICAgfSlcbiAgKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwMyxcbiAgICAgICAgbWVzc2FnZTogXCJOb3QgYWxsb3dlZCBhY2Nlc3NcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJDaGVjayB0aGF0IHlvdSd2ZSBiZWVuIGdpdmVuIHBlcm1pc3Npb24gdG8gdGhlIHJvb21cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIENoZWNrIGdyb3VwIGV4aXN0cyBpbiBzeXN0ZW1cbiAgaWYgKCFncm91cCkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDAsXG4gICAgICAgIG1lc3NhZ2U6IFwiR3JvdXAgZG9lcyBub3QgZXhpc3RcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogYENoZWNrIHRoYXQgdGhhdCBncm91cCAke2dyb3VwSWR9IGV4aXN0cyBpbiB0aGUgc3lzdGVtYCxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIElmIHJvb20gZXhpc3RzLCBjcmVhdGUgdXNlckFjY2Vzc2VzIGVsZW1lbnQgZm9yIG5ldyBjb2xsYWJvcmF0b3Igd2l0aCBwYXNzZWQgYWNjZXNzIGxldmVsXG4gIGNvbnN0IGdyb3Vwc0FjY2Vzc2VzOiBSb29tQWNjZXNzZXMgPSB7XG4gICAgW2dyb3VwSWRdOiBkb2N1bWVudEFjY2Vzc1RvUm9vbUFjY2Vzc2VzKGFjY2VzcyksXG4gIH07XG5cbiAgLy8gSWYgZHJhZnQgYW5kIGFkZGluZyBhIGdyb3VwLCByZW1vdmUgZHJhZnRzIGdyb3VwXG4gIGNvbnN0IGRyYWZ0R3JvdXBJZCA9IGdldERyYWZ0c0dyb3VwTmFtZShzZXNzaW9uLnVzZXIuaW5mby5pZCk7XG4gIGlmIChncm91cElkICE9PSBkcmFmdEdyb3VwSWQgJiYgZHJhZnRHcm91cElkIGluIGRhdGEuZ3JvdXBzQWNjZXNzZXMpIHtcbiAgICBncm91cHNBY2Nlc3Nlc1tkcmFmdEdyb3VwSWRdID0gbnVsbDtcbiAgfVxuXG4gIC8vIFVwZGF0ZSB0aGUgcm9vbSB3aXRoIHRoZSBuZXcgY29sbGFib3JhdG9yc1xuICBjb25zdCB7IGRhdGE6IHVwZGF0ZWRSb29tLCBlcnJvcjogdXBkYXRlUm9vbUVycm9yIH0gPSBhd2FpdCB1cGRhdGVSb29tKHtcbiAgICByb29tSWQ6IGRvY3VtZW50SWQsXG4gICAgZ3JvdXBzQWNjZXNzZXM6IGdyb3Vwc0FjY2Vzc2VzLFxuICB9KTtcblxuICBpZiAodXBkYXRlUm9vbUVycm9yKSB7XG4gICAgcmV0dXJuIHsgZXJyb3I6IHVwZGF0ZVJvb21FcnJvciB9O1xuICB9XG5cbiAgaWYgKCF1cGRhdGVkUm9vbSkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDQsXG4gICAgICAgIG1lc3NhZ2U6IFwiVXBkYXRlZCByb29tIG5vdCBmb3VuZFwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIkNvbnRhY3QgYW4gYWRtaW5pc3RyYXRvclwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gSWYgc3VjY2Vzc2Z1bCwgY29udmVydCByb29tIHRvIGEgbGlzdCBvZiBncm91cHMgYW5kIHNlbmRcbiAgY29uc3QgcmVzdWx0OiBEb2N1bWVudEdyb3VwW10gPSBhd2FpdCBidWlsZERvY3VtZW50R3JvdXBzKHVwZGF0ZWRSb29tKTtcbiAgcmV0dXJuIHsgZGF0YTogcmVzdWx0IH07XG59XG4iXSwibmFtZXMiOlsiUm9vbUFjY2VzcyIsIlJvb21BY2Nlc3NMZXZlbHMiLCJnZXRTZXJ2ZXJTZXNzaW9uIiwiZ2V0R3JvdXAiLCJnZXRSb29tIiwidXBkYXRlUm9vbSIsImJ1aWxkRG9jdW1lbnRHcm91cHMiLCJkb2N1bWVudEFjY2Vzc1RvUm9vbUFjY2Vzc2VzIiwiZ2V0RHJhZnRzR3JvdXBOYW1lIiwidXNlckFsbG93ZWRJblJvb20iLCJ1cGRhdGVHcm91cEFjY2VzcyIsInJlcSIsInJlcyIsImRvY3VtZW50SWQiLCJncm91cElkIiwiYWNjZXNzIiwic2Vzc2lvbiIsInJvb20iLCJncm91cCIsIlByb21pc2UiLCJhbGwiLCJyb29tSWQiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwic3VnZ2VzdGlvbiIsImRhdGEiLCJhY2Nlc3Nlc0FsbG93ZWQiLCJSb29tV3JpdGUiLCJjaGVja0FjY2Vzc0xldmVscyIsIlVTRVIiLCJ1c2VySWQiLCJ1c2VyIiwiaW5mbyIsImlkIiwiZ3JvdXBJZHMiLCJncm91cHNBY2Nlc3NlcyIsImRyYWZ0R3JvdXBJZCIsInVwZGF0ZWRSb29tIiwidXBkYXRlUm9vbUVycm9yIiwicmVzdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/updateGroupAccess.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/updateUserAccess.ts":
/*!**************************************************!*\
  !*** ./lib/server/documents/updateUserAccess.ts ***!
  \**************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateUserAccess: () => (/* binding */ updateUserAccess)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../constants */ \"(api)/./constants.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _database__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../database */ \"(api)/./lib/server/database/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony import */ var _notify__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../notify */ \"(api)/./lib/server/notify/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_2__]);\n_auth__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\n/**\n * Add a new collaborator to a document, or edit an old collaborator\n * Only allow if authorized with NextAuth and is added as a userId on usersAccesses\n * Do not allow if public access, or access granted through groupIds\n *\n * @param req\n * @param res\n * @param documentId - The document's id\n * @param userId - The id of the user we're updating\n * @param access - The user's new document access level\n */ async function updateUserAccess(req, res, { documentId, userId, access }) {\n    // Get session, room, and user\n    const [session, room, user] = await Promise.all([\n        (0,_auth__WEBPACK_IMPORTED_MODULE_2__.getServerSession)(req, res),\n        (0,_liveblocks__WEBPACK_IMPORTED_MODULE_4__.getRoom)({\n            roomId: documentId\n        }),\n        (0,_database__WEBPACK_IMPORTED_MODULE_3__.getUser)(userId)\n    ]);\n    // Check user is logged in\n    if (!session) {\n        return {\n            error: {\n                code: 401,\n                message: \"Not signed in\",\n                suggestion: \"Sign in to update document users\"\n            }\n        };\n    }\n    // Check the room `documentId` exists\n    const { data: currentRoom, error } = room;\n    if (error) {\n        return {\n            error\n        };\n    }\n    if (!currentRoom) {\n        return {\n            error: {\n                code: 404,\n                message: \"Room not found\",\n                suggestion: \"Check that you're on the correct page\"\n            }\n        };\n    }\n    // Check current logged-in user has edit access to the room\n    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_6__.userAllowedInRoom)({\n        accessesAllowed: [\n            _types__WEBPACK_IMPORTED_MODULE_1__.RoomAccess.RoomWrite\n        ],\n        checkAccessLevels: [\n            _types__WEBPACK_IMPORTED_MODULE_1__.RoomAccessLevels.USER\n        ],\n        userId: session.user.info.id,\n        groupIds: session.user.info.groupIds,\n        room: currentRoom\n    })) {\n        return {\n            error: {\n                code: 403,\n                message: \"Not allowed access\",\n                suggestion: \"Check that you've been given permission to the document\"\n            }\n        };\n    }\n    // Check user exists in system\n    if (!user) {\n        return {\n            error: {\n                code: 200,\n                message: \"User not found\",\n                suggestion: \"Check that you've used the correct user id\"\n            }\n        };\n    }\n    // If user exists, check that they are not the owner\n    if ((0,_utils__WEBPACK_IMPORTED_MODULE_6__.isUserDocumentOwner)({\n        room: currentRoom,\n        userId: userId\n    })) {\n        return {\n            error: {\n                code: 400,\n                message: \"User is owner\",\n                suggestion: `User ${userId} is the document owner and cannot be edited`\n            }\n        };\n    }\n    // If room exists, create userAccesses element for new collaborator with passed access level\n    const usersAccesses = {\n        [userId]: (0,_utils__WEBPACK_IMPORTED_MODULE_6__.documentAccessToRoomAccesses)(access)\n    };\n    // Update the room with the new collaborators\n    const { data: updatedRoom, error: updateRoomError } = await (0,_liveblocks__WEBPACK_IMPORTED_MODULE_4__.updateRoom)({\n        roomId: documentId,\n        usersAccesses: usersAccesses\n    });\n    if (updateRoomError) {\n        return {\n            error: updateRoomError\n        };\n    }\n    if (!updatedRoom) {\n        return {\n            error: {\n                code: 404,\n                message: \"Updated room not found\",\n                suggestion: \"Contact an administrator\"\n            }\n        };\n    }\n    // Send email to user notifying that they've been added or their permission has been changed\n    const updatedDocument = (0,_utils__WEBPACK_IMPORTED_MODULE_6__.buildDocument)(updatedRoom);\n    const documentUrl = `${req.headers.origin}${(0,_constants__WEBPACK_IMPORTED_MODULE_0__.DOCUMENT_URL)(updatedDocument.type, updatedDocument.id)}`;\n    (0,_notify__WEBPACK_IMPORTED_MODULE_5__.notify)({\n        to: userId,\n        subject: `Permission changed in document ${updatedDocument.name}`,\n        html: `In <a href=\"${documentUrl}\">${updatedDocument.name}</a> your permission level has changed to <strong>${access}</strong>.`\n    });\n    // If update successful, return the new list of collaborators\n    const result = await (0,_utils__WEBPACK_IMPORTED_MODULE_6__.buildDocumentUsers)(updatedRoom, session.user.info.id);\n    return {\n        data: result\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy91cGRhdGVVc2VyQWNjZXNzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQ2tEO0FBUTFCO0FBQ21CO0FBQ0w7QUFDYztBQUNqQjtBQU9qQjtBQUVsQjs7Ozs7Ozs7OztDQVVDLEdBQ00sZUFBZWEsaUJBQ3BCQyxHQUFxQyxFQUNyQ0MsR0FBcUMsRUFDckMsRUFBRUMsVUFBVSxFQUFFQyxNQUFNLEVBQUVDLE1BQU0sRUFBeUI7SUFFckQsOEJBQThCO0lBQzlCLE1BQU0sQ0FBQ0MsU0FBU0MsTUFBTUMsS0FBSyxHQUFHLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztRQUM5Q3BCLHVEQUFnQkEsQ0FBQ1csS0FBS0M7UUFDdEJWLG9EQUFPQSxDQUFDO1lBQUVtQixRQUFRUjtRQUFXO1FBQzdCWixrREFBT0EsQ0FBQ2E7S0FDVDtJQUVELDBCQUEwQjtJQUMxQixJQUFJLENBQUNFLFNBQVM7UUFDWixPQUFPO1lBQ0xNLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVk7WUFDZDtRQUNGO0lBQ0Y7SUFFQSxxQ0FBcUM7SUFDckMsTUFBTSxFQUFFQyxNQUFNQyxXQUFXLEVBQUVMLEtBQUssRUFBRSxHQUFHTDtJQUVyQyxJQUFJSyxPQUFPO1FBQ1QsT0FBTztZQUFFQTtRQUFNO0lBQ2pCO0lBRUEsSUFBSSxDQUFDSyxhQUFhO1FBQ2hCLE9BQU87WUFDTEwsT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRjtJQUVBLDJEQUEyRDtJQUMzRCxJQUNFLENBQUNoQix5REFBaUJBLENBQUM7UUFDakJtQixpQkFBaUI7WUFBQzlCLDhDQUFVQSxDQUFDK0IsU0FBUztTQUFDO1FBQ3ZDQyxtQkFBbUI7WUFBQy9CLG9EQUFnQkEsQ0FBQ2dDLElBQUk7U0FBQztRQUMxQ2pCLFFBQVFFLFFBQVFFLElBQUksQ0FBQ2MsSUFBSSxDQUFDQyxFQUFFO1FBQzVCQyxVQUFVbEIsUUFBUUUsSUFBSSxDQUFDYyxJQUFJLENBQUNFLFFBQVE7UUFDcENqQixNQUFNVTtJQUNSLElBQ0E7UUFDQSxPQUFPO1lBQ0xMLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVk7WUFDZDtRQUNGO0lBQ0Y7SUFFQSw4QkFBOEI7SUFDOUIsSUFBSSxDQUFDUCxNQUFNO1FBQ1QsT0FBTztZQUNMSSxPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGO0lBRUEsb0RBQW9EO0lBQ3BELElBQUlqQiwyREFBbUJBLENBQUM7UUFBRVMsTUFBTVU7UUFBYWIsUUFBUUE7SUFBTyxJQUFJO1FBQzlELE9BQU87WUFDTFEsT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWSxDQUFDLEtBQUssRUFBRVgsT0FBTywyQ0FBMkMsQ0FBQztZQUN6RTtRQUNGO0lBQ0Y7SUFFQSw0RkFBNEY7SUFDNUYsTUFBTXFCLGdCQUFnQjtRQUNwQixDQUFDckIsT0FBTyxFQUFFUCxvRUFBNEJBLENBQUNRO0lBQ3pDO0lBRUEsNkNBQTZDO0lBQzdDLE1BQU0sRUFBRVcsTUFBTVUsV0FBVyxFQUFFZCxPQUFPZSxlQUFlLEVBQUUsR0FBRyxNQUFNbEMsdURBQVVBLENBQUM7UUFDckVrQixRQUFRUjtRQUNSc0IsZUFBZUE7SUFDakI7SUFFQSxJQUFJRSxpQkFBaUI7UUFDbkIsT0FBTztZQUFFZixPQUFPZTtRQUFnQjtJQUNsQztJQUVBLElBQUksQ0FBQ0QsYUFBYTtRQUNoQixPQUFPO1lBQ0xkLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVk7WUFDZDtRQUNGO0lBQ0Y7SUFFQSw0RkFBNEY7SUFDNUYsTUFBTWEsa0JBQTRCakMscURBQWFBLENBQUMrQjtJQUNoRCxNQUFNRyxjQUFjLENBQUMsRUFBRTVCLElBQUk2QixPQUFPLENBQUNDLE1BQU0sQ0FBQyxFQUFFNUMsd0RBQVlBLENBQ3REeUMsZ0JBQWdCSSxJQUFJLEVBQ3BCSixnQkFBZ0JMLEVBQUUsRUFDbEIsQ0FBQztJQUNIN0IsK0NBQU1BLENBQUM7UUFDTHVDLElBQUk3QjtRQUNKOEIsU0FBUyxDQUFDLCtCQUErQixFQUFFTixnQkFBZ0JPLElBQUksQ0FBQyxDQUFDO1FBQ2pFQyxNQUFNLENBQUMsWUFBWSxFQUFFUCxZQUFZLEVBQUUsRUFBRUQsZ0JBQWdCTyxJQUFJLENBQUMsa0RBQWtELEVBQUU5QixPQUFPLFVBQVUsQ0FBQztJQUNsSTtJQUVBLDZEQUE2RDtJQUM3RCxNQUFNZ0MsU0FBeUIsTUFBTXpDLDBEQUFrQkEsQ0FDckQ4QixhQUNBcEIsUUFBUUUsSUFBSSxDQUFDYyxJQUFJLENBQUNDLEVBQUU7SUFFdEIsT0FBTztRQUFFUCxNQUFNcUI7SUFBTztBQUN4QiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvZG9jdW1lbnRzL3VwZGF0ZVVzZXJBY2Nlc3MudHM/NDM3NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0IH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCB7IERPQ1VNRU5UX1VSTCB9IGZyb20gXCIuLi8uLi8uLi9jb25zdGFudHNcIjtcbmltcG9ydCB7XG4gIERvY3VtZW50LFxuICBEb2N1bWVudFVzZXIsXG4gIEZldGNoQXBpUmVzdWx0LFxuICBSb29tQWNjZXNzLFxuICBSb29tQWNjZXNzTGV2ZWxzLFxuICBVcGRhdGVVc2VyQWNjZXNzUHJvcHMsXG59IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gXCIuLi9hdXRoXCI7XG5pbXBvcnQgeyBnZXRVc2VyIH0gZnJvbSBcIi4uL2RhdGFiYXNlXCI7XG5pbXBvcnQgeyBnZXRSb29tLCB1cGRhdGVSb29tIH0gZnJvbSBcIi4uL2xpdmVibG9ja3NcIjtcbmltcG9ydCB7IG5vdGlmeSB9IGZyb20gXCIuLi9ub3RpZnlcIjtcbmltcG9ydCB7XG4gIGJ1aWxkRG9jdW1lbnQsXG4gIGJ1aWxkRG9jdW1lbnRVc2VycyxcbiAgZG9jdW1lbnRBY2Nlc3NUb1Jvb21BY2Nlc3NlcyxcbiAgaXNVc2VyRG9jdW1lbnRPd25lcixcbiAgdXNlckFsbG93ZWRJblJvb20sXG59IGZyb20gXCIuLi91dGlsc1wiO1xuXG4vKipcbiAqIEFkZCBhIG5ldyBjb2xsYWJvcmF0b3IgdG8gYSBkb2N1bWVudCwgb3IgZWRpdCBhbiBvbGQgY29sbGFib3JhdG9yXG4gKiBPbmx5IGFsbG93IGlmIGF1dGhvcml6ZWQgd2l0aCBOZXh0QXV0aCBhbmQgaXMgYWRkZWQgYXMgYSB1c2VySWQgb24gdXNlcnNBY2Nlc3Nlc1xuICogRG8gbm90IGFsbG93IGlmIHB1YmxpYyBhY2Nlc3MsIG9yIGFjY2VzcyBncmFudGVkIHRocm91Z2ggZ3JvdXBJZHNcbiAqXG4gKiBAcGFyYW0gcmVxXG4gKiBAcGFyYW0gcmVzXG4gKiBAcGFyYW0gZG9jdW1lbnRJZCAtIFRoZSBkb2N1bWVudCdzIGlkXG4gKiBAcGFyYW0gdXNlcklkIC0gVGhlIGlkIG9mIHRoZSB1c2VyIHdlJ3JlIHVwZGF0aW5nXG4gKiBAcGFyYW0gYWNjZXNzIC0gVGhlIHVzZXIncyBuZXcgZG9jdW1lbnQgYWNjZXNzIGxldmVsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVVc2VyQWNjZXNzKFxuICByZXE6IEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHRbXCJyZXFcIl0sXG4gIHJlczogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlc1wiXSxcbiAgeyBkb2N1bWVudElkLCB1c2VySWQsIGFjY2VzcyB9OiBVcGRhdGVVc2VyQWNjZXNzUHJvcHNcbik6IFByb21pc2U8RmV0Y2hBcGlSZXN1bHQ8RG9jdW1lbnRVc2VyW10+PiB7XG4gIC8vIEdldCBzZXNzaW9uLCByb29tLCBhbmQgdXNlclxuICBjb25zdCBbc2Vzc2lvbiwgcm9vbSwgdXNlcl0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgZ2V0U2VydmVyU2Vzc2lvbihyZXEsIHJlcyksXG4gICAgZ2V0Um9vbSh7IHJvb21JZDogZG9jdW1lbnRJZCB9KSxcbiAgICBnZXRVc2VyKHVzZXJJZCksXG4gIF0pO1xuXG4gIC8vIENoZWNrIHVzZXIgaXMgbG9nZ2VkIGluXG4gIGlmICghc2Vzc2lvbikge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDEsXG4gICAgICAgIG1lc3NhZ2U6IFwiTm90IHNpZ25lZCBpblwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIlNpZ24gaW4gdG8gdXBkYXRlIGRvY3VtZW50IHVzZXJzXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBDaGVjayB0aGUgcm9vbSBgZG9jdW1lbnRJZGAgZXhpc3RzXG4gIGNvbnN0IHsgZGF0YTogY3VycmVudFJvb20sIGVycm9yIH0gPSByb29tO1xuXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiB7IGVycm9yIH07XG4gIH1cblxuICBpZiAoIWN1cnJlbnRSb29tKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwNCxcbiAgICAgICAgbWVzc2FnZTogXCJSb29tIG5vdCBmb3VuZFwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIkNoZWNrIHRoYXQgeW91J3JlIG9uIHRoZSBjb3JyZWN0IHBhZ2VcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIENoZWNrIGN1cnJlbnQgbG9nZ2VkLWluIHVzZXIgaGFzIGVkaXQgYWNjZXNzIHRvIHRoZSByb29tXG4gIGlmIChcbiAgICAhdXNlckFsbG93ZWRJblJvb20oe1xuICAgICAgYWNjZXNzZXNBbGxvd2VkOiBbUm9vbUFjY2Vzcy5Sb29tV3JpdGVdLFxuICAgICAgY2hlY2tBY2Nlc3NMZXZlbHM6IFtSb29tQWNjZXNzTGV2ZWxzLlVTRVJdLFxuICAgICAgdXNlcklkOiBzZXNzaW9uLnVzZXIuaW5mby5pZCxcbiAgICAgIGdyb3VwSWRzOiBzZXNzaW9uLnVzZXIuaW5mby5ncm91cElkcyxcbiAgICAgIHJvb206IGN1cnJlbnRSb29tLFxuICAgIH0pXG4gICkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDMsXG4gICAgICAgIG1lc3NhZ2U6IFwiTm90IGFsbG93ZWQgYWNjZXNzXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiQ2hlY2sgdGhhdCB5b3UndmUgYmVlbiBnaXZlbiBwZXJtaXNzaW9uIHRvIHRoZSBkb2N1bWVudFwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gQ2hlY2sgdXNlciBleGlzdHMgaW4gc3lzdGVtXG4gIGlmICghdXNlcikge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiAyMDAsXG4gICAgICAgIG1lc3NhZ2U6IFwiVXNlciBub3QgZm91bmRcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJDaGVjayB0aGF0IHlvdSd2ZSB1c2VkIHRoZSBjb3JyZWN0IHVzZXIgaWRcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIElmIHVzZXIgZXhpc3RzLCBjaGVjayB0aGF0IHRoZXkgYXJlIG5vdCB0aGUgb3duZXJcbiAgaWYgKGlzVXNlckRvY3VtZW50T3duZXIoeyByb29tOiBjdXJyZW50Um9vbSwgdXNlcklkOiB1c2VySWQgfSkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDAwLFxuICAgICAgICBtZXNzYWdlOiBcIlVzZXIgaXMgb3duZXJcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogYFVzZXIgJHt1c2VySWR9IGlzIHRoZSBkb2N1bWVudCBvd25lciBhbmQgY2Fubm90IGJlIGVkaXRlZGAsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBJZiByb29tIGV4aXN0cywgY3JlYXRlIHVzZXJBY2Nlc3NlcyBlbGVtZW50IGZvciBuZXcgY29sbGFib3JhdG9yIHdpdGggcGFzc2VkIGFjY2VzcyBsZXZlbFxuICBjb25zdCB1c2Vyc0FjY2Vzc2VzID0ge1xuICAgIFt1c2VySWRdOiBkb2N1bWVudEFjY2Vzc1RvUm9vbUFjY2Vzc2VzKGFjY2VzcyksXG4gIH07XG5cbiAgLy8gVXBkYXRlIHRoZSByb29tIHdpdGggdGhlIG5ldyBjb2xsYWJvcmF0b3JzXG4gIGNvbnN0IHsgZGF0YTogdXBkYXRlZFJvb20sIGVycm9yOiB1cGRhdGVSb29tRXJyb3IgfSA9IGF3YWl0IHVwZGF0ZVJvb20oe1xuICAgIHJvb21JZDogZG9jdW1lbnRJZCxcbiAgICB1c2Vyc0FjY2Vzc2VzOiB1c2Vyc0FjY2Vzc2VzLFxuICB9KTtcblxuICBpZiAodXBkYXRlUm9vbUVycm9yKSB7XG4gICAgcmV0dXJuIHsgZXJyb3I6IHVwZGF0ZVJvb21FcnJvciB9O1xuICB9XG5cbiAgaWYgKCF1cGRhdGVkUm9vbSkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDQsXG4gICAgICAgIG1lc3NhZ2U6IFwiVXBkYXRlZCByb29tIG5vdCBmb3VuZFwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIkNvbnRhY3QgYW4gYWRtaW5pc3RyYXRvclwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gU2VuZCBlbWFpbCB0byB1c2VyIG5vdGlmeWluZyB0aGF0IHRoZXkndmUgYmVlbiBhZGRlZCBvciB0aGVpciBwZXJtaXNzaW9uIGhhcyBiZWVuIGNoYW5nZWRcbiAgY29uc3QgdXBkYXRlZERvY3VtZW50OiBEb2N1bWVudCA9IGJ1aWxkRG9jdW1lbnQodXBkYXRlZFJvb20pO1xuICBjb25zdCBkb2N1bWVudFVybCA9IGAke3JlcS5oZWFkZXJzLm9yaWdpbn0ke0RPQ1VNRU5UX1VSTChcbiAgICB1cGRhdGVkRG9jdW1lbnQudHlwZSxcbiAgICB1cGRhdGVkRG9jdW1lbnQuaWRcbiAgKX1gO1xuICBub3RpZnkoe1xuICAgIHRvOiB1c2VySWQsXG4gICAgc3ViamVjdDogYFBlcm1pc3Npb24gY2hhbmdlZCBpbiBkb2N1bWVudCAke3VwZGF0ZWREb2N1bWVudC5uYW1lfWAsXG4gICAgaHRtbDogYEluIDxhIGhyZWY9XCIke2RvY3VtZW50VXJsfVwiPiR7dXBkYXRlZERvY3VtZW50Lm5hbWV9PC9hPiB5b3VyIHBlcm1pc3Npb24gbGV2ZWwgaGFzIGNoYW5nZWQgdG8gPHN0cm9uZz4ke2FjY2Vzc308L3N0cm9uZz4uYCxcbiAgfSk7XG5cbiAgLy8gSWYgdXBkYXRlIHN1Y2Nlc3NmdWwsIHJldHVybiB0aGUgbmV3IGxpc3Qgb2YgY29sbGFib3JhdG9yc1xuICBjb25zdCByZXN1bHQ6IERvY3VtZW50VXNlcltdID0gYXdhaXQgYnVpbGREb2N1bWVudFVzZXJzKFxuICAgIHVwZGF0ZWRSb29tLFxuICAgIHNlc3Npb24udXNlci5pbmZvLmlkXG4gICk7XG4gIHJldHVybiB7IGRhdGE6IHJlc3VsdCB9O1xufVxuIl0sIm5hbWVzIjpbIkRPQ1VNRU5UX1VSTCIsIlJvb21BY2Nlc3MiLCJSb29tQWNjZXNzTGV2ZWxzIiwiZ2V0U2VydmVyU2Vzc2lvbiIsImdldFVzZXIiLCJnZXRSb29tIiwidXBkYXRlUm9vbSIsIm5vdGlmeSIsImJ1aWxkRG9jdW1lbnQiLCJidWlsZERvY3VtZW50VXNlcnMiLCJkb2N1bWVudEFjY2Vzc1RvUm9vbUFjY2Vzc2VzIiwiaXNVc2VyRG9jdW1lbnRPd25lciIsInVzZXJBbGxvd2VkSW5Sb29tIiwidXBkYXRlVXNlckFjY2VzcyIsInJlcSIsInJlcyIsImRvY3VtZW50SWQiLCJ1c2VySWQiLCJhY2Nlc3MiLCJzZXNzaW9uIiwicm9vbSIsInVzZXIiLCJQcm9taXNlIiwiYWxsIiwicm9vbUlkIiwiZXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsInN1Z2dlc3Rpb24iLCJkYXRhIiwiY3VycmVudFJvb20iLCJhY2Nlc3Nlc0FsbG93ZWQiLCJSb29tV3JpdGUiLCJjaGVja0FjY2Vzc0xldmVscyIsIlVTRVIiLCJpbmZvIiwiaWQiLCJncm91cElkcyIsInVzZXJzQWNjZXNzZXMiLCJ1cGRhdGVkUm9vbSIsInVwZGF0ZVJvb21FcnJvciIsInVwZGF0ZWREb2N1bWVudCIsImRvY3VtZW50VXJsIiwiaGVhZGVycyIsIm9yaWdpbiIsInR5cGUiLCJ0byIsInN1YmplY3QiLCJuYW1lIiwiaHRtbCIsInJlc3VsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/updateUserAccess.ts\n");

/***/ }),

/***/ "(api)/./lib/server/index.ts":
/*!*****************************!*\
  !*** ./lib/server/index.ts ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./database */ \"(api)/./lib/server/database/index.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _database__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _database__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _documents__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./documents */ \"(api)/./lib/server/documents/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _liveblocks__WEBPACK_IMPORTED_MODULE_3__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _liveblocks__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _notify__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./notify */ \"(api)/./lib/server/notify/index.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _notify__WEBPACK_IMPORTED_MODULE_4__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _notify__WEBPACK_IMPORTED_MODULE_4__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils */ \"(api)/./lib/server/utils/index.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _utils__WEBPACK_IMPORTED_MODULE_5__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _utils__WEBPACK_IMPORTED_MODULE_5__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_0__, _documents__WEBPACK_IMPORTED_MODULE_2__]);\n([_auth__WEBPACK_IMPORTED_MODULE_0__, _documents__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _auth__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _auth__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _documents__WEBPACK_IMPORTED_MODULE_2__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _documents__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n\n\n\n// ============================================================================\nif (false) {}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBdUI7QUFDSTtBQUNDO0FBQ0M7QUFDSjtBQUNEO0FBRXhCLCtFQUErRTtBQUMvRSxJQUFJLEtBQTZCLEVBQUUsRUFPbEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL2luZGV4LnRzPzY0YjEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vYXV0aFwiO1xuZXhwb3J0ICogZnJvbSBcIi4vZGF0YWJhc2VcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2RvY3VtZW50c1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vbGl2ZWJsb2Nrc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vbm90aWZ5XCI7XG5leHBvcnQgKiBmcm9tIFwiLi91dGlsc1wiO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICBjb25zb2xlLmxvZygpO1xuICBjb25zb2xlLmVycm9yKFxuICAgIFwiREFOR0VSOiBZb3UncmUgdXNpbmcgYSBmdW5jdGlvbiBmcm9tIC9saWIvc2VydmVyIG9uIHRoZSBjbGllbnRcIlxuICApO1xuICBjb25zb2xlLmVycm9yKFwiVGhpcyBtYXkgZXhwb3NlIHlvdXIgc2VjcmV0IGtleShzKVwiKTtcbiAgY29uc29sZS5sb2coKTtcbn1cbiJdLCJuYW1lcyI6WyJjb25zb2xlIiwibG9nIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/index.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/authorize.ts":
/*!********************************************!*\
  !*** ./lib/server/liveblocks/authorize.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authorize: () => (/* binding */ authorize)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n/**\n * Authorize\n *\n * Authorize a user in your Liveblocks app. Used within liveblocks.config.ts\n * Uses Liveblocks API\n *\n * Similar to using `authorize` from `@liveblocks/node`:\n * https://liveblocks.io/docs/api-reference/liveblocks-node#authorize\n *\n * @param roomId - The current room's id\n * @param userId - The current user's id\n * @param groupIds - The current user's group ids\n * @param userInfo - The current user's user info\n */ async function authorize({ roomId, userId, groupIds, userInfo }) {\n    const url = `/v2/rooms/${roomId}/authorize`;\n    const payload = JSON.stringify({\n        roomId,\n        userId,\n        groupIds,\n        userInfo\n    });\n    return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fetchLiveblocksApi)(url, {\n        method: \"POST\",\n        body: payload\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvYXV0aG9yaXplLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBRThDO0FBUzlDOzs7Ozs7Ozs7Ozs7O0NBYUMsR0FDTSxlQUFlQyxVQUFVLEVBQzlCQyxNQUFNLEVBQ05DLE1BQU0sRUFDTkMsUUFBUSxFQUNSQyxRQUFRLEVBQ0Y7SUFDTixNQUFNQyxNQUFNLENBQUMsVUFBVSxFQUFFSixPQUFPLFVBQVUsQ0FBQztJQUUzQyxNQUFNSyxVQUFVQyxLQUFLQyxTQUFTLENBQUM7UUFDN0JQO1FBQ0FDO1FBQ0FDO1FBQ0FDO0lBQ0Y7SUFFQSxPQUFPTCwwREFBa0JBLENBQW9CTSxLQUFLO1FBQ2hESSxRQUFRO1FBQ1JDLE1BQU1KO0lBQ1I7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvbGl2ZWJsb2Nrcy9hdXRob3JpemUudHM/ZTRlMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVc2VySW5mbyB9IGZyb20gXCIuLi8uLi8uLi9saXZlYmxvY2tzLmNvbmZpZ1wiO1xuaW1wb3J0IHsgRmV0Y2hBcGlSZXN1bHQsIFJvb20gfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGZldGNoTGl2ZWJsb2Nrc0FwaSB9IGZyb20gXCIuLi91dGlsc1wiO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBncm91cElkcz86IHN0cmluZ1tdO1xuICByb29tSWQ6IFJvb21bXCJpZFwiXTtcbiAgdXNlcklkPzogc3RyaW5nO1xuICB1c2VySW5mbz86IFVzZXJJbmZvO1xufVxuXG4vKipcbiAqIEF1dGhvcml6ZVxuICpcbiAqIEF1dGhvcml6ZSBhIHVzZXIgaW4geW91ciBMaXZlYmxvY2tzIGFwcC4gVXNlZCB3aXRoaW4gbGl2ZWJsb2Nrcy5jb25maWcudHNcbiAqIFVzZXMgTGl2ZWJsb2NrcyBBUElcbiAqXG4gKiBTaW1pbGFyIHRvIHVzaW5nIGBhdXRob3JpemVgIGZyb20gYEBsaXZlYmxvY2tzL25vZGVgOlxuICogaHR0cHM6Ly9saXZlYmxvY2tzLmlvL2RvY3MvYXBpLXJlZmVyZW5jZS9saXZlYmxvY2tzLW5vZGUjYXV0aG9yaXplXG4gKlxuICogQHBhcmFtIHJvb21JZCAtIFRoZSBjdXJyZW50IHJvb20ncyBpZFxuICogQHBhcmFtIHVzZXJJZCAtIFRoZSBjdXJyZW50IHVzZXIncyBpZFxuICogQHBhcmFtIGdyb3VwSWRzIC0gVGhlIGN1cnJlbnQgdXNlcidzIGdyb3VwIGlkc1xuICogQHBhcmFtIHVzZXJJbmZvIC0gVGhlIGN1cnJlbnQgdXNlcidzIHVzZXIgaW5mb1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXV0aG9yaXplKHtcbiAgcm9vbUlkLFxuICB1c2VySWQsXG4gIGdyb3VwSWRzLFxuICB1c2VySW5mbyxcbn06IFByb3BzKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDx7IHRva2VuOiBzdHJpbmcgfT4+IHtcbiAgY29uc3QgdXJsID0gYC92Mi9yb29tcy8ke3Jvb21JZH0vYXV0aG9yaXplYDtcblxuICBjb25zdCBwYXlsb2FkID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgIHJvb21JZCxcbiAgICB1c2VySWQsXG4gICAgZ3JvdXBJZHMsXG4gICAgdXNlckluZm8sXG4gIH0pO1xuXG4gIHJldHVybiBmZXRjaExpdmVibG9ja3NBcGk8eyB0b2tlbjogc3RyaW5nIH0+KHVybCwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgYm9keTogcGF5bG9hZCxcbiAgfSk7XG59XG4iXSwibmFtZXMiOlsiZmV0Y2hMaXZlYmxvY2tzQXBpIiwiYXV0aG9yaXplIiwicm9vbUlkIiwidXNlcklkIiwiZ3JvdXBJZHMiLCJ1c2VySW5mbyIsInVybCIsInBheWxvYWQiLCJKU09OIiwic3RyaW5naWZ5IiwibWV0aG9kIiwiYm9keSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/authorize.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/createRoom.ts":
/*!*********************************************!*\
  !*** ./lib/server/liveblocks/createRoom.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createRoom: () => (/* binding */ createRoom)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n/**\n * Create Room\n *\n * Create a new room with a number of params.\n * Uses Liveblocks API\n *\n * @param id - The id of the room\n * @param metadata - The room's metadata\n * @param usersAccesses - Which users are allowed in the room\n * @param groupsAccesses - Which groups are allowed in the room\n * @param defaultAccesses - Default accesses for room\n */ async function createRoom({ id, metadata, usersAccesses, groupsAccesses, defaultAccesses = [] }) {\n    const url = \"/v2/rooms\";\n    const payload = JSON.stringify({\n        id,\n        metadata,\n        usersAccesses,\n        groupsAccesses,\n        defaultAccesses\n    });\n    return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fetchLiveblocksApi)(url, {\n        method: \"POST\",\n        body: payload\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvY3JlYXRlUm9vbS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQU04QztBQVU5Qzs7Ozs7Ozs7Ozs7Q0FXQyxHQUNNLGVBQWVDLFdBQVcsRUFDL0JDLEVBQUUsRUFDRkMsUUFBUSxFQUNSQyxhQUFhLEVBQ2JDLGNBQWMsRUFDZEMsa0JBQWtCLEVBQUUsRUFDZDtJQUNOLE1BQU1DLE1BQU07SUFFWixNQUFNQyxVQUFVQyxLQUFLQyxTQUFTLENBQUM7UUFDN0JSO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO0lBQ0Y7SUFFQSxPQUFPTiwwREFBa0JBLENBQU9PLEtBQUs7UUFDbkNJLFFBQVE7UUFDUkMsTUFBTUo7SUFDUjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9saXZlYmxvY2tzL2NyZWF0ZVJvb20udHM/ODhiNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBGZXRjaEFwaVJlc3VsdCxcbiAgUm9vbSxcbiAgUm9vbUFjY2Vzc2VzLFxuICBSb29tTWV0YWRhdGEsXG59IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZmV0Y2hMaXZlYmxvY2tzQXBpIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGRlZmF1bHRBY2Nlc3Nlcz86IHN0cmluZ1tdO1xuICBncm91cHNBY2Nlc3Nlcz86IFJvb21BY2Nlc3NlcztcbiAgaWQ6IHN0cmluZztcbiAgbWV0YWRhdGE/OiBSb29tTWV0YWRhdGE7XG4gIHVzZXJzQWNjZXNzZXM/OiBSb29tQWNjZXNzZXM7XG59XG5cbi8qKlxuICogQ3JlYXRlIFJvb21cbiAqXG4gKiBDcmVhdGUgYSBuZXcgcm9vbSB3aXRoIGEgbnVtYmVyIG9mIHBhcmFtcy5cbiAqIFVzZXMgTGl2ZWJsb2NrcyBBUElcbiAqXG4gKiBAcGFyYW0gaWQgLSBUaGUgaWQgb2YgdGhlIHJvb21cbiAqIEBwYXJhbSBtZXRhZGF0YSAtIFRoZSByb29tJ3MgbWV0YWRhdGFcbiAqIEBwYXJhbSB1c2Vyc0FjY2Vzc2VzIC0gV2hpY2ggdXNlcnMgYXJlIGFsbG93ZWQgaW4gdGhlIHJvb21cbiAqIEBwYXJhbSBncm91cHNBY2Nlc3NlcyAtIFdoaWNoIGdyb3VwcyBhcmUgYWxsb3dlZCBpbiB0aGUgcm9vbVxuICogQHBhcmFtIGRlZmF1bHRBY2Nlc3NlcyAtIERlZmF1bHQgYWNjZXNzZXMgZm9yIHJvb21cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVJvb20oe1xuICBpZCxcbiAgbWV0YWRhdGEsXG4gIHVzZXJzQWNjZXNzZXMsXG4gIGdyb3Vwc0FjY2Vzc2VzLFxuICBkZWZhdWx0QWNjZXNzZXMgPSBbXSxcbn06IFByb3BzKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDxSb29tPj4ge1xuICBjb25zdCB1cmwgPSBcIi92Mi9yb29tc1wiO1xuXG4gIGNvbnN0IHBheWxvYWQgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgaWQsXG4gICAgbWV0YWRhdGEsXG4gICAgdXNlcnNBY2Nlc3NlcyxcbiAgICBncm91cHNBY2Nlc3NlcyxcbiAgICBkZWZhdWx0QWNjZXNzZXMsXG4gIH0pO1xuXG4gIHJldHVybiBmZXRjaExpdmVibG9ja3NBcGk8Um9vbT4odXJsLCB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBib2R5OiBwYXlsb2FkLFxuICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJmZXRjaExpdmVibG9ja3NBcGkiLCJjcmVhdGVSb29tIiwiaWQiLCJtZXRhZGF0YSIsInVzZXJzQWNjZXNzZXMiLCJncm91cHNBY2Nlc3NlcyIsImRlZmF1bHRBY2Nlc3NlcyIsInVybCIsInBheWxvYWQiLCJKU09OIiwic3RyaW5naWZ5IiwibWV0aG9kIiwiYm9keSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/createRoom.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/deleteRoom.ts":
/*!*********************************************!*\
  !*** ./lib/server/liveblocks/deleteRoom.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteRoom: () => (/* binding */ deleteRoom)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n/**\n * Delete Room\n *\n * Delete the room by the room's id\n * Uses Liveblocks API\n *\n * @param roomId - The id of the room\n */ async function deleteRoom({ roomId }) {\n    const url = `/v2/rooms/${roomId}`;\n    return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fetchLiveblocksApi)(url, {\n        method: \"DELETE\"\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZGVsZXRlUm9vbS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUM4QztBQU05Qzs7Ozs7OztDQU9DLEdBQ00sZUFBZUMsV0FBVyxFQUMvQkMsTUFBTSxFQUNBO0lBQ04sTUFBTUMsTUFBTSxDQUFDLFVBQVUsRUFBRUQsT0FBTyxDQUFDO0lBQ2pDLE9BQU9GLDBEQUFrQkEsQ0FBT0csS0FBSztRQUNuQ0MsUUFBUTtJQUNWO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZGVsZXRlUm9vbS50cz9hMGY1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZldGNoQXBpUmVzdWx0LCBSb29tIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBmZXRjaExpdmVibG9ja3NBcGkgfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgcm9vbUlkOiBzdHJpbmc7XG59XG5cbi8qKlxuICogRGVsZXRlIFJvb21cbiAqXG4gKiBEZWxldGUgdGhlIHJvb20gYnkgdGhlIHJvb20ncyBpZFxuICogVXNlcyBMaXZlYmxvY2tzIEFQSVxuICpcbiAqIEBwYXJhbSByb29tSWQgLSBUaGUgaWQgb2YgdGhlIHJvb21cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVJvb20oe1xuICByb29tSWQsXG59OiBQcm9wcyk6IFByb21pc2U8RmV0Y2hBcGlSZXN1bHQ8Um9vbT4+IHtcbiAgY29uc3QgdXJsID0gYC92Mi9yb29tcy8ke3Jvb21JZH1gO1xuICByZXR1cm4gZmV0Y2hMaXZlYmxvY2tzQXBpPFJvb20+KHVybCwge1xuICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgfSk7XG59XG4iXSwibmFtZXMiOlsiZmV0Y2hMaXZlYmxvY2tzQXBpIiwiZGVsZXRlUm9vbSIsInJvb21JZCIsInVybCIsIm1ldGhvZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/deleteRoom.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/deleteStorage.ts":
/*!************************************************!*\
  !*** ./lib/server/liveblocks/deleteStorage.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteStorage: () => (/* binding */ deleteStorage)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n/**\n * Delete Storage\n *\n * Delete the storage by the room's id\n * Uses Liveblocks API\n *\n * @param roomId - The id of the room\n */ async function deleteStorage({ roomId }) {\n    const url = `/v2/rooms/${roomId}/storage`;\n    return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fetchLiveblocksApi)(url, {\n        method: \"DELETE\"\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZGVsZXRlU3RvcmFnZS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUM4QztBQU05Qzs7Ozs7OztDQU9DLEdBQ00sZUFBZUMsY0FBYyxFQUNsQ0MsTUFBTSxFQUNBO0lBQ04sTUFBTUMsTUFBTSxDQUFDLFVBQVUsRUFBRUQsT0FBTyxRQUFRLENBQUM7SUFDekMsT0FBT0YsMERBQWtCQSxDQUFPRyxLQUFLO1FBQ25DQyxRQUFRO0lBQ1Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvbGl2ZWJsb2Nrcy9kZWxldGVTdG9yYWdlLnRzP2VkMzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmV0Y2hBcGlSZXN1bHQsIFJvb20gfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGZldGNoTGl2ZWJsb2Nrc0FwaSB9IGZyb20gXCIuLi91dGlsc1wiO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICByb29tSWQ6IHN0cmluZztcbn1cblxuLyoqXG4gKiBEZWxldGUgU3RvcmFnZVxuICpcbiAqIERlbGV0ZSB0aGUgc3RvcmFnZSBieSB0aGUgcm9vbSdzIGlkXG4gKiBVc2VzIExpdmVibG9ja3MgQVBJXG4gKlxuICogQHBhcmFtIHJvb21JZCAtIFRoZSBpZCBvZiB0aGUgcm9vbVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlU3RvcmFnZSh7XG4gIHJvb21JZCxcbn06IFByb3BzKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDxSb29tPj4ge1xuICBjb25zdCB1cmwgPSBgL3YyL3Jvb21zLyR7cm9vbUlkfS9zdG9yYWdlYDtcbiAgcmV0dXJuIGZldGNoTGl2ZWJsb2Nrc0FwaTxSb29tPih1cmwsIHtcbiAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gIH0pO1xufVxuIl0sIm5hbWVzIjpbImZldGNoTGl2ZWJsb2Nrc0FwaSIsImRlbGV0ZVN0b3JhZ2UiLCJyb29tSWQiLCJ1cmwiLCJtZXRob2QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/deleteStorage.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/getActiveUsers.ts":
/*!*************************************************!*\
  !*** ./lib/server/liveblocks/getActiveUsers.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getActiveUsers: () => (/* binding */ getActiveUsers)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n/**\n * Get Active Users\n *\n * Get the active users in a room, given a roomId\n * Uses Liveblocks API\n *\n * @param roomId - The id of the room\n */ async function getActiveUsers({ roomId }) {\n    const url = `/v2/rooms/${roomId}/active_users`;\n    const { data, error } = await (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fetchLiveblocksApi)(url);\n    if (error) {\n        return {\n            error\n        };\n    }\n    return {\n        data: data?.data ?? []\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZ2V0QWN0aXZlVXNlcnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDOEM7QUFNOUM7Ozs7Ozs7Q0FPQyxHQUNNLGVBQWVDLGVBQWUsRUFDbkNDLE1BQU0sRUFDQTtJQUNOLE1BQU1DLE1BQU0sQ0FBQyxVQUFVLEVBQUVELE9BQU8sYUFBYSxDQUFDO0lBRTlDLE1BQU0sRUFBRUUsSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNTCwwREFBa0JBLENBQzlDRztJQUdGLElBQUlFLE9BQU87UUFDVCxPQUFPO1lBQUVBO1FBQU07SUFDakI7SUFFQSxPQUFPO1FBQUVELE1BQU1BLE1BQU1BLFFBQVEsRUFBRTtJQUFDO0FBQ2xDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9saXZlYmxvY2tzL2dldEFjdGl2ZVVzZXJzLnRzP2EwZWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmV0Y2hBcGlSZXN1bHQsIFJvb21BY3RpdmVVc2VyIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBmZXRjaExpdmVibG9ja3NBcGkgfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgcm9vbUlkOiBzdHJpbmc7XG59XG5cbi8qKlxuICogR2V0IEFjdGl2ZSBVc2Vyc1xuICpcbiAqIEdldCB0aGUgYWN0aXZlIHVzZXJzIGluIGEgcm9vbSwgZ2l2ZW4gYSByb29tSWRcbiAqIFVzZXMgTGl2ZWJsb2NrcyBBUElcbiAqXG4gKiBAcGFyYW0gcm9vbUlkIC0gVGhlIGlkIG9mIHRoZSByb29tXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBY3RpdmVVc2Vycyh7XG4gIHJvb21JZCxcbn06IFByb3BzKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDxSb29tQWN0aXZlVXNlcltdPj4ge1xuICBjb25zdCB1cmwgPSBgL3YyL3Jvb21zLyR7cm9vbUlkfS9hY3RpdmVfdXNlcnNgO1xuXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IGZldGNoTGl2ZWJsb2Nrc0FwaTx7IGRhdGE6IFJvb21BY3RpdmVVc2VyW10gfT4oXG4gICAgdXJsXG4gICk7XG5cbiAgaWYgKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgfVxuXG4gIHJldHVybiB7IGRhdGE6IGRhdGE/LmRhdGEgPz8gW10gfTtcbn1cbiJdLCJuYW1lcyI6WyJmZXRjaExpdmVibG9ja3NBcGkiLCJnZXRBY3RpdmVVc2VycyIsInJvb21JZCIsInVybCIsImRhdGEiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/getActiveUsers.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/getActiveUsersInRooms.ts":
/*!********************************************************!*\
  !*** ./lib/server/liveblocks/getActiveUsersInRooms.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getActiveUsersInRooms: () => (/* binding */ getActiveUsersInRooms)\n/* harmony export */ });\n/* harmony import */ var _getActiveUsers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getActiveUsers */ \"(api)/./lib/server/liveblocks/getActiveUsers.ts\");\n\n/**\n * Get Active Users in Rooms\n *\n * Get the active users in a list of rooms, given roomIds\n * Uses Liveblocks API\n *\n * @param roomId - The ids of the rooms\n */ async function getActiveUsersInRooms({ roomIds }) {\n    const promises = [];\n    // Call Liveblocks API for each room\n    for (const roomId of roomIds){\n        promises.push((0,_getActiveUsers__WEBPACK_IMPORTED_MODULE_0__.getActiveUsers)({\n            roomId: roomId\n        }));\n    }\n    const currentActiveUsers = await Promise.all(promises);\n    const result = [];\n    // Add active user info to list ready to return\n    for (const [i, roomId] of roomIds.entries()){\n        const { data, error } = currentActiveUsers[i];\n        if (error) {\n            return {\n                error\n            };\n        }\n        const users = data ?? [];\n        result.push({\n            documentId: roomId,\n            users: users\n        });\n    }\n    return {\n        data: result\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZ2V0QWN0aXZlVXNlcnNJblJvb21zLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBS2tEO0FBTWxEOzs7Ozs7O0NBT0MsR0FDTSxlQUFlQyxzQkFBc0IsRUFDMUNDLE9BQU8sRUFDRDtJQUNOLE1BQU1DLFdBQXdELEVBQUU7SUFFaEUsb0NBQW9DO0lBQ3BDLEtBQUssTUFBTUMsVUFBVUYsUUFBUztRQUM1QkMsU0FBU0UsSUFBSSxDQUFDTCwrREFBY0EsQ0FBQztZQUFFSSxRQUFRQTtRQUFPO0lBQ2hEO0lBRUEsTUFBTUUscUJBQXFCLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0w7SUFDN0MsTUFBTU0sU0FBOEIsRUFBRTtJQUV0QywrQ0FBK0M7SUFDL0MsS0FBSyxNQUFNLENBQUNDLEdBQUdOLE9BQU8sSUFBSUYsUUFBUVMsT0FBTyxHQUFJO1FBQzNDLE1BQU0sRUFBRUMsSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBR1Asa0JBQWtCLENBQUNJLEVBQUU7UUFFN0MsSUFBSUcsT0FBTztZQUNULE9BQU87Z0JBQUVBO1lBQU07UUFDakI7UUFFQSxNQUFNQyxRQUFRRixRQUFRLEVBQUU7UUFFeEJILE9BQU9KLElBQUksQ0FBQztZQUNWVSxZQUFZWDtZQUNaVSxPQUFPQTtRQUNUO0lBQ0Y7SUFFQSxPQUFPO1FBQUVGLE1BQU1IO0lBQU87QUFDeEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZ2V0QWN0aXZlVXNlcnNJblJvb21zLnRzPzRjODEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgRmV0Y2hBcGlSZXN1bHQsXG4gIExpdmVVc2Vyc1Jlc3BvbnNlLFxuICBSb29tQWN0aXZlVXNlcixcbn0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRBY3RpdmVVc2VycyB9IGZyb20gXCIuL2dldEFjdGl2ZVVzZXJzXCI7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHJvb21JZHM6IHN0cmluZ1tdO1xufVxuXG4vKipcbiAqIEdldCBBY3RpdmUgVXNlcnMgaW4gUm9vbXNcbiAqXG4gKiBHZXQgdGhlIGFjdGl2ZSB1c2VycyBpbiBhIGxpc3Qgb2Ygcm9vbXMsIGdpdmVuIHJvb21JZHNcbiAqIFVzZXMgTGl2ZWJsb2NrcyBBUElcbiAqXG4gKiBAcGFyYW0gcm9vbUlkIC0gVGhlIGlkcyBvZiB0aGUgcm9vbXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFjdGl2ZVVzZXJzSW5Sb29tcyh7XG4gIHJvb21JZHMsXG59OiBQcm9wcyk6IFByb21pc2U8RmV0Y2hBcGlSZXN1bHQ8TGl2ZVVzZXJzUmVzcG9uc2VbXT4+IHtcbiAgY29uc3QgcHJvbWlzZXM6IFByb21pc2U8RmV0Y2hBcGlSZXN1bHQ8Um9vbUFjdGl2ZVVzZXJbXT4+W10gPSBbXTtcblxuICAvLyBDYWxsIExpdmVibG9ja3MgQVBJIGZvciBlYWNoIHJvb21cbiAgZm9yIChjb25zdCByb29tSWQgb2Ygcm9vbUlkcykge1xuICAgIHByb21pc2VzLnB1c2goZ2V0QWN0aXZlVXNlcnMoeyByb29tSWQ6IHJvb21JZCB9KSk7XG4gIH1cblxuICBjb25zdCBjdXJyZW50QWN0aXZlVXNlcnMgPSBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gIGNvbnN0IHJlc3VsdDogTGl2ZVVzZXJzUmVzcG9uc2VbXSA9IFtdO1xuXG4gIC8vIEFkZCBhY3RpdmUgdXNlciBpbmZvIHRvIGxpc3QgcmVhZHkgdG8gcmV0dXJuXG4gIGZvciAoY29uc3QgW2ksIHJvb21JZF0gb2Ygcm9vbUlkcy5lbnRyaWVzKCkpIHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBjdXJyZW50QWN0aXZlVXNlcnNbaV07XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7IGVycm9yIH07XG4gICAgfVxuXG4gICAgY29uc3QgdXNlcnMgPSBkYXRhID8/IFtdO1xuXG4gICAgcmVzdWx0LnB1c2goe1xuICAgICAgZG9jdW1lbnRJZDogcm9vbUlkLFxuICAgICAgdXNlcnM6IHVzZXJzLFxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHsgZGF0YTogcmVzdWx0IH07XG59XG4iXSwibmFtZXMiOlsiZ2V0QWN0aXZlVXNlcnMiLCJnZXRBY3RpdmVVc2Vyc0luUm9vbXMiLCJyb29tSWRzIiwicHJvbWlzZXMiLCJyb29tSWQiLCJwdXNoIiwiY3VycmVudEFjdGl2ZVVzZXJzIiwiUHJvbWlzZSIsImFsbCIsInJlc3VsdCIsImkiLCJlbnRyaWVzIiwiZGF0YSIsImVycm9yIiwidXNlcnMiLCJkb2N1bWVudElkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/getActiveUsersInRooms.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/getNextRooms.ts":
/*!***********************************************!*\
  !*** ./lib/server/liveblocks/getNextRooms.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getNextRoom: () => (/* binding */ getNextRoom)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n/**\n * Get Next Rooms\n *\n * Get the next rooms from the next param\n * The `next` param is retrieved from /pages/api/documents/index.ts\n * That API is called on the client within /lib/client/getDocumentsByGroup.ts\n * Uses Liveblocks API\n *\n * @param next - String containing a URL to get the next set of rooms, returned from Liveblocks API\n */ async function getNextRoom({ next }) {\n    return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fetchLiveblocksApi)(next);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZ2V0TmV4dFJvb21zLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQzhDO0FBTTlDOzs7Ozs7Ozs7Q0FTQyxHQUNNLGVBQWVDLFlBQVksRUFDaENDLElBQUksRUFDRTtJQUNOLE9BQU9GLDBEQUFrQkEsQ0FBbUJFO0FBQzlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9saXZlYmxvY2tzL2dldE5leHRSb29tcy50cz9kMTlhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZldGNoQXBpUmVzdWx0LCBHZXRSb29tc1Jlc3BvbnNlIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBmZXRjaExpdmVibG9ja3NBcGkgfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgbmV4dDogc3RyaW5nO1xufVxuXG4vKipcbiAqIEdldCBOZXh0IFJvb21zXG4gKlxuICogR2V0IHRoZSBuZXh0IHJvb21zIGZyb20gdGhlIG5leHQgcGFyYW1cbiAqIFRoZSBgbmV4dGAgcGFyYW0gaXMgcmV0cmlldmVkIGZyb20gL3BhZ2VzL2FwaS9kb2N1bWVudHMvaW5kZXgudHNcbiAqIFRoYXQgQVBJIGlzIGNhbGxlZCBvbiB0aGUgY2xpZW50IHdpdGhpbiAvbGliL2NsaWVudC9nZXREb2N1bWVudHNCeUdyb3VwLnRzXG4gKiBVc2VzIExpdmVibG9ja3MgQVBJXG4gKlxuICogQHBhcmFtIG5leHQgLSBTdHJpbmcgY29udGFpbmluZyBhIFVSTCB0byBnZXQgdGhlIG5leHQgc2V0IG9mIHJvb21zLCByZXR1cm5lZCBmcm9tIExpdmVibG9ja3MgQVBJXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXROZXh0Um9vbSh7XG4gIG5leHQsXG59OiBQcm9wcyk6IFByb21pc2U8RmV0Y2hBcGlSZXN1bHQ8R2V0Um9vbXNSZXNwb25zZT4+IHtcbiAgcmV0dXJuIGZldGNoTGl2ZWJsb2Nrc0FwaTxHZXRSb29tc1Jlc3BvbnNlPihuZXh0KTtcbn1cbiJdLCJuYW1lcyI6WyJmZXRjaExpdmVibG9ja3NBcGkiLCJnZXROZXh0Um9vbSIsIm5leHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/getNextRooms.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/getRoom.ts":
/*!******************************************!*\
  !*** ./lib/server/liveblocks/getRoom.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getRoom: () => (/* binding */ getRoom)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n/**\n * Get Room\n *\n * Get the room by the room's id\n * Uses Liveblocks API\n *\n * @param roomId - The id of the room\n */ async function getRoom({ roomId }) {\n    const url = `/v2/rooms/${roomId}`;\n    return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fetchLiveblocksApi)(url);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZ2V0Um9vbS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUM4QztBQU05Qzs7Ozs7OztDQU9DLEdBQ00sZUFBZUMsUUFBUSxFQUM1QkMsTUFBTSxFQUNBO0lBQ04sTUFBTUMsTUFBTSxDQUFDLFVBQVUsRUFBRUQsT0FBTyxDQUFDO0lBQ2pDLE9BQU9GLDBEQUFrQkEsQ0FBT0c7QUFDbEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZ2V0Um9vbS50cz8xMDEyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZldGNoQXBpUmVzdWx0LCBSb29tIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBmZXRjaExpdmVibG9ja3NBcGkgfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgcm9vbUlkOiBzdHJpbmc7XG59XG5cbi8qKlxuICogR2V0IFJvb21cbiAqXG4gKiBHZXQgdGhlIHJvb20gYnkgdGhlIHJvb20ncyBpZFxuICogVXNlcyBMaXZlYmxvY2tzIEFQSVxuICpcbiAqIEBwYXJhbSByb29tSWQgLSBUaGUgaWQgb2YgdGhlIHJvb21cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJvb20oe1xuICByb29tSWQsXG59OiBQcm9wcyk6IFByb21pc2U8RmV0Y2hBcGlSZXN1bHQ8Um9vbT4+IHtcbiAgY29uc3QgdXJsID0gYC92Mi9yb29tcy8ke3Jvb21JZH1gO1xuICByZXR1cm4gZmV0Y2hMaXZlYmxvY2tzQXBpPFJvb20+KHVybCk7XG59XG4iXSwibmFtZXMiOlsiZmV0Y2hMaXZlYmxvY2tzQXBpIiwiZ2V0Um9vbSIsInJvb21JZCIsInVybCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/getRoom.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/getRooms.ts":
/*!*******************************************!*\
  !*** ./lib/server/liveblocks/getRooms.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getRooms: () => (/* binding */ getRooms)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n/**\n * Get Rooms\n *\n * Get a list of rooms\n * Uses Liveblocks API\n *\n * @param limit - The amount of rooms to load, between 1 and 100, defaults to 20\n * @param startingAfter - A cursor used for pagination, get the value from the response of the previous page\n * @param userId - The id of the user to filter\n * @param groupIds - The group to filter\n * @param metadata - The metadata to filter\n */ async function getRooms({ limit, startingAfter, userId, groupIds, metadata }) {\n    let url = `/v2/rooms?`;\n    if (limit) {\n        url += `&limit=${limit}`;\n    }\n    if (startingAfter) {\n        url += `&startingAfter=${startingAfter}`;\n    }\n    if (userId) {\n        url += `&userId=${userId}`;\n    }\n    if (groupIds && groupIds.length > 0) {\n        url += `&groupIds=${groupIds}`;\n    }\n    if (metadata) {\n        Object.entries(metadata).forEach(([key, val])=>{\n            url += `&metadata.${key}=${val}`;\n        });\n    }\n    return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fetchLiveblocksApi)(url);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZ2V0Um9vbXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDOEM7QUFVOUM7Ozs7Ozs7Ozs7O0NBV0MsR0FDTSxlQUFlQyxTQUFTLEVBQzdCQyxLQUFLLEVBQ0xDLGFBQWEsRUFDYkMsTUFBTSxFQUNOQyxRQUFRLEVBQ1JDLFFBQVEsRUFDRjtJQUNOLElBQUlDLE1BQU0sQ0FBQyxVQUFVLENBQUM7SUFFdEIsSUFBSUwsT0FBTztRQUNUSyxPQUFPLENBQUMsT0FBTyxFQUFFTCxNQUFNLENBQUM7SUFDMUI7SUFFQSxJQUFJQyxlQUFlO1FBQ2pCSSxPQUFPLENBQUMsZUFBZSxFQUFFSixjQUFjLENBQUM7SUFDMUM7SUFFQSxJQUFJQyxRQUFRO1FBQ1ZHLE9BQU8sQ0FBQyxRQUFRLEVBQUVILE9BQU8sQ0FBQztJQUM1QjtJQUVBLElBQUlDLFlBQVlBLFNBQVNHLE1BQU0sR0FBRyxHQUFHO1FBQ25DRCxPQUFPLENBQUMsVUFBVSxFQUFFRixTQUFTLENBQUM7SUFDaEM7SUFFQSxJQUFJQyxVQUFVO1FBQ1pHLE9BQU9DLE9BQU8sQ0FBQ0osVUFBVUssT0FBTyxDQUFDLENBQUMsQ0FBQ0MsS0FBS0MsSUFBSTtZQUMxQ04sT0FBTyxDQUFDLFVBQVUsRUFBRUssSUFBSSxDQUFDLEVBQUVDLElBQUksQ0FBQztRQUNsQztJQUNGO0lBRUEsT0FBT2IsMERBQWtCQSxDQUFtQk87QUFDOUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZ2V0Um9vbXMudHM/YzU3MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGZXRjaEFwaVJlc3VsdCwgR2V0Um9vbXNSZXNwb25zZSwgUm9vbU1ldGFkYXRhIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBmZXRjaExpdmVibG9ja3NBcGkgfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgZ3JvdXBJZHM/OiBzdHJpbmdbXSB8IHN0cmluZztcbiAgbGltaXQ/OiBudW1iZXI7XG4gIG1ldGFkYXRhPzogUm9vbU1ldGFkYXRhO1xuICBzdGFydGluZ0FmdGVyPzogc3RyaW5nO1xuICB1c2VySWQ/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogR2V0IFJvb21zXG4gKlxuICogR2V0IGEgbGlzdCBvZiByb29tc1xuICogVXNlcyBMaXZlYmxvY2tzIEFQSVxuICpcbiAqIEBwYXJhbSBsaW1pdCAtIFRoZSBhbW91bnQgb2Ygcm9vbXMgdG8gbG9hZCwgYmV0d2VlbiAxIGFuZCAxMDAsIGRlZmF1bHRzIHRvIDIwXG4gKiBAcGFyYW0gc3RhcnRpbmdBZnRlciAtIEEgY3Vyc29yIHVzZWQgZm9yIHBhZ2luYXRpb24sIGdldCB0aGUgdmFsdWUgZnJvbSB0aGUgcmVzcG9uc2Ugb2YgdGhlIHByZXZpb3VzIHBhZ2VcbiAqIEBwYXJhbSB1c2VySWQgLSBUaGUgaWQgb2YgdGhlIHVzZXIgdG8gZmlsdGVyXG4gKiBAcGFyYW0gZ3JvdXBJZHMgLSBUaGUgZ3JvdXAgdG8gZmlsdGVyXG4gKiBAcGFyYW0gbWV0YWRhdGEgLSBUaGUgbWV0YWRhdGEgdG8gZmlsdGVyXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSb29tcyh7XG4gIGxpbWl0LFxuICBzdGFydGluZ0FmdGVyLFxuICB1c2VySWQsXG4gIGdyb3VwSWRzLFxuICBtZXRhZGF0YSxcbn06IFByb3BzKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDxHZXRSb29tc1Jlc3BvbnNlPj4ge1xuICBsZXQgdXJsID0gYC92Mi9yb29tcz9gO1xuXG4gIGlmIChsaW1pdCkge1xuICAgIHVybCArPSBgJmxpbWl0PSR7bGltaXR9YDtcbiAgfVxuXG4gIGlmIChzdGFydGluZ0FmdGVyKSB7XG4gICAgdXJsICs9IGAmc3RhcnRpbmdBZnRlcj0ke3N0YXJ0aW5nQWZ0ZXJ9YDtcbiAgfVxuXG4gIGlmICh1c2VySWQpIHtcbiAgICB1cmwgKz0gYCZ1c2VySWQ9JHt1c2VySWR9YDtcbiAgfVxuXG4gIGlmIChncm91cElkcyAmJiBncm91cElkcy5sZW5ndGggPiAwKSB7XG4gICAgdXJsICs9IGAmZ3JvdXBJZHM9JHtncm91cElkc31gO1xuICB9XG5cbiAgaWYgKG1ldGFkYXRhKSB7XG4gICAgT2JqZWN0LmVudHJpZXMobWV0YWRhdGEpLmZvckVhY2goKFtrZXksIHZhbF0pID0+IHtcbiAgICAgIHVybCArPSBgJm1ldGFkYXRhLiR7a2V5fT0ke3ZhbH1gO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGZldGNoTGl2ZWJsb2Nrc0FwaTxHZXRSb29tc1Jlc3BvbnNlPih1cmwpO1xufVxuIl0sIm5hbWVzIjpbImZldGNoTGl2ZWJsb2Nrc0FwaSIsImdldFJvb21zIiwibGltaXQiLCJzdGFydGluZ0FmdGVyIiwidXNlcklkIiwiZ3JvdXBJZHMiLCJtZXRhZGF0YSIsInVybCIsImxlbmd0aCIsIk9iamVjdCIsImVudHJpZXMiLCJmb3JFYWNoIiwia2V5IiwidmFsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/getRooms.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/getStorage.ts":
/*!*********************************************!*\
  !*** ./lib/server/liveblocks/getStorage.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getStorage: () => (/* binding */ getStorage)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n/**\n * Get Storage\n *\n * Get a room's storage as a JS object\n * Note that this returns an object using the Liveblocks data structure\n * Uses Liveblocks API\n *\n * @param roomId - The id of the room\n */ async function getStorage({ roomId }) {\n    const url = `/v2/rooms/${roomId}/storage`;\n    const { data, error } = await (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fetchLiveblocksApi)(url);\n    if (error) {\n        return {\n            error\n        };\n    }\n    return {\n        data: data ?? {}\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZ2V0U3RvcmFnZS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUM4QztBQU05Qzs7Ozs7Ozs7Q0FRQyxHQUNNLGVBQWVDLFdBQVcsRUFDL0JDLE1BQU0sRUFDQTtJQUNOLE1BQU1DLE1BQU0sQ0FBQyxVQUFVLEVBQUVELE9BQU8sUUFBUSxDQUFDO0lBRXpDLE1BQU0sRUFBRUUsSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNTCwwREFBa0JBLENBQXFCRztJQUVyRSxJQUFJRSxPQUFPO1FBQ1QsT0FBTztZQUFFQTtRQUFNO0lBQ2pCO0lBRUEsT0FBTztRQUFFRCxNQUFNQSxRQUFRLENBQUM7SUFBRTtBQUM1QiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvbGl2ZWJsb2Nrcy9nZXRTdG9yYWdlLnRzP2RiZTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmV0Y2hBcGlSZXN1bHQsIEdldFN0b3JhZ2VSZXNwb25zZSB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZmV0Y2hMaXZlYmxvY2tzQXBpIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHJvb21JZDogc3RyaW5nO1xufVxuXG4vKipcbiAqIEdldCBTdG9yYWdlXG4gKlxuICogR2V0IGEgcm9vbSdzIHN0b3JhZ2UgYXMgYSBKUyBvYmplY3RcbiAqIE5vdGUgdGhhdCB0aGlzIHJldHVybnMgYW4gb2JqZWN0IHVzaW5nIHRoZSBMaXZlYmxvY2tzIGRhdGEgc3RydWN0dXJlXG4gKiBVc2VzIExpdmVibG9ja3MgQVBJXG4gKlxuICogQHBhcmFtIHJvb21JZCAtIFRoZSBpZCBvZiB0aGUgcm9vbVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U3RvcmFnZSh7XG4gIHJvb21JZCxcbn06IFByb3BzKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDxHZXRTdG9yYWdlUmVzcG9uc2U+PiB7XG4gIGNvbnN0IHVybCA9IGAvdjIvcm9vbXMvJHtyb29tSWR9L3N0b3JhZ2VgO1xuXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IGZldGNoTGl2ZWJsb2Nrc0FwaTxHZXRTdG9yYWdlUmVzcG9uc2U+KHVybCk7XG5cbiAgaWYgKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgfVxuXG4gIHJldHVybiB7IGRhdGE6IGRhdGEgPz8ge30gfTtcbn1cbiJdLCJuYW1lcyI6WyJmZXRjaExpdmVibG9ja3NBcGkiLCJnZXRTdG9yYWdlIiwicm9vbUlkIiwidXJsIiwiZGF0YSIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/getStorage.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/index.ts":
/*!****************************************!*\
  !*** ./lib/server/liveblocks/index.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _authorize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./authorize */ \"(api)/./lib/server/liveblocks/authorize.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _authorize__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _authorize__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _createRoom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./createRoom */ \"(api)/./lib/server/liveblocks/createRoom.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _createRoom__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _createRoom__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _deleteStorage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./deleteStorage */ \"(api)/./lib/server/liveblocks/deleteStorage.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _deleteStorage__WEBPACK_IMPORTED_MODULE_2__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _deleteStorage__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getActiveUsers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./getActiveUsers */ \"(api)/./lib/server/liveblocks/getActiveUsers.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getActiveUsers__WEBPACK_IMPORTED_MODULE_3__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getActiveUsers__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getActiveUsersInRooms__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./getActiveUsersInRooms */ \"(api)/./lib/server/liveblocks/getActiveUsersInRooms.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getActiveUsersInRooms__WEBPACK_IMPORTED_MODULE_4__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getActiveUsersInRooms__WEBPACK_IMPORTED_MODULE_4__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getNextRooms__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./getNextRooms */ \"(api)/./lib/server/liveblocks/getNextRooms.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getNextRooms__WEBPACK_IMPORTED_MODULE_5__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getNextRooms__WEBPACK_IMPORTED_MODULE_5__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getRoom__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./getRoom */ \"(api)/./lib/server/liveblocks/getRoom.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getRoom__WEBPACK_IMPORTED_MODULE_6__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getRoom__WEBPACK_IMPORTED_MODULE_6__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getRooms__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./getRooms */ \"(api)/./lib/server/liveblocks/getRooms.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getRooms__WEBPACK_IMPORTED_MODULE_7__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getRooms__WEBPACK_IMPORTED_MODULE_7__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getStorage__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./getStorage */ \"(api)/./lib/server/liveblocks/getStorage.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getStorage__WEBPACK_IMPORTED_MODULE_8__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getStorage__WEBPACK_IMPORTED_MODULE_8__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _initializeStorage__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./initializeStorage */ \"(api)/./lib/server/liveblocks/initializeStorage.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _initializeStorage__WEBPACK_IMPORTED_MODULE_9__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _initializeStorage__WEBPACK_IMPORTED_MODULE_9__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _updateRoom__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./updateRoom */ \"(api)/./lib/server/liveblocks/updateRoom.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _updateRoom__WEBPACK_IMPORTED_MODULE_10__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _updateRoom__WEBPACK_IMPORTED_MODULE_10__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTRCO0FBQ0M7QUFDRztBQUNDO0FBQ087QUFDVDtBQUNMO0FBQ0M7QUFDRTtBQUNPO0FBQ1AiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL2xpdmVibG9ja3MvaW5kZXgudHM/OWQ2NiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLi9hdXRob3JpemVcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2NyZWF0ZVJvb21cIjtcbmV4cG9ydCAqIGZyb20gXCIuL2RlbGV0ZVN0b3JhZ2VcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2dldEFjdGl2ZVVzZXJzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9nZXRBY3RpdmVVc2Vyc0luUm9vbXNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2dldE5leHRSb29tc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZ2V0Um9vbVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vZ2V0Um9vbXNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2dldFN0b3JhZ2VcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2luaXRpYWxpemVTdG9yYWdlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi91cGRhdGVSb29tXCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/index.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/initializeStorage.ts":
/*!****************************************************!*\
  !*** ./lib/server/liveblocks/initializeStorage.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initializeStorage: () => (/* binding */ initializeStorage)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n/**\n * Initialize Storage\n *\n * Initialize a room's storage and return the value as a JS object\n * The room must already exist and have an empty storage\n * Uses Liveblocks API\n *\n * @param roomId - The id of the room\n * @param storage - The Liveblocks format storage object to initialize the storage\n */ async function initializeStorage({ roomId, storage }) {\n    const url = `/v2/rooms/${roomId}/storage`;\n    const payload = storage ? JSON.stringify(storage) : undefined;\n    const { data, error } = await (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fetchLiveblocksApi)(url, {\n        method: \"POST\",\n        body: payload\n    });\n    if (error) {\n        return {\n            error\n        };\n    }\n    return {\n        data: data ?? {}\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvaW5pdGlhbGl6ZVN0b3JhZ2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDOEM7QUFPOUM7Ozs7Ozs7OztDQVNDLEdBQ00sZUFBZUMsa0JBQWtCLEVBQ3RDQyxNQUFNLEVBQ05DLE9BQU8sRUFDRDtJQUNOLE1BQU1DLE1BQU0sQ0FBQyxVQUFVLEVBQUVGLE9BQU8sUUFBUSxDQUFDO0lBRXpDLE1BQU1HLFVBQVVGLFVBQVVHLEtBQUtDLFNBQVMsQ0FBQ0osV0FBV0s7SUFFcEQsTUFBTSxFQUFFQyxJQUFJLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1WLDBEQUFrQkEsQ0FBcUJJLEtBQUs7UUFDeEVPLFFBQVE7UUFDUkMsTUFBTVA7SUFDUjtJQUVBLElBQUlLLE9BQU87UUFDVCxPQUFPO1lBQUVBO1FBQU07SUFDakI7SUFFQSxPQUFPO1FBQUVELE1BQU1BLFFBQVEsQ0FBQztJQUFFO0FBQzVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9saXZlYmxvY2tzL2luaXRpYWxpemVTdG9yYWdlLnRzPzlhZmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmV0Y2hBcGlSZXN1bHQsIEdldFN0b3JhZ2VSZXNwb25zZSB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZmV0Y2hMaXZlYmxvY2tzQXBpIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHJvb21JZDogc3RyaW5nO1xuICBzdG9yYWdlPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBTdG9yYWdlXG4gKlxuICogSW5pdGlhbGl6ZSBhIHJvb20ncyBzdG9yYWdlIGFuZCByZXR1cm4gdGhlIHZhbHVlIGFzIGEgSlMgb2JqZWN0XG4gKiBUaGUgcm9vbSBtdXN0IGFscmVhZHkgZXhpc3QgYW5kIGhhdmUgYW4gZW1wdHkgc3RvcmFnZVxuICogVXNlcyBMaXZlYmxvY2tzIEFQSVxuICpcbiAqIEBwYXJhbSByb29tSWQgLSBUaGUgaWQgb2YgdGhlIHJvb21cbiAqIEBwYXJhbSBzdG9yYWdlIC0gVGhlIExpdmVibG9ja3MgZm9ybWF0IHN0b3JhZ2Ugb2JqZWN0IHRvIGluaXRpYWxpemUgdGhlIHN0b3JhZ2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVTdG9yYWdlKHtcbiAgcm9vbUlkLFxuICBzdG9yYWdlLFxufTogUHJvcHMpOiBQcm9taXNlPEZldGNoQXBpUmVzdWx0PEdldFN0b3JhZ2VSZXNwb25zZT4+IHtcbiAgY29uc3QgdXJsID0gYC92Mi9yb29tcy8ke3Jvb21JZH0vc3RvcmFnZWA7XG5cbiAgY29uc3QgcGF5bG9hZCA9IHN0b3JhZ2UgPyBKU09OLnN0cmluZ2lmeShzdG9yYWdlKSA6IHVuZGVmaW5lZDtcblxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBmZXRjaExpdmVibG9ja3NBcGk8R2V0U3RvcmFnZVJlc3BvbnNlPih1cmwsIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIGJvZHk6IHBheWxvYWQsXG4gIH0pO1xuXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiB7IGVycm9yIH07XG4gIH1cblxuICByZXR1cm4geyBkYXRhOiBkYXRhID8/IHt9IH07XG59XG4iXSwibmFtZXMiOlsiZmV0Y2hMaXZlYmxvY2tzQXBpIiwiaW5pdGlhbGl6ZVN0b3JhZ2UiLCJyb29tSWQiLCJzdG9yYWdlIiwidXJsIiwicGF5bG9hZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1bmRlZmluZWQiLCJkYXRhIiwiZXJyb3IiLCJtZXRob2QiLCJib2R5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/initializeStorage.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/updateRoom.ts":
/*!*********************************************!*\
  !*** ./lib/server/liveblocks/updateRoom.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateRoom: () => (/* binding */ updateRoom)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n/**\n * Update Room\n *\n * Get the room by the room's id\n * Uses Liveblocks API\n *\n * @param roomId - The id/name of the room\n * @param metadata - The room's metadata object\n * @param usersAccesses - The room's user accesses\n * @param groupsAccesses - The room's group accesses\n * @param defaultAccesses - The default access value\n */ async function updateRoom({ roomId, metadata, usersAccesses, groupsAccesses, defaultAccesses }) {\n    const url = `/v2/rooms/${roomId}`;\n    let payload = {};\n    if (metadata) {\n        payload = {\n            ...payload,\n            metadata\n        };\n    }\n    if (usersAccesses) {\n        payload = {\n            ...payload,\n            usersAccesses\n        };\n    }\n    if (groupsAccesses) {\n        payload = {\n            ...payload,\n            groupsAccesses\n        };\n    }\n    if (defaultAccesses) {\n        payload = {\n            ...payload,\n            defaultAccesses\n        };\n    }\n    return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fetchLiveblocksApi)(url, {\n        method: \"POST\",\n        body: JSON.stringify(payload)\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvdXBkYXRlUm9vbS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUM4QztBQVU5Qzs7Ozs7Ozs7Ozs7Q0FXQyxHQUNNLGVBQWVDLFdBQVcsRUFDL0JDLE1BQU0sRUFDTkMsUUFBUSxFQUNSQyxhQUFhLEVBQ2JDLGNBQWMsRUFDZEMsZUFBZSxFQUNUO0lBQ04sTUFBTUMsTUFBTSxDQUFDLFVBQVUsRUFBRUwsT0FBTyxDQUFDO0lBRWpDLElBQUlNLFVBQVUsQ0FBQztJQUVmLElBQUlMLFVBQVU7UUFDWkssVUFBVTtZQUFFLEdBQUdBLE9BQU87WUFBRUw7UUFBUztJQUNuQztJQUVBLElBQUlDLGVBQWU7UUFDakJJLFVBQVU7WUFBRSxHQUFHQSxPQUFPO1lBQUVKO1FBQWM7SUFDeEM7SUFFQSxJQUFJQyxnQkFBZ0I7UUFDbEJHLFVBQVU7WUFBRSxHQUFHQSxPQUFPO1lBQUVIO1FBQWU7SUFDekM7SUFFQSxJQUFJQyxpQkFBaUI7UUFDbkJFLFVBQVU7WUFBRSxHQUFHQSxPQUFPO1lBQUVGO1FBQWdCO0lBQzFDO0lBRUEsT0FBT04sMERBQWtCQSxDQUFPTyxLQUFLO1FBQ25DRSxRQUFRO1FBQ1JDLE1BQU1DLEtBQUtDLFNBQVMsQ0FBQ0o7SUFDdkI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvbGl2ZWJsb2Nrcy91cGRhdGVSb29tLnRzP2I3NzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmV0Y2hBcGlSZXN1bHQsIFJvb20gfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGZldGNoTGl2ZWJsb2Nrc0FwaSB9IGZyb20gXCIuLi91dGlsc1wiO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBkZWZhdWx0QWNjZXNzZXM/OiBSb29tW1wiZGVmYXVsdEFjY2Vzc2VzXCJdO1xuICBncm91cHNBY2Nlc3Nlcz86IFJvb21bXCJncm91cHNBY2Nlc3Nlc1wiXTtcbiAgbWV0YWRhdGE/OiBSb29tW1wibWV0YWRhdGFcIl07XG4gIHJvb21JZDogUm9vbVtcImlkXCJdO1xuICB1c2Vyc0FjY2Vzc2VzPzogUm9vbVtcInVzZXJzQWNjZXNzZXNcIl07XG59XG5cbi8qKlxuICogVXBkYXRlIFJvb21cbiAqXG4gKiBHZXQgdGhlIHJvb20gYnkgdGhlIHJvb20ncyBpZFxuICogVXNlcyBMaXZlYmxvY2tzIEFQSVxuICpcbiAqIEBwYXJhbSByb29tSWQgLSBUaGUgaWQvbmFtZSBvZiB0aGUgcm9vbVxuICogQHBhcmFtIG1ldGFkYXRhIC0gVGhlIHJvb20ncyBtZXRhZGF0YSBvYmplY3RcbiAqIEBwYXJhbSB1c2Vyc0FjY2Vzc2VzIC0gVGhlIHJvb20ncyB1c2VyIGFjY2Vzc2VzXG4gKiBAcGFyYW0gZ3JvdXBzQWNjZXNzZXMgLSBUaGUgcm9vbSdzIGdyb3VwIGFjY2Vzc2VzXG4gKiBAcGFyYW0gZGVmYXVsdEFjY2Vzc2VzIC0gVGhlIGRlZmF1bHQgYWNjZXNzIHZhbHVlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVSb29tKHtcbiAgcm9vbUlkLFxuICBtZXRhZGF0YSxcbiAgdXNlcnNBY2Nlc3NlcyxcbiAgZ3JvdXBzQWNjZXNzZXMsXG4gIGRlZmF1bHRBY2Nlc3Nlcyxcbn06IFByb3BzKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDxSb29tPj4ge1xuICBjb25zdCB1cmwgPSBgL3YyL3Jvb21zLyR7cm9vbUlkfWA7XG5cbiAgbGV0IHBheWxvYWQgPSB7fTtcblxuICBpZiAobWV0YWRhdGEpIHtcbiAgICBwYXlsb2FkID0geyAuLi5wYXlsb2FkLCBtZXRhZGF0YSB9O1xuICB9XG5cbiAgaWYgKHVzZXJzQWNjZXNzZXMpIHtcbiAgICBwYXlsb2FkID0geyAuLi5wYXlsb2FkLCB1c2Vyc0FjY2Vzc2VzIH07XG4gIH1cblxuICBpZiAoZ3JvdXBzQWNjZXNzZXMpIHtcbiAgICBwYXlsb2FkID0geyAuLi5wYXlsb2FkLCBncm91cHNBY2Nlc3NlcyB9O1xuICB9XG5cbiAgaWYgKGRlZmF1bHRBY2Nlc3Nlcykge1xuICAgIHBheWxvYWQgPSB7IC4uLnBheWxvYWQsIGRlZmF1bHRBY2Nlc3NlcyB9O1xuICB9XG5cbiAgcmV0dXJuIGZldGNoTGl2ZWJsb2Nrc0FwaTxSb29tPih1cmwsIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLFxuICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJmZXRjaExpdmVibG9ja3NBcGkiLCJ1cGRhdGVSb29tIiwicm9vbUlkIiwibWV0YWRhdGEiLCJ1c2Vyc0FjY2Vzc2VzIiwiZ3JvdXBzQWNjZXNzZXMiLCJkZWZhdWx0QWNjZXNzZXMiLCJ1cmwiLCJwYXlsb2FkIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/updateRoom.ts\n");

/***/ }),

/***/ "(api)/./lib/server/notify/index.ts":
/*!************************************!*\
  !*** ./lib/server/notify/index.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _notify__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./notify */ \"(api)/./lib/server/notify/notify.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _notify__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _notify__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL25vdGlmeS9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUF5QiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvbm90aWZ5L2luZGV4LnRzPzQ5MDIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vbm90aWZ5XCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/notify/index.ts\n");

/***/ }),

/***/ "(api)/./lib/server/notify/notify.ts":
/*!*************************************!*\
  !*** ./lib/server/notify/notify.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   notify: () => (/* binding */ notify)\n/* harmony export */ });\nconst DEFAULT_SENDER = \"noreply@example.com\";\n/**\n * Simulate sending an email to a newly invited user\n * For example with SendGrid:\n * https://github.com/sendgrid/sendgrid-nodejs/tree/main/packages/mail\n * @param to - The email receiver\n * @param [from] - The email sender\n * @param subject - The title of the email\n * @param [text] - The text content of the email\n * @param [html] - The HTML content of the email\n */ async function notify({ to, from = DEFAULT_SENDER, subject, text, html }) {\n    const msg = {\n        to,\n        from,\n        subject,\n        text,\n        html\n    };\n    // Send email message\n    // @sendgrid/mail example:\n    /*\n  try {\n    await sgMail.send(msg);\n  } catch (error) {\n    console.error(error);\n\n    if (error.response) {\n      console.error(error.response.body)\n    }\n  }\n  */ return true;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL25vdGlmeS9ub3RpZnkudHMiLCJtYXBwaW5ncyI6Ijs7OztBQWdCQSxNQUFNQSxpQkFBaUI7QUFFdkI7Ozs7Ozs7OztDQVNDLEdBQ00sZUFBZUMsT0FBTyxFQUMzQkMsRUFBRSxFQUNGQyxPQUFPSCxjQUFjLEVBQ3JCSSxPQUFPLEVBQ1BDLElBQUksRUFDSkMsSUFBSSxFQUNRO0lBQ1osTUFBTUMsTUFBTTtRQUFFTDtRQUFJQztRQUFNQztRQUFTQztRQUFNQztJQUFLO0lBRTVDLHFCQUFxQjtJQUNyQiwwQkFBMEI7SUFDMUI7Ozs7Ozs7Ozs7RUFVQSxHQUVBLE9BQU87QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvbm90aWZ5L25vdGlmeS50cz9jZTJmIl0sInNvdXJjZXNDb250ZW50IjpbInR5cGUgTm90aWZ5Q29udGVudCA9XG4gIHwge1xuICAgICAgaHRtbDogc3RyaW5nO1xuICAgICAgdGV4dD86IG5ldmVyO1xuICAgIH1cbiAgfCB7XG4gICAgICBodG1sPzogbmV2ZXI7XG4gICAgICB0ZXh0OiBzdHJpbmc7XG4gICAgfTtcblxudHlwZSBOb3RpZnlQcm9wcyA9IE5vdGlmeUNvbnRlbnQgJiB7XG4gIGZyb20/OiBzdHJpbmc7XG4gIHN1YmplY3Q6IHN0cmluZztcbiAgdG86IHN0cmluZztcbn07XG5cbmNvbnN0IERFRkFVTFRfU0VOREVSID0gXCJub3JlcGx5QGV4YW1wbGUuY29tXCI7XG5cbi8qKlxuICogU2ltdWxhdGUgc2VuZGluZyBhbiBlbWFpbCB0byBhIG5ld2x5IGludml0ZWQgdXNlclxuICogRm9yIGV4YW1wbGUgd2l0aCBTZW5kR3JpZDpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9zZW5kZ3JpZC9zZW5kZ3JpZC1ub2RlanMvdHJlZS9tYWluL3BhY2thZ2VzL21haWxcbiAqIEBwYXJhbSB0byAtIFRoZSBlbWFpbCByZWNlaXZlclxuICogQHBhcmFtIFtmcm9tXSAtIFRoZSBlbWFpbCBzZW5kZXJcbiAqIEBwYXJhbSBzdWJqZWN0IC0gVGhlIHRpdGxlIG9mIHRoZSBlbWFpbFxuICogQHBhcmFtIFt0ZXh0XSAtIFRoZSB0ZXh0IGNvbnRlbnQgb2YgdGhlIGVtYWlsXG4gKiBAcGFyYW0gW2h0bWxdIC0gVGhlIEhUTUwgY29udGVudCBvZiB0aGUgZW1haWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG5vdGlmeSh7XG4gIHRvLFxuICBmcm9tID0gREVGQVVMVF9TRU5ERVIsXG4gIHN1YmplY3QsXG4gIHRleHQsXG4gIGh0bWwsXG59OiBOb3RpZnlQcm9wcyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBjb25zdCBtc2cgPSB7IHRvLCBmcm9tLCBzdWJqZWN0LCB0ZXh0LCBodG1sIH07XG5cbiAgLy8gU2VuZCBlbWFpbCBtZXNzYWdlXG4gIC8vIEBzZW5kZ3JpZC9tYWlsIGV4YW1wbGU6XG4gIC8qXG4gIHRyeSB7XG4gICAgYXdhaXQgc2dNYWlsLnNlbmQobXNnKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcblxuICAgIGlmIChlcnJvci5yZXNwb25zZSkge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvci5yZXNwb25zZS5ib2R5KVxuICAgIH1cbiAgfVxuICAqL1xuXG4gIHJldHVybiB0cnVlO1xufVxuIl0sIm5hbWVzIjpbIkRFRkFVTFRfU0VOREVSIiwibm90aWZ5IiwidG8iLCJmcm9tIiwic3ViamVjdCIsInRleHQiLCJodG1sIiwibXNnIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/notify/notify.ts\n");

/***/ }),

/***/ "(api)/./lib/server/utils/buildDocumentGroups.ts":
/*!*************************************************!*\
  !*** ./lib/server/utils/buildDocumentGroups.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildDocumentGroups: () => (/* binding */ buildDocumentGroups)\n/* harmony export */ });\n/* harmony import */ var _database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../database */ \"(api)/./lib/server/database/index.ts\");\n/* harmony import */ var _convertAccessType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./convertAccessType */ \"(api)/./lib/server/utils/convertAccessType.ts\");\n\n\n/**\n * Convert a Liveblocks room result into a list of DocumentGroups\n *\n * @param result - Liveblocks getRoomById() result\n */ async function buildDocumentGroups(result) {\n    const groups = [];\n    for (const [id, accessValue] of Object.entries(result.groupsAccesses)){\n        const group = await (0,_database__WEBPACK_IMPORTED_MODULE_0__.getGroup)(id);\n        if (group) {\n            groups.push({\n                ...group,\n                access: (0,_convertAccessType__WEBPACK_IMPORTED_MODULE_1__.roomAccessesToDocumentAccess)(accessValue, false)\n            });\n        }\n    }\n    return groups;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL3V0aWxzL2J1aWxkRG9jdW1lbnRHcm91cHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ3VDO0FBQzRCO0FBRW5FOzs7O0NBSUMsR0FDTSxlQUFlRSxvQkFBb0JDLE1BQVk7SUFDcEQsTUFBTUMsU0FBMEIsRUFBRTtJQUVsQyxLQUFLLE1BQU0sQ0FBQ0MsSUFBSUMsWUFBWSxJQUFJQyxPQUFPQyxPQUFPLENBQUNMLE9BQU9NLGNBQWMsRUFBRztRQUNyRSxNQUFNQyxRQUFRLE1BQU1WLG1EQUFRQSxDQUFDSztRQUU3QixJQUFJSyxPQUFPO1lBQ1ROLE9BQU9PLElBQUksQ0FBQztnQkFDVixHQUFHRCxLQUFLO2dCQUNSRSxRQUFRWCxnRkFBNEJBLENBQUNLLGFBQWE7WUFDcEQ7UUFDRjtJQUNGO0lBRUEsT0FBT0Y7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvdXRpbHMvYnVpbGREb2N1bWVudEdyb3Vwcy50cz9hOWNiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERvY3VtZW50R3JvdXAsIFJvb20gfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGdldEdyb3VwIH0gZnJvbSBcIi4uL2RhdGFiYXNlXCI7XG5pbXBvcnQgeyByb29tQWNjZXNzZXNUb0RvY3VtZW50QWNjZXNzIH0gZnJvbSBcIi4vY29udmVydEFjY2Vzc1R5cGVcIjtcblxuLyoqXG4gKiBDb252ZXJ0IGEgTGl2ZWJsb2NrcyByb29tIHJlc3VsdCBpbnRvIGEgbGlzdCBvZiBEb2N1bWVudEdyb3Vwc1xuICpcbiAqIEBwYXJhbSByZXN1bHQgLSBMaXZlYmxvY2tzIGdldFJvb21CeUlkKCkgcmVzdWx0XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBidWlsZERvY3VtZW50R3JvdXBzKHJlc3VsdDogUm9vbSkge1xuICBjb25zdCBncm91cHM6IERvY3VtZW50R3JvdXBbXSA9IFtdO1xuXG4gIGZvciAoY29uc3QgW2lkLCBhY2Nlc3NWYWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocmVzdWx0Lmdyb3Vwc0FjY2Vzc2VzKSkge1xuICAgIGNvbnN0IGdyb3VwID0gYXdhaXQgZ2V0R3JvdXAoaWQpO1xuXG4gICAgaWYgKGdyb3VwKSB7XG4gICAgICBncm91cHMucHVzaCh7XG4gICAgICAgIC4uLmdyb3VwLFxuICAgICAgICBhY2Nlc3M6IHJvb21BY2Nlc3Nlc1RvRG9jdW1lbnRBY2Nlc3MoYWNjZXNzVmFsdWUsIGZhbHNlKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBncm91cHM7XG59XG4iXSwibmFtZXMiOlsiZ2V0R3JvdXAiLCJyb29tQWNjZXNzZXNUb0RvY3VtZW50QWNjZXNzIiwiYnVpbGREb2N1bWVudEdyb3VwcyIsInJlc3VsdCIsImdyb3VwcyIsImlkIiwiYWNjZXNzVmFsdWUiLCJPYmplY3QiLCJlbnRyaWVzIiwiZ3JvdXBzQWNjZXNzZXMiLCJncm91cCIsInB1c2giLCJhY2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/utils/buildDocumentGroups.ts\n");

/***/ }),

/***/ "(api)/./lib/server/utils/buildDocumentUsers.ts":
/*!************************************************!*\
  !*** ./lib/server/utils/buildDocumentUsers.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildDocumentUsers: () => (/* binding */ buildDocumentUsers)\n/* harmony export */ });\n/* harmony import */ var _database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../database */ \"(api)/./lib/server/database/index.ts\");\n/* harmony import */ var _convertAccessType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./convertAccessType */ \"(api)/./lib/server/utils/convertAccessType.ts\");\n\n\n/**\n * Convert a Liveblocks room result into a list of DocumentUsers\n *\n * @param result - Liveblocks getRoomById() result\n * @param userId - The current user's id\n */ async function buildDocumentUsers(result, userId) {\n    const users = [];\n    for (const [id, accessValue] of Object.entries(result.usersAccesses)){\n        const user = await (0,_database__WEBPACK_IMPORTED_MODULE_0__.getUser)(id);\n        if (user) {\n            users.push({\n                ...user,\n                access: (0,_convertAccessType__WEBPACK_IMPORTED_MODULE_1__.roomAccessesToDocumentAccess)(accessValue, true),\n                isCurrentUser: id === userId\n            });\n        }\n    }\n    return users;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL3V0aWxzL2J1aWxkRG9jdW1lbnRVc2Vycy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFDc0M7QUFDNkI7QUFFbkU7Ozs7O0NBS0MsR0FDTSxlQUFlRSxtQkFBbUJDLE1BQVksRUFBRUMsTUFBYztJQUNuRSxNQUFNQyxRQUF3QixFQUFFO0lBRWhDLEtBQUssTUFBTSxDQUFDQyxJQUFJQyxZQUFZLElBQUlDLE9BQU9DLE9BQU8sQ0FBQ04sT0FBT08sYUFBYSxFQUFHO1FBQ3BFLE1BQU1DLE9BQU8sTUFBTVgsa0RBQU9BLENBQUNNO1FBRTNCLElBQUlLLE1BQU07WUFDUk4sTUFBTU8sSUFBSSxDQUFDO2dCQUNULEdBQUdELElBQUk7Z0JBQ1BFLFFBQVFaLGdGQUE0QkEsQ0FBQ00sYUFBYTtnQkFDbERPLGVBQWVSLE9BQU9GO1lBQ3hCO1FBQ0Y7SUFDRjtJQUVBLE9BQU9DO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL3V0aWxzL2J1aWxkRG9jdW1lbnRVc2Vycy50cz83NGNlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERvY3VtZW50VXNlciwgUm9vbSB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZ2V0VXNlciB9IGZyb20gXCIuLi9kYXRhYmFzZVwiO1xuaW1wb3J0IHsgcm9vbUFjY2Vzc2VzVG9Eb2N1bWVudEFjY2VzcyB9IGZyb20gXCIuL2NvbnZlcnRBY2Nlc3NUeXBlXCI7XG5cbi8qKlxuICogQ29udmVydCBhIExpdmVibG9ja3Mgcm9vbSByZXN1bHQgaW50byBhIGxpc3Qgb2YgRG9jdW1lbnRVc2Vyc1xuICpcbiAqIEBwYXJhbSByZXN1bHQgLSBMaXZlYmxvY2tzIGdldFJvb21CeUlkKCkgcmVzdWx0XG4gKiBAcGFyYW0gdXNlcklkIC0gVGhlIGN1cnJlbnQgdXNlcidzIGlkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBidWlsZERvY3VtZW50VXNlcnMocmVzdWx0OiBSb29tLCB1c2VySWQ6IHN0cmluZykge1xuICBjb25zdCB1c2VyczogRG9jdW1lbnRVc2VyW10gPSBbXTtcblxuICBmb3IgKGNvbnN0IFtpZCwgYWNjZXNzVmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHJlc3VsdC51c2Vyc0FjY2Vzc2VzKSkge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRVc2VyKGlkKTtcblxuICAgIGlmICh1c2VyKSB7XG4gICAgICB1c2Vycy5wdXNoKHtcbiAgICAgICAgLi4udXNlcixcbiAgICAgICAgYWNjZXNzOiByb29tQWNjZXNzZXNUb0RvY3VtZW50QWNjZXNzKGFjY2Vzc1ZhbHVlLCB0cnVlKSxcbiAgICAgICAgaXNDdXJyZW50VXNlcjogaWQgPT09IHVzZXJJZCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB1c2Vycztcbn1cbiJdLCJuYW1lcyI6WyJnZXRVc2VyIiwicm9vbUFjY2Vzc2VzVG9Eb2N1bWVudEFjY2VzcyIsImJ1aWxkRG9jdW1lbnRVc2VycyIsInJlc3VsdCIsInVzZXJJZCIsInVzZXJzIiwiaWQiLCJhY2Nlc3NWYWx1ZSIsIk9iamVjdCIsImVudHJpZXMiLCJ1c2Vyc0FjY2Vzc2VzIiwidXNlciIsInB1c2giLCJhY2Nlc3MiLCJpc0N1cnJlbnRVc2VyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/utils/buildDocumentUsers.ts\n");

/***/ }),

/***/ "(api)/./lib/server/utils/buildDocuments.ts":
/*!********************************************!*\
  !*** ./lib/server/utils/buildDocuments.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildDocument: () => (/* binding */ buildDocument),\n/* harmony export */   buildDocuments: () => (/* binding */ buildDocuments)\n/* harmony export */ });\n/* harmony import */ var _convertAccessType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./convertAccessType */ \"(api)/./lib/server/utils/convertAccessType.ts\");\n\n/**\n * Convert Liveblocks rooms into our custom document format\n *\n * @param rooms - Liveblocks rooms\n */ function buildDocuments(rooms) {\n    if (!rooms) return [];\n    const documents = rooms.map((x)=>{\n        return buildDocument(x);\n    });\n    return documents;\n}\nfunction buildDocument(room) {\n    let name = \"Untitled\";\n    let owner = \"\";\n    let draft = false;\n    // Get document info from metadata\n    const metadata = room.metadata;\n    if (metadata.name) {\n        name = metadata.name;\n    }\n    if (metadata.owner) {\n        owner = metadata.owner;\n    }\n    if (metadata.draft === \"yes\") {\n        draft = true;\n    }\n    // Get default, group, and user access from metadata\n    const defaultAccess = (0,_convertAccessType__WEBPACK_IMPORTED_MODULE_0__.roomAccessesToDocumentAccess)(room.defaultAccesses);\n    const groups = {};\n    Object.entries(room.groupsAccesses).map(([id, accessValue])=>{\n        if (accessValue) {\n            groups[id] = (0,_convertAccessType__WEBPACK_IMPORTED_MODULE_0__.roomAccessesToDocumentAccess)(accessValue);\n        }\n    });\n    const users = {};\n    Object.entries(room.usersAccesses).map(([id, accessValue])=>{\n        if (accessValue) {\n            users[id] = (0,_convertAccessType__WEBPACK_IMPORTED_MODULE_0__.roomAccessesToDocumentAccess)(accessValue);\n        }\n    });\n    // Return our custom Document format\n    const document = {\n        id: room.id,\n        created: (room.createdAt ? new Date(room.createdAt) : new Date()).toString(),\n        lastConnection: new Date(room.lastConnectionAt).toString(),\n        type: metadata.type,\n        name,\n        owner,\n        draft,\n        accesses: {\n            default: defaultAccess,\n            groups: groups,\n            users: users\n        }\n    };\n    return document;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL3V0aWxzL2J1aWxkRG9jdW1lbnRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUNtRTtBQUVuRTs7OztDQUlDLEdBQ00sU0FBU0MsZUFBZUMsS0FBYTtJQUMxQyxJQUFJLENBQUNBLE9BQU8sT0FBTyxFQUFFO0lBRXJCLE1BQU1DLFlBQXdCRCxNQUFNRSxHQUFHLENBQUMsQ0FBQ0M7UUFDdkMsT0FBT0MsY0FBY0Q7SUFDdkI7SUFFQSxPQUFPRjtBQUNUO0FBRU8sU0FBU0csY0FBY0MsSUFBVTtJQUN0QyxJQUFJQyxPQUF5QjtJQUM3QixJQUFJQyxRQUEyQjtJQUMvQixJQUFJQyxRQUEyQjtJQUUvQixrQ0FBa0M7SUFDbEMsTUFBTUMsV0FBaUNKLEtBQUtJLFFBQVE7SUFFcEQsSUFBSUEsU0FBU0gsSUFBSSxFQUFFO1FBQ2pCQSxPQUFPRyxTQUFTSCxJQUFJO0lBQ3RCO0lBRUEsSUFBSUcsU0FBU0YsS0FBSyxFQUFFO1FBQ2xCQSxRQUFRRSxTQUFTRixLQUFLO0lBQ3hCO0lBRUEsSUFBSUUsU0FBU0QsS0FBSyxLQUFLLE9BQU87UUFDNUJBLFFBQVE7SUFDVjtJQUVBLG9EQUFvRDtJQUNwRCxNQUFNRSxnQkFDSlosZ0ZBQTRCQSxDQUFDTyxLQUFLTSxlQUFlO0lBRW5ELE1BQU1DLFNBQXlDLENBQUM7SUFDaERDLE9BQU9DLE9BQU8sQ0FBQ1QsS0FBS1UsY0FBYyxFQUFFYixHQUFHLENBQUMsQ0FBQyxDQUFDYyxJQUFJQyxZQUFZO1FBQ3hELElBQUlBLGFBQWE7WUFDZkwsTUFBTSxDQUFDSSxHQUFHLEdBQUdsQixnRkFBNEJBLENBQUNtQjtRQUM1QztJQUNGO0lBRUEsTUFBTUMsUUFBdUMsQ0FBQztJQUM5Q0wsT0FBT0MsT0FBTyxDQUFDVCxLQUFLYyxhQUFhLEVBQUVqQixHQUFHLENBQUMsQ0FBQyxDQUFDYyxJQUFJQyxZQUFZO1FBQ3ZELElBQUlBLGFBQWE7WUFDZkMsS0FBSyxDQUFDRixHQUFHLEdBQUdsQixnRkFBNEJBLENBQUNtQjtRQUMzQztJQUNGO0lBRUEsb0NBQW9DO0lBQ3BDLE1BQU1HLFdBQXFCO1FBQ3pCSixJQUFJWCxLQUFLVyxFQUFFO1FBQ1hLLFNBQVMsQ0FBQ2hCLEtBQUtpQixTQUFTLEdBQ3BCLElBQUlDLEtBQUtsQixLQUFLaUIsU0FBUyxJQUN2QixJQUFJQyxNQUFLLEVBQ1hDLFFBQVE7UUFDVkMsZ0JBQWdCLElBQUlGLEtBQUtsQixLQUFLcUIsZ0JBQWdCLEVBQUVGLFFBQVE7UUFDeERHLE1BQU1sQixTQUFTa0IsSUFBSTtRQUNuQnJCO1FBQ0FDO1FBQ0FDO1FBQ0FvQixVQUFVO1lBQ1JDLFNBQVNuQjtZQUNURSxRQUFRQTtZQUNSTSxPQUFPQTtRQUNUO0lBQ0Y7SUFFQSxPQUFPRTtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci91dGlscy9idWlsZERvY3VtZW50cy50cz9jZmZhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERvY3VtZW50LCBEb2N1bWVudFJvb21NZXRhZGF0YSwgUm9vbSB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcm9vbUFjY2Vzc2VzVG9Eb2N1bWVudEFjY2VzcyB9IGZyb20gXCIuL2NvbnZlcnRBY2Nlc3NUeXBlXCI7XG5cbi8qKlxuICogQ29udmVydCBMaXZlYmxvY2tzIHJvb21zIGludG8gb3VyIGN1c3RvbSBkb2N1bWVudCBmb3JtYXRcbiAqXG4gKiBAcGFyYW0gcm9vbXMgLSBMaXZlYmxvY2tzIHJvb21zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBidWlsZERvY3VtZW50cyhyb29tczogUm9vbVtdKTogRG9jdW1lbnRbXSB7XG4gIGlmICghcm9vbXMpIHJldHVybiBbXTtcblxuICBjb25zdCBkb2N1bWVudHM6IERvY3VtZW50W10gPSByb29tcy5tYXAoKHgpID0+IHtcbiAgICByZXR1cm4gYnVpbGREb2N1bWVudCh4KTtcbiAgfSk7XG5cbiAgcmV0dXJuIGRvY3VtZW50cztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkRG9jdW1lbnQocm9vbTogUm9vbSk6IERvY3VtZW50IHtcbiAgbGV0IG5hbWU6IERvY3VtZW50W1wibmFtZVwiXSA9IFwiVW50aXRsZWRcIjtcbiAgbGV0IG93bmVyOiBEb2N1bWVudFtcIm93bmVyXCJdID0gXCJcIjtcbiAgbGV0IGRyYWZ0OiBEb2N1bWVudFtcImRyYWZ0XCJdID0gZmFsc2U7XG5cbiAgLy8gR2V0IGRvY3VtZW50IGluZm8gZnJvbSBtZXRhZGF0YVxuICBjb25zdCBtZXRhZGF0YTogRG9jdW1lbnRSb29tTWV0YWRhdGEgPSByb29tLm1ldGFkYXRhO1xuXG4gIGlmIChtZXRhZGF0YS5uYW1lKSB7XG4gICAgbmFtZSA9IG1ldGFkYXRhLm5hbWU7XG4gIH1cblxuICBpZiAobWV0YWRhdGEub3duZXIpIHtcbiAgICBvd25lciA9IG1ldGFkYXRhLm93bmVyO1xuICB9XG5cbiAgaWYgKG1ldGFkYXRhLmRyYWZ0ID09PSBcInllc1wiKSB7XG4gICAgZHJhZnQgPSB0cnVlO1xuICB9XG5cbiAgLy8gR2V0IGRlZmF1bHQsIGdyb3VwLCBhbmQgdXNlciBhY2Nlc3MgZnJvbSBtZXRhZGF0YVxuICBjb25zdCBkZWZhdWx0QWNjZXNzOiBEb2N1bWVudFtcImFjY2Vzc2VzXCJdW1wiZGVmYXVsdFwiXSA9XG4gICAgcm9vbUFjY2Vzc2VzVG9Eb2N1bWVudEFjY2Vzcyhyb29tLmRlZmF1bHRBY2Nlc3Nlcyk7XG5cbiAgY29uc3QgZ3JvdXBzOiBEb2N1bWVudFtcImFjY2Vzc2VzXCJdW1wiZ3JvdXBzXCJdID0ge307XG4gIE9iamVjdC5lbnRyaWVzKHJvb20uZ3JvdXBzQWNjZXNzZXMpLm1hcCgoW2lkLCBhY2Nlc3NWYWx1ZV0pID0+IHtcbiAgICBpZiAoYWNjZXNzVmFsdWUpIHtcbiAgICAgIGdyb3Vwc1tpZF0gPSByb29tQWNjZXNzZXNUb0RvY3VtZW50QWNjZXNzKGFjY2Vzc1ZhbHVlKTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IHVzZXJzOiBEb2N1bWVudFtcImFjY2Vzc2VzXCJdW1widXNlcnNcIl0gPSB7fTtcbiAgT2JqZWN0LmVudHJpZXMocm9vbS51c2Vyc0FjY2Vzc2VzKS5tYXAoKFtpZCwgYWNjZXNzVmFsdWVdKSA9PiB7XG4gICAgaWYgKGFjY2Vzc1ZhbHVlKSB7XG4gICAgICB1c2Vyc1tpZF0gPSByb29tQWNjZXNzZXNUb0RvY3VtZW50QWNjZXNzKGFjY2Vzc1ZhbHVlKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIFJldHVybiBvdXIgY3VzdG9tIERvY3VtZW50IGZvcm1hdFxuICBjb25zdCBkb2N1bWVudDogRG9jdW1lbnQgPSB7XG4gICAgaWQ6IHJvb20uaWQsXG4gICAgY3JlYXRlZDogKHJvb20uY3JlYXRlZEF0XG4gICAgICA/IG5ldyBEYXRlKHJvb20uY3JlYXRlZEF0KVxuICAgICAgOiBuZXcgRGF0ZSgpXG4gICAgKS50b1N0cmluZygpLFxuICAgIGxhc3RDb25uZWN0aW9uOiBuZXcgRGF0ZShyb29tLmxhc3RDb25uZWN0aW9uQXQpLnRvU3RyaW5nKCksXG4gICAgdHlwZTogbWV0YWRhdGEudHlwZSxcbiAgICBuYW1lLFxuICAgIG93bmVyLFxuICAgIGRyYWZ0LFxuICAgIGFjY2Vzc2VzOiB7XG4gICAgICBkZWZhdWx0OiBkZWZhdWx0QWNjZXNzLFxuICAgICAgZ3JvdXBzOiBncm91cHMsXG4gICAgICB1c2VyczogdXNlcnMsXG4gICAgfSxcbiAgfTtcblxuICByZXR1cm4gZG9jdW1lbnQ7XG59XG4iXSwibmFtZXMiOlsicm9vbUFjY2Vzc2VzVG9Eb2N1bWVudEFjY2VzcyIsImJ1aWxkRG9jdW1lbnRzIiwicm9vbXMiLCJkb2N1bWVudHMiLCJtYXAiLCJ4IiwiYnVpbGREb2N1bWVudCIsInJvb20iLCJuYW1lIiwib3duZXIiLCJkcmFmdCIsIm1ldGFkYXRhIiwiZGVmYXVsdEFjY2VzcyIsImRlZmF1bHRBY2Nlc3NlcyIsImdyb3VwcyIsIk9iamVjdCIsImVudHJpZXMiLCJncm91cHNBY2Nlc3NlcyIsImlkIiwiYWNjZXNzVmFsdWUiLCJ1c2VycyIsInVzZXJzQWNjZXNzZXMiLCJkb2N1bWVudCIsImNyZWF0ZWQiLCJjcmVhdGVkQXQiLCJEYXRlIiwidG9TdHJpbmciLCJsYXN0Q29ubmVjdGlvbiIsImxhc3RDb25uZWN0aW9uQXQiLCJ0eXBlIiwiYWNjZXNzZXMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/utils/buildDocuments.ts\n");

/***/ }),

/***/ "(api)/./lib/server/utils/convertAccessType.ts":
/*!***********************************************!*\
  !*** ./lib/server/utils/convertAccessType.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   documentAccessToRoomAccesses: () => (/* binding */ documentAccessToRoomAccesses),\n/* harmony export */   roomAccessesToDocumentAccess: () => (/* binding */ roomAccessesToDocumentAccess)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n\n/**\n * Convert from Liveblocks room accesses to a custom document access format\n * If the user was set on userAccesses, give FULL permissions to edit invited users\n * @param roomAccesses - The room access(es) to check\n * @param setOnUserAccesses - If the user was set with userAccesses or not\n */ function roomAccessesToDocumentAccess(roomAccesses, setOnUserAccesses = false) {\n    if (!roomAccesses) {\n        return _types__WEBPACK_IMPORTED_MODULE_0__.DocumentAccess.NONE;\n    }\n    if (!Array.isArray(roomAccesses)) {\n        roomAccesses = [\n            roomAccesses\n        ];\n    }\n    if (roomAccesses.includes(_types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomWrite)) {\n        return setOnUserAccesses ? _types__WEBPACK_IMPORTED_MODULE_0__.DocumentAccess.FULL : _types__WEBPACK_IMPORTED_MODULE_0__.DocumentAccess.EDIT;\n    }\n    if (roomAccesses.includes(_types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomRead) && roomAccesses.includes(_types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomPresenceWrite)) {\n        return _types__WEBPACK_IMPORTED_MODULE_0__.DocumentAccess.READONLY;\n    }\n    return _types__WEBPACK_IMPORTED_MODULE_0__.DocumentAccess.NONE;\n}\n/**\n * Convert from a custom document access format to native Liveblocks room accesses\n * @param documentAccess\n */ function documentAccessToRoomAccesses(documentAccess) {\n    if (documentAccess === _types__WEBPACK_IMPORTED_MODULE_0__.DocumentAccess.FULL || documentAccess === _types__WEBPACK_IMPORTED_MODULE_0__.DocumentAccess.EDIT) {\n        return [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomWrite\n        ];\n    }\n    if (documentAccess === _types__WEBPACK_IMPORTED_MODULE_0__.DocumentAccess.READONLY) {\n        return [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomRead,\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomPresenceWrite\n        ];\n    }\n    return [];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL3V0aWxzL2NvbnZlcnRBY2Nlc3NUeXBlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE0RDtBQUU1RDs7Ozs7Q0FLQyxHQUNNLFNBQVNFLDZCQUNkQyxZQUE4QyxFQUM5Q0Msb0JBQW9CLEtBQUs7SUFFekIsSUFBSSxDQUFDRCxjQUFjO1FBQ2pCLE9BQU9ILGtEQUFjQSxDQUFDSyxJQUFJO0lBQzVCO0lBRUEsSUFBSSxDQUFDQyxNQUFNQyxPQUFPLENBQUNKLGVBQWU7UUFDaENBLGVBQWU7WUFBQ0E7U0FBYTtJQUMvQjtJQUVBLElBQUlBLGFBQWFLLFFBQVEsQ0FBQ1AsOENBQVVBLENBQUNRLFNBQVMsR0FBRztRQUMvQyxPQUFPTCxvQkFBb0JKLGtEQUFjQSxDQUFDVSxJQUFJLEdBQUdWLGtEQUFjQSxDQUFDVyxJQUFJO0lBQ3RFO0lBRUEsSUFDRVIsYUFBYUssUUFBUSxDQUFDUCw4Q0FBVUEsQ0FBQ1csUUFBUSxLQUN6Q1QsYUFBYUssUUFBUSxDQUFDUCw4Q0FBVUEsQ0FBQ1ksaUJBQWlCLEdBQ2xEO1FBQ0EsT0FBT2Isa0RBQWNBLENBQUNjLFFBQVE7SUFDaEM7SUFFQSxPQUFPZCxrREFBY0EsQ0FBQ0ssSUFBSTtBQUM1QjtBQUVBOzs7Q0FHQyxHQUNNLFNBQVNVLDZCQUNkQyxjQUE4QjtJQUU5QixJQUNFQSxtQkFBbUJoQixrREFBY0EsQ0FBQ1UsSUFBSSxJQUN0Q00sbUJBQW1CaEIsa0RBQWNBLENBQUNXLElBQUksRUFDdEM7UUFDQSxPQUFPO1lBQUNWLDhDQUFVQSxDQUFDUSxTQUFTO1NBQUM7SUFDL0I7SUFFQSxJQUFJTyxtQkFBbUJoQixrREFBY0EsQ0FBQ2MsUUFBUSxFQUFFO1FBQzlDLE9BQU87WUFBQ2IsOENBQVVBLENBQUNXLFFBQVE7WUFBRVgsOENBQVVBLENBQUNZLGlCQUFpQjtTQUFDO0lBQzVEO0lBRUEsT0FBTyxFQUFFO0FBQ1giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL3V0aWxzL2NvbnZlcnRBY2Nlc3NUeXBlLnRzP2VhYjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRG9jdW1lbnRBY2Nlc3MsIFJvb21BY2Nlc3MgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcblxuLyoqXG4gKiBDb252ZXJ0IGZyb20gTGl2ZWJsb2NrcyByb29tIGFjY2Vzc2VzIHRvIGEgY3VzdG9tIGRvY3VtZW50IGFjY2VzcyBmb3JtYXRcbiAqIElmIHRoZSB1c2VyIHdhcyBzZXQgb24gdXNlckFjY2Vzc2VzLCBnaXZlIEZVTEwgcGVybWlzc2lvbnMgdG8gZWRpdCBpbnZpdGVkIHVzZXJzXG4gKiBAcGFyYW0gcm9vbUFjY2Vzc2VzIC0gVGhlIHJvb20gYWNjZXNzKGVzKSB0byBjaGVja1xuICogQHBhcmFtIHNldE9uVXNlckFjY2Vzc2VzIC0gSWYgdGhlIHVzZXIgd2FzIHNldCB3aXRoIHVzZXJBY2Nlc3NlcyBvciBub3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvb21BY2Nlc3Nlc1RvRG9jdW1lbnRBY2Nlc3MoXG4gIHJvb21BY2Nlc3NlczogUm9vbUFjY2VzcyB8IFJvb21BY2Nlc3NbXSB8IG51bGwsXG4gIHNldE9uVXNlckFjY2Vzc2VzID0gZmFsc2Vcbik6IERvY3VtZW50QWNjZXNzIHtcbiAgaWYgKCFyb29tQWNjZXNzZXMpIHtcbiAgICByZXR1cm4gRG9jdW1lbnRBY2Nlc3MuTk9ORTtcbiAgfVxuXG4gIGlmICghQXJyYXkuaXNBcnJheShyb29tQWNjZXNzZXMpKSB7XG4gICAgcm9vbUFjY2Vzc2VzID0gW3Jvb21BY2Nlc3Nlc107XG4gIH1cblxuICBpZiAocm9vbUFjY2Vzc2VzLmluY2x1ZGVzKFJvb21BY2Nlc3MuUm9vbVdyaXRlKSkge1xuICAgIHJldHVybiBzZXRPblVzZXJBY2Nlc3NlcyA/IERvY3VtZW50QWNjZXNzLkZVTEwgOiBEb2N1bWVudEFjY2Vzcy5FRElUO1xuICB9XG5cbiAgaWYgKFxuICAgIHJvb21BY2Nlc3Nlcy5pbmNsdWRlcyhSb29tQWNjZXNzLlJvb21SZWFkKSAmJlxuICAgIHJvb21BY2Nlc3Nlcy5pbmNsdWRlcyhSb29tQWNjZXNzLlJvb21QcmVzZW5jZVdyaXRlKVxuICApIHtcbiAgICByZXR1cm4gRG9jdW1lbnRBY2Nlc3MuUkVBRE9OTFk7XG4gIH1cblxuICByZXR1cm4gRG9jdW1lbnRBY2Nlc3MuTk9ORTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGZyb20gYSBjdXN0b20gZG9jdW1lbnQgYWNjZXNzIGZvcm1hdCB0byBuYXRpdmUgTGl2ZWJsb2NrcyByb29tIGFjY2Vzc2VzXG4gKiBAcGFyYW0gZG9jdW1lbnRBY2Nlc3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRvY3VtZW50QWNjZXNzVG9Sb29tQWNjZXNzZXMoXG4gIGRvY3VtZW50QWNjZXNzOiBEb2N1bWVudEFjY2Vzc1xuKTogUm9vbUFjY2Vzc1tdIHtcbiAgaWYgKFxuICAgIGRvY3VtZW50QWNjZXNzID09PSBEb2N1bWVudEFjY2Vzcy5GVUxMIHx8XG4gICAgZG9jdW1lbnRBY2Nlc3MgPT09IERvY3VtZW50QWNjZXNzLkVESVRcbiAgKSB7XG4gICAgcmV0dXJuIFtSb29tQWNjZXNzLlJvb21Xcml0ZV07XG4gIH1cblxuICBpZiAoZG9jdW1lbnRBY2Nlc3MgPT09IERvY3VtZW50QWNjZXNzLlJFQURPTkxZKSB7XG4gICAgcmV0dXJuIFtSb29tQWNjZXNzLlJvb21SZWFkLCBSb29tQWNjZXNzLlJvb21QcmVzZW5jZVdyaXRlXTtcbiAgfVxuXG4gIHJldHVybiBbXTtcbn1cbiJdLCJuYW1lcyI6WyJEb2N1bWVudEFjY2VzcyIsIlJvb21BY2Nlc3MiLCJyb29tQWNjZXNzZXNUb0RvY3VtZW50QWNjZXNzIiwicm9vbUFjY2Vzc2VzIiwic2V0T25Vc2VyQWNjZXNzZXMiLCJOT05FIiwiQXJyYXkiLCJpc0FycmF5IiwiaW5jbHVkZXMiLCJSb29tV3JpdGUiLCJGVUxMIiwiRURJVCIsIlJvb21SZWFkIiwiUm9vbVByZXNlbmNlV3JpdGUiLCJSRUFET05MWSIsImRvY3VtZW50QWNjZXNzVG9Sb29tQWNjZXNzZXMiLCJkb2N1bWVudEFjY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/utils/convertAccessType.ts\n");

/***/ }),

/***/ "(api)/./lib/server/utils/fetchLiveblocksApi.ts":
/*!************************************************!*\
  !*** ./lib/server/utils/fetchLiveblocksApi.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchLiveblocksApi: () => (/* binding */ fetchLiveblocksApi)\n/* harmony export */ });\n/* harmony import */ var _liveblocks_server_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../liveblocks.server.config */ \"(api)/./liveblocks.server.config.ts\");\n\n/**\n * Fetch Liveblocks API\n *\n * Similar to using normal fetch with the Liveblocks API, with more error checking\n * Add `API_BASE_URL` to `urlEnd`, and `Authorization` header with `SECRET_API_KEY`\n * Uses Liveblocks API\n *\n * @param urlEnd - The part of the URL to attach to the host\n * @param fetchOptions - Fetch options to be used\n */ async function fetchLiveblocksApi(urlEnd, fetchOptions) {\n    if (!_liveblocks_server_config__WEBPACK_IMPORTED_MODULE_0__.SECRET_API_KEY) {\n        return {\n            error: {\n                code: 403,\n                message: \"No API key supplied\",\n                suggestion: \"Try adding your LIVEBLOCKS_SECRET_KEY to your .env.local file\"\n            }\n        };\n    }\n    const url = new URL(urlEnd, _liveblocks_server_config__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_BASE_URL).toString();\n    try {\n        const response = await fetch(url, {\n            headers: new Headers({\n                Authorization: `Bearer ${_liveblocks_server_config__WEBPACK_IMPORTED_MODULE_0__.SECRET_API_KEY}`\n            }),\n            ...fetchOptions\n        });\n        let body;\n        try {\n            body = await response.json();\n        } catch  {\n            body = {};\n        }\n        if (!response.ok) {\n            if (body.error?.code && body.error?.message && body.error?.suggestion) {\n                console.error(body.error);\n                return {\n                    error: body.error\n                };\n            }\n            const customError = customLiveblocksErrors[body.error];\n            if (customError) {\n                console.error(customError);\n                return {\n                    error: customError\n                };\n            }\n            const error = {\n                code: 500,\n                message: `Error when calling ${url}: ${body?.error ?? response.statusText}`,\n                suggestion: \"Please try again\"\n            };\n            console.log(error);\n            return {\n                error\n            };\n        }\n        return {\n            data: body\n        };\n    } catch (err) {\n        if (err?.code && err?.message && err?.suggestion) {\n            console.error(err);\n            return {\n                error: err\n            };\n        }\n        const customError = customLiveblocksErrors[err];\n        if (customError) {\n            console.error(customError);\n            return {\n                error: customError\n            };\n        }\n        const error = {\n            code: 500,\n            message: `Error when calling ${url}`,\n            suggestion: \"Please try again\"\n        };\n        console.error(error);\n        console.error(err);\n        return {\n            error\n        };\n    }\n}\nconst customLiveblocksErrors = {\n    ROOM_NOT_FOUND: {\n        code: 404,\n        message: \"Document not found\",\n        suggestion: \"Please check the URL is correct or the document exists\"\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL3V0aWxzL2ZldGNoTGl2ZWJsb2Nrc0FwaS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUcyQztBQUczQzs7Ozs7Ozs7O0NBU0MsR0FDTSxlQUFlRSxtQkFDcEJDLE1BQWMsRUFDZEMsWUFBMEI7SUFFMUIsSUFBSSxDQUFDSCxxRUFBY0EsRUFBRTtRQUNuQixPQUFPO1lBQ0xJLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQ0U7WUFDSjtRQUNGO0lBQ0Y7SUFFQSxNQUFNQyxNQUFNLElBQUlDLElBQUlQLFFBQVFILHVFQUFnQkEsRUFBRVcsUUFBUTtJQUV0RCxJQUFJO1FBQ0YsTUFBTUMsV0FBVyxNQUFNQyxNQUFNSixLQUFLO1lBQ2hDSyxTQUFTLElBQUlDLFFBQVE7Z0JBQ25CQyxlQUFlLENBQUMsT0FBTyxFQUFFZixxRUFBY0EsQ0FBQyxDQUFDO1lBQzNDO1lBQ0EsR0FBR0csWUFBWTtRQUNqQjtRQUVBLElBQUlhO1FBQ0osSUFBSTtZQUNGQSxPQUFPLE1BQU1MLFNBQVNNLElBQUk7UUFDNUIsRUFBRSxPQUFNO1lBQ05ELE9BQU8sQ0FBQztRQUNWO1FBRUEsSUFBSSxDQUFDTCxTQUFTTyxFQUFFLEVBQUU7WUFDaEIsSUFBSUYsS0FBS1osS0FBSyxFQUFFQyxRQUFRVyxLQUFLWixLQUFLLEVBQUVFLFdBQVdVLEtBQUtaLEtBQUssRUFBRUcsWUFBWTtnQkFDckVZLFFBQVFmLEtBQUssQ0FBQ1ksS0FBS1osS0FBSztnQkFDeEIsT0FBTztvQkFBRUEsT0FBT1ksS0FBS1osS0FBSztnQkFBQztZQUM3QjtZQUVBLE1BQU1nQixjQUFjQyxzQkFBc0IsQ0FBQ0wsS0FBS1osS0FBSyxDQUFDO1lBQ3RELElBQUlnQixhQUFhO2dCQUNmRCxRQUFRZixLQUFLLENBQUNnQjtnQkFDZCxPQUFPO29CQUFFaEIsT0FBT2dCO2dCQUFZO1lBQzlCO1lBRUEsTUFBTWhCLFFBQVE7Z0JBQ1pDLE1BQU07Z0JBQ05DLFNBQVMsQ0FBQyxtQkFBbUIsRUFBRUUsSUFBSSxFQUFFLEVBQ25DUSxNQUFNWixTQUFTTyxTQUFTVyxVQUFVLENBQ25DLENBQUM7Z0JBQ0ZmLFlBQVk7WUFDZDtZQUNBWSxRQUFRSSxHQUFHLENBQUNuQjtZQUNaLE9BQU87Z0JBQUVBO1lBQU07UUFDakI7UUFFQSxPQUFPO1lBQUVvQixNQUFNUjtRQUFLO0lBQ3RCLEVBQUUsT0FBT1MsS0FBVTtRQUNqQixJQUFJQSxLQUFLcEIsUUFBUW9CLEtBQUtuQixXQUFXbUIsS0FBS2xCLFlBQVk7WUFDaERZLFFBQVFmLEtBQUssQ0FBQ3FCO1lBQ2QsT0FBTztnQkFBRXJCLE9BQU9xQjtZQUFpQjtRQUNuQztRQUVBLE1BQU1MLGNBQWNDLHNCQUFzQixDQUFDSSxJQUFJO1FBQy9DLElBQUlMLGFBQWE7WUFDZkQsUUFBUWYsS0FBSyxDQUFDZ0I7WUFDZCxPQUFPO2dCQUFFaEIsT0FBT2dCO1lBQVk7UUFDOUI7UUFFQSxNQUFNaEIsUUFBbUI7WUFDdkJDLE1BQU07WUFDTkMsU0FBUyxDQUFDLG1CQUFtQixFQUFFRSxJQUFJLENBQUM7WUFDcENELFlBQVk7UUFDZDtRQUNBWSxRQUFRZixLQUFLLENBQUNBO1FBQ2RlLFFBQVFmLEtBQUssQ0FBQ3FCO1FBQ2QsT0FBTztZQUFFckI7UUFBTTtJQUNqQjtBQUNGO0FBRUEsTUFBTWlCLHlCQUFvRDtJQUN4REssZ0JBQWdCO1FBQ2RyQixNQUFNO1FBQ05DLFNBQVM7UUFDVEMsWUFBWTtJQUNkO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL3V0aWxzL2ZldGNoTGl2ZWJsb2Nrc0FwaS50cz8zZTI1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIERFRkFVTFRfQkFTRV9VUkwsXG4gIFNFQ1JFVF9BUElfS0VZLFxufSBmcm9tIFwiLi4vLi4vLi4vbGl2ZWJsb2Nrcy5zZXJ2ZXIuY29uZmlnXCI7XG5pbXBvcnQgeyBFcnJvckRhdGEsIEZldGNoQXBpUmVzdWx0IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5cbi8qKlxuICogRmV0Y2ggTGl2ZWJsb2NrcyBBUElcbiAqXG4gKiBTaW1pbGFyIHRvIHVzaW5nIG5vcm1hbCBmZXRjaCB3aXRoIHRoZSBMaXZlYmxvY2tzIEFQSSwgd2l0aCBtb3JlIGVycm9yIGNoZWNraW5nXG4gKiBBZGQgYEFQSV9CQVNFX1VSTGAgdG8gYHVybEVuZGAsIGFuZCBgQXV0aG9yaXphdGlvbmAgaGVhZGVyIHdpdGggYFNFQ1JFVF9BUElfS0VZYFxuICogVXNlcyBMaXZlYmxvY2tzIEFQSVxuICpcbiAqIEBwYXJhbSB1cmxFbmQgLSBUaGUgcGFydCBvZiB0aGUgVVJMIHRvIGF0dGFjaCB0byB0aGUgaG9zdFxuICogQHBhcmFtIGZldGNoT3B0aW9ucyAtIEZldGNoIG9wdGlvbnMgdG8gYmUgdXNlZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hMaXZlYmxvY2tzQXBpPFQgPSB1bmtub3duPihcbiAgdXJsRW5kOiBzdHJpbmcsXG4gIGZldGNoT3B0aW9ucz86IFJlcXVlc3RJbml0XG4pOiBQcm9taXNlPEZldGNoQXBpUmVzdWx0PFQ+PiB7XG4gIGlmICghU0VDUkVUX0FQSV9LRVkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDAzLFxuICAgICAgICBtZXNzYWdlOiBcIk5vIEFQSSBrZXkgc3VwcGxpZWRcIixcbiAgICAgICAgc3VnZ2VzdGlvbjpcbiAgICAgICAgICBcIlRyeSBhZGRpbmcgeW91ciBMSVZFQkxPQ0tTX1NFQ1JFVF9LRVkgdG8geW91ciAuZW52LmxvY2FsIGZpbGVcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IHVybCA9IG5ldyBVUkwodXJsRW5kLCBERUZBVUxUX0JBU0VfVVJMKS50b1N0cmluZygpO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke1NFQ1JFVF9BUElfS0VZfWAsXG4gICAgICB9KSxcbiAgICAgIC4uLmZldGNoT3B0aW9ucyxcbiAgICB9KTtcblxuICAgIGxldCBib2R5O1xuICAgIHRyeSB7XG4gICAgICBib2R5ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgYm9keSA9IHt9O1xuICAgIH1cblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGlmIChib2R5LmVycm9yPy5jb2RlICYmIGJvZHkuZXJyb3I/Lm1lc3NhZ2UgJiYgYm9keS5lcnJvcj8uc3VnZ2VzdGlvbikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGJvZHkuZXJyb3IpO1xuICAgICAgICByZXR1cm4geyBlcnJvcjogYm9keS5lcnJvciB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjdXN0b21FcnJvciA9IGN1c3RvbUxpdmVibG9ja3NFcnJvcnNbYm9keS5lcnJvcl07XG4gICAgICBpZiAoY3VzdG9tRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihjdXN0b21FcnJvcik7XG4gICAgICAgIHJldHVybiB7IGVycm9yOiBjdXN0b21FcnJvciB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBlcnJvciA9IHtcbiAgICAgICAgY29kZTogNTAwLFxuICAgICAgICBtZXNzYWdlOiBgRXJyb3Igd2hlbiBjYWxsaW5nICR7dXJsfTogJHtcbiAgICAgICAgICBib2R5Py5lcnJvciA/PyByZXNwb25zZS5zdGF0dXNUZXh0XG4gICAgICAgIH1gLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIlBsZWFzZSB0cnkgYWdhaW5cIixcbiAgICAgIH07XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICByZXR1cm4geyBlcnJvciB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IGRhdGE6IGJvZHkgfTtcbiAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICBpZiAoZXJyPy5jb2RlICYmIGVycj8ubWVzc2FnZSAmJiBlcnI/LnN1Z2dlc3Rpb24pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIHJldHVybiB7IGVycm9yOiBlcnIgYXMgRXJyb3JEYXRhIH07XG4gICAgfVxuXG4gICAgY29uc3QgY3VzdG9tRXJyb3IgPSBjdXN0b21MaXZlYmxvY2tzRXJyb3JzW2Vycl07XG4gICAgaWYgKGN1c3RvbUVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGN1c3RvbUVycm9yKTtcbiAgICAgIHJldHVybiB7IGVycm9yOiBjdXN0b21FcnJvciB9O1xuICAgIH1cblxuICAgIGNvbnN0IGVycm9yOiBFcnJvckRhdGEgPSB7XG4gICAgICBjb2RlOiA1MDAsXG4gICAgICBtZXNzYWdlOiBgRXJyb3Igd2hlbiBjYWxsaW5nICR7dXJsfWAsXG4gICAgICBzdWdnZXN0aW9uOiBcIlBsZWFzZSB0cnkgYWdhaW5cIixcbiAgICB9O1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICByZXR1cm4geyBlcnJvciB9O1xuICB9XG59XG5cbmNvbnN0IGN1c3RvbUxpdmVibG9ja3NFcnJvcnM6IFJlY29yZDxzdHJpbmcsIEVycm9yRGF0YT4gPSB7XG4gIFJPT01fTk9UX0ZPVU5EOiB7XG4gICAgY29kZTogNDA0LFxuICAgIG1lc3NhZ2U6IFwiRG9jdW1lbnQgbm90IGZvdW5kXCIsXG4gICAgc3VnZ2VzdGlvbjogXCJQbGVhc2UgY2hlY2sgdGhlIFVSTCBpcyBjb3JyZWN0IG9yIHRoZSBkb2N1bWVudCBleGlzdHNcIixcbiAgfSxcbn07XG4iXSwibmFtZXMiOlsiREVGQVVMVF9CQVNFX1VSTCIsIlNFQ1JFVF9BUElfS0VZIiwiZmV0Y2hMaXZlYmxvY2tzQXBpIiwidXJsRW5kIiwiZmV0Y2hPcHRpb25zIiwiZXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsInN1Z2dlc3Rpb24iLCJ1cmwiLCJVUkwiLCJ0b1N0cmluZyIsInJlc3BvbnNlIiwiZmV0Y2giLCJoZWFkZXJzIiwiSGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJib2R5IiwianNvbiIsIm9rIiwiY29uc29sZSIsImN1c3RvbUVycm9yIiwiY3VzdG9tTGl2ZWJsb2Nrc0Vycm9ycyIsInN0YXR1c1RleHQiLCJsb2ciLCJkYXRhIiwiZXJyIiwiUk9PTV9OT1RfRk9VTkQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/utils/fetchLiveblocksApi.ts\n");

/***/ }),

/***/ "(api)/./lib/server/utils/getDraftsGroupName.ts":
/*!************************************************!*\
  !*** ./lib/server/utils/getDraftsGroupName.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DRAFTS_PREFIX: () => (/* binding */ DRAFTS_PREFIX),\n/* harmony export */   getDraftsGroupName: () => (/* binding */ getDraftsGroupName)\n/* harmony export */ });\nconst DRAFTS_PREFIX = \"__drafts-group__\";\n/**\n * Drafts are stored as a group that uses the user's id\n * @param userId\n */ function getDraftsGroupName(userId) {\n    return `${DRAFTS_PREFIX}${userId}`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL3V0aWxzL2dldERyYWZ0c0dyb3VwTmFtZS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFPLE1BQU1BLGdCQUFnQixtQkFBbUI7QUFFaEQ7OztDQUdDLEdBQ00sU0FBU0MsbUJBQW1CQyxNQUFjO0lBQy9DLE9BQU8sQ0FBQyxFQUFFRixjQUFjLEVBQUVFLE9BQU8sQ0FBQztBQUNwQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvdXRpbHMvZ2V0RHJhZnRzR3JvdXBOYW1lLnRzPzkzM2MiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IERSQUZUU19QUkVGSVggPSBcIl9fZHJhZnRzLWdyb3VwX19cIjtcblxuLyoqXG4gKiBEcmFmdHMgYXJlIHN0b3JlZCBhcyBhIGdyb3VwIHRoYXQgdXNlcyB0aGUgdXNlcidzIGlkXG4gKiBAcGFyYW0gdXNlcklkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREcmFmdHNHcm91cE5hbWUodXNlcklkOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGAke0RSQUZUU19QUkVGSVh9JHt1c2VySWR9YDtcbn1cbiJdLCJuYW1lcyI6WyJEUkFGVFNfUFJFRklYIiwiZ2V0RHJhZnRzR3JvdXBOYW1lIiwidXNlcklkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/utils/getDraftsGroupName.ts\n");

/***/ }),

/***/ "(api)/./lib/server/utils/getRandom.ts":
/*!***************************************!*\
  !*** ./lib/server/utils/getRandom.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getRandom: () => (/* binding */ getRandom)\n/* harmony export */ });\nfunction hashCode(string) {\n    let hash = 0;\n    if (string.length > 0) {\n        let index = 0;\n        while(index < string.length){\n            hash = (hash << 5) - hash + string.charCodeAt(index++) | 0;\n        }\n    }\n    return hash;\n}\nfunction getRandom(array, seed) {\n    const index = seed ? Math.abs(hashCode(seed)) % array.length : Math.floor(Math.random() * array.length);\n    return array[index];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL3V0aWxzL2dldFJhbmRvbS50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsU0FBU0EsU0FBU0MsTUFBYztJQUM5QixJQUFJQyxPQUFPO0lBRVgsSUFBSUQsT0FBT0UsTUFBTSxHQUFHLEdBQUc7UUFDckIsSUFBSUMsUUFBUTtRQUVaLE1BQU9BLFFBQVFILE9BQU9FLE1BQU0sQ0FBRTtZQUM1QkQsT0FBTyxDQUFFQSxRQUFRLEtBQUtBLE9BQU9ELE9BQU9JLFVBQVUsQ0FBQ0QsV0FBWTtRQUM3RDtJQUNGO0lBRUEsT0FBT0Y7QUFDVDtBQUVPLFNBQVNJLFVBQWFDLEtBQVUsRUFBRUMsSUFBYTtJQUNwRCxNQUFNSixRQUFRSSxPQUNWQyxLQUFLQyxHQUFHLENBQUNWLFNBQVNRLFNBQVNELE1BQU1KLE1BQU0sR0FDdkNNLEtBQUtFLEtBQUssQ0FBQ0YsS0FBS0csTUFBTSxLQUFLTCxNQUFNSixNQUFNO0lBRTNDLE9BQU9JLEtBQUssQ0FBQ0gsTUFBTTtBQUNyQiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvdXRpbHMvZ2V0UmFuZG9tLnRzP2QzYTciXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gaGFzaENvZGUoc3RyaW5nOiBzdHJpbmcpIHtcbiAgbGV0IGhhc2ggPSAwO1xuXG4gIGlmIChzdHJpbmcubGVuZ3RoID4gMCkge1xuICAgIGxldCBpbmRleCA9IDA7XG5cbiAgICB3aGlsZSAoaW5kZXggPCBzdHJpbmcubGVuZ3RoKSB7XG4gICAgICBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCArIHN0cmluZy5jaGFyQ29kZUF0KGluZGV4KyspKSB8IDA7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGhhc2g7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSYW5kb208VD4oYXJyYXk6IFRbXSwgc2VlZD86IHN0cmluZyk6IFQge1xuICBjb25zdCBpbmRleCA9IHNlZWRcbiAgICA/IE1hdGguYWJzKGhhc2hDb2RlKHNlZWQpKSAlIGFycmF5Lmxlbmd0aFxuICAgIDogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXJyYXkubGVuZ3RoKTtcblxuICByZXR1cm4gYXJyYXlbaW5kZXhdO1xufVxuIl0sIm5hbWVzIjpbImhhc2hDb2RlIiwic3RyaW5nIiwiaGFzaCIsImxlbmd0aCIsImluZGV4IiwiY2hhckNvZGVBdCIsImdldFJhbmRvbSIsImFycmF5Iiwic2VlZCIsIk1hdGgiLCJhYnMiLCJmbG9vciIsInJhbmRvbSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/utils/getRandom.ts\n");

/***/ }),

/***/ "(api)/./lib/server/utils/index.ts":
/*!***********************************!*\
  !*** ./lib/server/utils/index.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _buildDocuments__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./buildDocuments */ \"(api)/./lib/server/utils/buildDocuments.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _buildDocuments__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _buildDocuments__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _buildDocumentGroups__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./buildDocumentGroups */ \"(api)/./lib/server/utils/buildDocumentGroups.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _buildDocumentGroups__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _buildDocumentGroups__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _buildDocumentUsers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./buildDocumentUsers */ \"(api)/./lib/server/utils/buildDocumentUsers.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _buildDocumentUsers__WEBPACK_IMPORTED_MODULE_2__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _buildDocumentUsers__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _convertAccessType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./convertAccessType */ \"(api)/./lib/server/utils/convertAccessType.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _convertAccessType__WEBPACK_IMPORTED_MODULE_3__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _convertAccessType__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getDraftsGroupName__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./getDraftsGroupName */ \"(api)/./lib/server/utils/getDraftsGroupName.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getDraftsGroupName__WEBPACK_IMPORTED_MODULE_4__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getDraftsGroupName__WEBPACK_IMPORTED_MODULE_4__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getRandom__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./getRandom */ \"(api)/./lib/server/utils/getRandom.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getRandom__WEBPACK_IMPORTED_MODULE_5__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getRandom__WEBPACK_IMPORTED_MODULE_5__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _fetchLiveblocksApi__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./fetchLiveblocksApi */ \"(api)/./lib/server/utils/fetchLiveblocksApi.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _fetchLiveblocksApi__WEBPACK_IMPORTED_MODULE_6__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _fetchLiveblocksApi__WEBPACK_IMPORTED_MODULE_6__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _isUserDocumentOwner__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./isUserDocumentOwner */ \"(api)/./lib/server/utils/isUserDocumentOwner.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _isUserDocumentOwner__WEBPACK_IMPORTED_MODULE_7__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _isUserDocumentOwner__WEBPACK_IMPORTED_MODULE_7__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _userAllowedInRooms__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./userAllowedInRooms */ \"(api)/./lib/server/utils/userAllowedInRooms.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _userAllowedInRooms__WEBPACK_IMPORTED_MODULE_8__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _userAllowedInRooms__WEBPACK_IMPORTED_MODULE_8__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL3V0aWxzL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUM7QUFDSztBQUNEO0FBQ0Q7QUFDQztBQUNUO0FBQ1M7QUFDQztBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci91dGlscy9pbmRleC50cz8zZWVhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gXCIuL2J1aWxkRG9jdW1lbnRzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9idWlsZERvY3VtZW50R3JvdXBzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9idWlsZERvY3VtZW50VXNlcnNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2NvbnZlcnRBY2Nlc3NUeXBlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9nZXREcmFmdHNHcm91cE5hbWVcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2dldFJhbmRvbVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vZmV0Y2hMaXZlYmxvY2tzQXBpXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9pc1VzZXJEb2N1bWVudE93bmVyXCI7XG5leHBvcnQgKiBmcm9tIFwiLi91c2VyQWxsb3dlZEluUm9vbXNcIjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/utils/index.ts\n");

/***/ }),

/***/ "(api)/./lib/server/utils/isUserDocumentOwner.ts":
/*!*************************************************!*\
  !*** ./lib/server/utils/isUserDocumentOwner.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isUserDocumentOwner: () => (/* binding */ isUserDocumentOwner)\n/* harmony export */ });\n/**\n * Returns true if owner is set on room, and owner is equal to userId\n *\n * @param room - The room to test\n * @param userId - The user's id to check\n */ function isUserDocumentOwner({ room, userId }) {\n    if (!room?.metadata?.owner) {\n        return false;\n    }\n    const owner = Array.isArray(room.metadata.owner) ? room.metadata.owner[0] : room.metadata.owner;\n    return owner === userId;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL3V0aWxzL2lzVXNlckRvY3VtZW50T3duZXIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQU9BOzs7OztDQUtDLEdBQ00sU0FBU0Esb0JBQW9CLEVBQ2xDQyxJQUFJLEVBQ0pDLE1BQU0sRUFDbUI7SUFDekIsSUFBSSxDQUFDRCxNQUFNRSxVQUFVQyxPQUFPO1FBQzFCLE9BQU87SUFDVDtJQUVBLE1BQU1BLFFBQVFDLE1BQU1DLE9BQU8sQ0FBQ0wsS0FBS0UsUUFBUSxDQUFDQyxLQUFLLElBQzNDSCxLQUFLRSxRQUFRLENBQUNDLEtBQUssQ0FBQyxFQUFFLEdBQ3RCSCxLQUFLRSxRQUFRLENBQUNDLEtBQUs7SUFFdkIsT0FBT0EsVUFBVUY7QUFDbkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL3V0aWxzL2lzVXNlckRvY3VtZW50T3duZXIudHM/YWRjZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEb2N1bWVudFVzZXIsIFJvb20gfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcblxuaW50ZXJmYWNlIElzVXNlckRvY3VtZW50T3duZXJQcm9wcyB7XG4gIHJvb206IFJvb207XG4gIHVzZXJJZDogRG9jdW1lbnRVc2VyW1wiaWRcIl07XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIG93bmVyIGlzIHNldCBvbiByb29tLCBhbmQgb3duZXIgaXMgZXF1YWwgdG8gdXNlcklkXG4gKlxuICogQHBhcmFtIHJvb20gLSBUaGUgcm9vbSB0byB0ZXN0XG4gKiBAcGFyYW0gdXNlcklkIC0gVGhlIHVzZXIncyBpZCB0byBjaGVja1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNVc2VyRG9jdW1lbnRPd25lcih7XG4gIHJvb20sXG4gIHVzZXJJZCxcbn06IElzVXNlckRvY3VtZW50T3duZXJQcm9wcyk6IGJvb2xlYW4ge1xuICBpZiAoIXJvb20/Lm1ldGFkYXRhPy5vd25lcikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGNvbnN0IG93bmVyID0gQXJyYXkuaXNBcnJheShyb29tLm1ldGFkYXRhLm93bmVyKVxuICAgID8gcm9vbS5tZXRhZGF0YS5vd25lclswXVxuICAgIDogcm9vbS5tZXRhZGF0YS5vd25lcjtcblxuICByZXR1cm4gb3duZXIgPT09IHVzZXJJZDtcbn1cbiJdLCJuYW1lcyI6WyJpc1VzZXJEb2N1bWVudE93bmVyIiwicm9vbSIsInVzZXJJZCIsIm1ldGFkYXRhIiwib3duZXIiLCJBcnJheSIsImlzQXJyYXkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/utils/isUserDocumentOwner.ts\n");

/***/ }),

/***/ "(api)/./lib/server/utils/userAllowedInRooms.ts":
/*!************************************************!*\
  !*** ./lib/server/utils/userAllowedInRooms.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   userAllowedInRoom: () => (/* binding */ userAllowedInRoom),\n/* harmony export */   userAllowedInRooms: () => (/* binding */ userAllowedInRooms)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n\n/**\n * Returns true if a user has any of the allowed accesses in every room\n * @param accessesAllowed - Each of these permission types is checked\n * @param userId - The user's id to check\n * @param groupIds - An array of group names the user is part of\n * @param rooms - A list of rooms returned from Liveblocks APIs\n * @param [checkAccessLevels] - Check permission on only these access levels\n */ function userAllowedInRooms({ accessesAllowed, userId, groupIds, rooms, checkAccessLevels }) {\n    return rooms.every((room)=>userAllowedInRoom({\n            accessesAllowed,\n            userId,\n            groupIds,\n            checkAccessLevels,\n            room\n        }));\n}\n/**\n * Returns true if a user has any of the allowed accesses in the room\n * @param accessesAllowed - Each of these permission types is checked\n * @param userId - The user's id to check\n * @param groupIds - An array of group names the user is part of\n * @param room - A room returned from Liveblocks APIs\n * @param [checkAccessLevels] - Check permission on only these access levels\n */ function userAllowedInRoom({ accessesAllowed, userId, groupIds, room, checkAccessLevels = [\n    ...Object.values(_types__WEBPACK_IMPORTED_MODULE_0__.RoomAccessLevels)\n] }) {\n    for (const access of accessesAllowed){\n        // User access is set\n        if (checkAccessLevels.includes(_types__WEBPACK_IMPORTED_MODULE_0__.RoomAccessLevels.USER)) {\n            // User is owner\n            if (room.metadata.owner === userId) {\n                return true;\n            }\n            if (room.usersAccesses?.[userId]?.includes(access)) {\n                return true;\n            }\n        }\n        // A group access is set\n        if (checkAccessLevels.includes(_types__WEBPACK_IMPORTED_MODULE_0__.RoomAccessLevels.GROUP)) {\n            for (const groupId of groupIds){\n                if (room.groupsAccesses?.[groupId]?.includes(access)) {\n                    return true;\n                }\n            }\n        }\n        // Default access is set\n        if (checkAccessLevels.includes(_types__WEBPACK_IMPORTED_MODULE_0__.RoomAccessLevels.DEFAULT) && room.defaultAccesses.includes(access)) {\n            return true;\n        }\n    }\n    return false;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL3V0aWxzL3VzZXJBbGxvd2VkSW5Sb29tcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBb0U7QUFpQnBFOzs7Ozs7O0NBT0MsR0FDTSxTQUFTQyxtQkFBbUIsRUFDakNDLGVBQWUsRUFDZkMsTUFBTSxFQUNOQyxRQUFRLEVBQ1JDLEtBQUssRUFDTEMsaUJBQWlCLEVBQ087SUFDeEIsT0FBT0QsTUFBTUUsS0FBSyxDQUFDLENBQUNDLE9BQ2xCQyxrQkFBa0I7WUFDaEJQO1lBQ0FDO1lBQ0FDO1lBQ0FFO1lBQ0FFO1FBQ0Y7QUFFSjtBQUVBOzs7Ozs7O0NBT0MsR0FFTSxTQUFTQyxrQkFBa0IsRUFDaENQLGVBQWUsRUFDZkMsTUFBTSxFQUNOQyxRQUFRLEVBQ1JJLElBQUksRUFDSkYsb0JBQW9CO09BQUlJLE9BQU9DLE1BQU0sQ0FBQ1gsb0RBQWdCQTtDQUFFLEVBQ2pDO0lBQ3ZCLEtBQUssTUFBTVksVUFBVVYsZ0JBQWlCO1FBQ3BDLHFCQUFxQjtRQUNyQixJQUFJSSxrQkFBa0JPLFFBQVEsQ0FBQ2Isb0RBQWdCQSxDQUFDYyxJQUFJLEdBQUc7WUFDckQsZ0JBQWdCO1lBQ2hCLElBQUlOLEtBQUtPLFFBQVEsQ0FBQ0MsS0FBSyxLQUFLYixRQUFRO2dCQUNsQyxPQUFPO1lBQ1Q7WUFFQSxJQUFJSyxLQUFLUyxhQUFhLEVBQUUsQ0FBQ2QsT0FBTyxFQUFFVSxTQUFTRCxTQUFTO2dCQUNsRCxPQUFPO1lBQ1Q7UUFDRjtRQUVBLHdCQUF3QjtRQUN4QixJQUFJTixrQkFBa0JPLFFBQVEsQ0FBQ2Isb0RBQWdCQSxDQUFDa0IsS0FBSyxHQUFHO1lBQ3RELEtBQUssTUFBTUMsV0FBV2YsU0FBVTtnQkFDOUIsSUFBSUksS0FBS1ksY0FBYyxFQUFFLENBQUNELFFBQVEsRUFBRU4sU0FBU0QsU0FBUztvQkFDcEQsT0FBTztnQkFDVDtZQUNGO1FBQ0Y7UUFFQSx3QkFBd0I7UUFDeEIsSUFDRU4sa0JBQWtCTyxRQUFRLENBQUNiLG9EQUFnQkEsQ0FBQ3FCLE9BQU8sS0FDbkRiLEtBQUtjLGVBQWUsQ0FBQ1QsUUFBUSxDQUFDRCxTQUM5QjtZQUNBLE9BQU87UUFDVDtJQUNGO0lBRUEsT0FBTztBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci91dGlscy91c2VyQWxsb3dlZEluUm9vbXMudHM/NzZlOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb29tLCBSb29tQWNjZXNzLCBSb29tQWNjZXNzTGV2ZWxzIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5cbmludGVyZmFjZSBVc2VyQWNjZXNzUHJvcHMge1xuICBhY2Nlc3Nlc0FsbG93ZWQ6IFJvb21BY2Nlc3NbXTtcbiAgY2hlY2tBY2Nlc3NMZXZlbHM/OiBSb29tQWNjZXNzTGV2ZWxzW107XG4gIGdyb3VwSWRzOiBzdHJpbmdbXTtcbiAgdXNlcklkOiBzdHJpbmc7XG59XG5cbnR5cGUgVXNlckFsbG93ZWRJblJvb21Qcm9wcyA9IFVzZXJBY2Nlc3NQcm9wcyAmIHtcbiAgcm9vbTogUm9vbTtcbn07XG5cbnR5cGUgVXNlckFsbG93ZWRJblJvb21zUHJvcHMgPSBVc2VyQWNjZXNzUHJvcHMgJiB7XG4gIHJvb21zOiBSb29tW107XG59O1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBhIHVzZXIgaGFzIGFueSBvZiB0aGUgYWxsb3dlZCBhY2Nlc3NlcyBpbiBldmVyeSByb29tXG4gKiBAcGFyYW0gYWNjZXNzZXNBbGxvd2VkIC0gRWFjaCBvZiB0aGVzZSBwZXJtaXNzaW9uIHR5cGVzIGlzIGNoZWNrZWRcbiAqIEBwYXJhbSB1c2VySWQgLSBUaGUgdXNlcidzIGlkIHRvIGNoZWNrXG4gKiBAcGFyYW0gZ3JvdXBJZHMgLSBBbiBhcnJheSBvZiBncm91cCBuYW1lcyB0aGUgdXNlciBpcyBwYXJ0IG9mXG4gKiBAcGFyYW0gcm9vbXMgLSBBIGxpc3Qgb2Ygcm9vbXMgcmV0dXJuZWQgZnJvbSBMaXZlYmxvY2tzIEFQSXNcbiAqIEBwYXJhbSBbY2hlY2tBY2Nlc3NMZXZlbHNdIC0gQ2hlY2sgcGVybWlzc2lvbiBvbiBvbmx5IHRoZXNlIGFjY2VzcyBsZXZlbHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZXJBbGxvd2VkSW5Sb29tcyh7XG4gIGFjY2Vzc2VzQWxsb3dlZCxcbiAgdXNlcklkLFxuICBncm91cElkcyxcbiAgcm9vbXMsXG4gIGNoZWNrQWNjZXNzTGV2ZWxzLFxufTogVXNlckFsbG93ZWRJblJvb21zUHJvcHMpIHtcbiAgcmV0dXJuIHJvb21zLmV2ZXJ5KChyb29tKSA9PlxuICAgIHVzZXJBbGxvd2VkSW5Sb29tKHtcbiAgICAgIGFjY2Vzc2VzQWxsb3dlZCxcbiAgICAgIHVzZXJJZCxcbiAgICAgIGdyb3VwSWRzLFxuICAgICAgY2hlY2tBY2Nlc3NMZXZlbHMsXG4gICAgICByb29tLFxuICAgIH0pXG4gICk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGEgdXNlciBoYXMgYW55IG9mIHRoZSBhbGxvd2VkIGFjY2Vzc2VzIGluIHRoZSByb29tXG4gKiBAcGFyYW0gYWNjZXNzZXNBbGxvd2VkIC0gRWFjaCBvZiB0aGVzZSBwZXJtaXNzaW9uIHR5cGVzIGlzIGNoZWNrZWRcbiAqIEBwYXJhbSB1c2VySWQgLSBUaGUgdXNlcidzIGlkIHRvIGNoZWNrXG4gKiBAcGFyYW0gZ3JvdXBJZHMgLSBBbiBhcnJheSBvZiBncm91cCBuYW1lcyB0aGUgdXNlciBpcyBwYXJ0IG9mXG4gKiBAcGFyYW0gcm9vbSAtIEEgcm9vbSByZXR1cm5lZCBmcm9tIExpdmVibG9ja3MgQVBJc1xuICogQHBhcmFtIFtjaGVja0FjY2Vzc0xldmVsc10gLSBDaGVjayBwZXJtaXNzaW9uIG9uIG9ubHkgdGhlc2UgYWNjZXNzIGxldmVsc1xuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VyQWxsb3dlZEluUm9vbSh7XG4gIGFjY2Vzc2VzQWxsb3dlZCxcbiAgdXNlcklkLFxuICBncm91cElkcyxcbiAgcm9vbSxcbiAgY2hlY2tBY2Nlc3NMZXZlbHMgPSBbLi4uT2JqZWN0LnZhbHVlcyhSb29tQWNjZXNzTGV2ZWxzKV0sXG59OiBVc2VyQWxsb3dlZEluUm9vbVByb3BzKSB7XG4gIGZvciAoY29uc3QgYWNjZXNzIG9mIGFjY2Vzc2VzQWxsb3dlZCkge1xuICAgIC8vIFVzZXIgYWNjZXNzIGlzIHNldFxuICAgIGlmIChjaGVja0FjY2Vzc0xldmVscy5pbmNsdWRlcyhSb29tQWNjZXNzTGV2ZWxzLlVTRVIpKSB7XG4gICAgICAvLyBVc2VyIGlzIG93bmVyXG4gICAgICBpZiAocm9vbS5tZXRhZGF0YS5vd25lciA9PT0gdXNlcklkKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAocm9vbS51c2Vyc0FjY2Vzc2VzPy5bdXNlcklkXT8uaW5jbHVkZXMoYWNjZXNzKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBIGdyb3VwIGFjY2VzcyBpcyBzZXRcbiAgICBpZiAoY2hlY2tBY2Nlc3NMZXZlbHMuaW5jbHVkZXMoUm9vbUFjY2Vzc0xldmVscy5HUk9VUCkpIHtcbiAgICAgIGZvciAoY29uc3QgZ3JvdXBJZCBvZiBncm91cElkcykge1xuICAgICAgICBpZiAocm9vbS5ncm91cHNBY2Nlc3Nlcz8uW2dyb3VwSWRdPy5pbmNsdWRlcyhhY2Nlc3MpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBEZWZhdWx0IGFjY2VzcyBpcyBzZXRcbiAgICBpZiAoXG4gICAgICBjaGVja0FjY2Vzc0xldmVscy5pbmNsdWRlcyhSb29tQWNjZXNzTGV2ZWxzLkRFRkFVTFQpICYmXG4gICAgICByb29tLmRlZmF1bHRBY2Nlc3Nlcy5pbmNsdWRlcyhhY2Nlc3MpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG4iXSwibmFtZXMiOlsiUm9vbUFjY2Vzc0xldmVscyIsInVzZXJBbGxvd2VkSW5Sb29tcyIsImFjY2Vzc2VzQWxsb3dlZCIsInVzZXJJZCIsImdyb3VwSWRzIiwicm9vbXMiLCJjaGVja0FjY2Vzc0xldmVscyIsImV2ZXJ5Iiwicm9vbSIsInVzZXJBbGxvd2VkSW5Sb29tIiwiT2JqZWN0IiwidmFsdWVzIiwiYWNjZXNzIiwiaW5jbHVkZXMiLCJVU0VSIiwibWV0YWRhdGEiLCJvd25lciIsInVzZXJzQWNjZXNzZXMiLCJHUk9VUCIsImdyb3VwSWQiLCJncm91cHNBY2Nlc3NlcyIsIkRFRkFVTFQiLCJkZWZhdWx0QWNjZXNzZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/utils/userAllowedInRooms.ts\n");

/***/ }),

/***/ "(api)/./liveblocks.server.config.ts":
/*!*************************************!*\
  !*** ./liveblocks.server.config.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_BASE_URL: () => (/* binding */ DEFAULT_BASE_URL),\n/* harmony export */   SECRET_API_KEY: () => (/* binding */ SECRET_API_KEY)\n/* harmony export */ });\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/react */ \"next-auth/react\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_0__);\n// Liveblocks API base url\n\nconst DEFAULT_BASE_URL = \"https://api.liveblocks.io\";\n// Your Liveblocks secret key\nconst SECRET_API_KEY = process.env.LIVEBLOCKS_SECRET_KEY;\n// ============================================================================\nif (!SECRET_API_KEY) {\n    throw new Error(`You must add your Liveblocks secret key to .env.local to use the starter kit \n\nExample .env.local file:\nLIVEBLOCKS_SECRET_KEY=sk_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n\nYou can find your secret keys on https://liveblocks.io/dashboard/apikeys \nFollow the full starter kit guide on https://liveblocks.io/docs/guides/nextjs-starter-kit\n \n`);\n}\nif (false) {}\n(async ()=>{\n    const providers = await (0,next_auth_react__WEBPACK_IMPORTED_MODULE_0__.getProviders)();\n    if (providers?.github) {\n        if (!process.env.GITHUB_CLIENT_ID || !process.env.GITHUB_CLIENT_SECRET) {\n            console.log(`Your GitHub secrets are missing from .env.local\n      \nExample .env.local file:\nGITHUB_CLIENT_ID=sk_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\nGITHUB_CLIENT_SECRET=sk_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n      \nFollow the full starter kit guide to learn how to get them:\nhttps://liveblocks.io/docs/guides/nextjs-starter-kit#github-authentication\n      `);\n        }\n    }\n    if (providers?.auth0) {\n        if (!process.env.AUTH0_CLIENT_ID || !process.env.AUTH0_CLIENT_SECRET || !process.env.AUTH0_ISSUER_BASE_URL) {\n            throw new Error(`Your Auth0 secrets are missing from .env.local\n      \nExample .env.local file:\nAUTH0_CLIENT_ID=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\nAUTH0_CLIENT_SECRET=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\nAUTH0_ISSUER_BASE_URL=https://XXXXXXXXXXXXXXXXXX.com\n      \nFollow the full starter kit guide to learn how to get them:\nhttps://liveblocks.io/docs/guides/nextjs-starter-kit#auth0-authentication\n      `);\n        }\n    }\n})();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saXZlYmxvY2tzLnNlcnZlci5jb25maWcudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLDBCQUEwQjtBQUNxQjtBQUV4QyxNQUFNQyxtQkFBbUIsNEJBQTRCO0FBRTVELDZCQUE2QjtBQUN0QixNQUFNQyxpQkFBaUJDLFFBQVFDLEdBQUcsQ0FBQ0MscUJBQXFCLENBQUM7QUFFaEUsK0VBQStFO0FBQy9FLElBQUksQ0FBQ0gsZ0JBQWdCO0lBQ25CLE1BQU0sSUFBSUksTUFBTSxDQUFDOzs7Ozs7OztBQVFuQixDQUFDO0FBQ0Q7QUFFQSxJQUFJLEtBQTZCLEVBQUUsRUFPbEM7QUFFQTtJQUNDLE1BQU1JLFlBQVksTUFBTVYsNkRBQVlBO0lBRXBDLElBQUlVLFdBQVdDLFFBQVE7UUFDckIsSUFBSSxDQUFDUixRQUFRQyxHQUFHLENBQUNRLGdCQUFnQixJQUFJLENBQUNULFFBQVFDLEdBQUcsQ0FBQ1Msb0JBQW9CLEVBQUU7WUFDdEVOLFFBQVFDLEdBQUcsQ0FBQyxDQUFDOzs7Ozs7OztNQVFiLENBQUM7UUFDSDtJQUNGO0lBRUEsSUFBSUUsV0FBV0ksT0FBTztRQUNwQixJQUNFLENBQUNYLFFBQVFDLEdBQUcsQ0FBQ1csZUFBZSxJQUM1QixDQUFDWixRQUFRQyxHQUFHLENBQUNZLG1CQUFtQixJQUNoQyxDQUFDYixRQUFRQyxHQUFHLENBQUNhLHFCQUFxQixFQUNsQztZQUNBLE1BQU0sSUFBSVgsTUFBTSxDQUFDOzs7Ozs7Ozs7TUFTakIsQ0FBQztRQUNIO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpdmVibG9ja3Muc2VydmVyLmNvbmZpZy50cz83ZmMwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIExpdmVibG9ja3MgQVBJIGJhc2UgdXJsXG5pbXBvcnQgeyBnZXRQcm92aWRlcnMgfSBmcm9tIFwibmV4dC1hdXRoL3JlYWN0XCI7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0JBU0VfVVJMID0gXCJodHRwczovL2FwaS5saXZlYmxvY2tzLmlvXCI7XG5cbi8vIFlvdXIgTGl2ZWJsb2NrcyBzZWNyZXQga2V5XG5leHBvcnQgY29uc3QgU0VDUkVUX0FQSV9LRVkgPSBwcm9jZXNzLmVudi5MSVZFQkxPQ0tTX1NFQ1JFVF9LRVk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmlmICghU0VDUkVUX0FQSV9LRVkpIHtcbiAgdGhyb3cgbmV3IEVycm9yKGBZb3UgbXVzdCBhZGQgeW91ciBMaXZlYmxvY2tzIHNlY3JldCBrZXkgdG8gLmVudi5sb2NhbCB0byB1c2UgdGhlIHN0YXJ0ZXIga2l0IFxuXG5FeGFtcGxlIC5lbnYubG9jYWwgZmlsZTpcbkxJVkVCTE9DS1NfU0VDUkVUX0tFWT1za19YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYXG5cbllvdSBjYW4gZmluZCB5b3VyIHNlY3JldCBrZXlzIG9uIGh0dHBzOi8vbGl2ZWJsb2Nrcy5pby9kYXNoYm9hcmQvYXBpa2V5cyBcbkZvbGxvdyB0aGUgZnVsbCBzdGFydGVyIGtpdCBndWlkZSBvbiBodHRwczovL2xpdmVibG9ja3MuaW8vZG9jcy9ndWlkZXMvbmV4dGpzLXN0YXJ0ZXIta2l0XG4gXG5gKTtcbn1cblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgY29uc29sZS5sb2coKTtcbiAgY29uc29sZS5lcnJvcihcbiAgICBcIkRBTkdFUjogWW91J3JlIHVzaW5nIGRhdGEgZnJvbSAvbGl2ZWJsb2Nrcy5zZXJ2ZXIuY29uZmlnLnRzIG9uIHRoZSBjbGllbnRcIlxuICApO1xuICBjb25zb2xlLmVycm9yKFwiVGhpcyBtYXkgZXhwb3NlIHlvdXIgc2VjcmV0IGtleShzKVwiKTtcbiAgY29uc29sZS5sb2coKTtcbn1cblxuKGFzeW5jICgpID0+IHtcbiAgY29uc3QgcHJvdmlkZXJzID0gYXdhaXQgZ2V0UHJvdmlkZXJzKCk7XG5cbiAgaWYgKHByb3ZpZGVycz8uZ2l0aHViKSB7XG4gICAgaWYgKCFwcm9jZXNzLmVudi5HSVRIVUJfQ0xJRU5UX0lEIHx8ICFwcm9jZXNzLmVudi5HSVRIVUJfQ0xJRU5UX1NFQ1JFVCkge1xuICAgICAgY29uc29sZS5sb2coYFlvdXIgR2l0SHViIHNlY3JldHMgYXJlIG1pc3NpbmcgZnJvbSAuZW52LmxvY2FsXG4gICAgICBcbkV4YW1wbGUgLmVudi5sb2NhbCBmaWxlOlxuR0lUSFVCX0NMSUVOVF9JRD1za19YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYXG5HSVRIVUJfQ0xJRU5UX1NFQ1JFVD1za19YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYXG4gICAgICBcbkZvbGxvdyB0aGUgZnVsbCBzdGFydGVyIGtpdCBndWlkZSB0byBsZWFybiBob3cgdG8gZ2V0IHRoZW06XG5odHRwczovL2xpdmVibG9ja3MuaW8vZG9jcy9ndWlkZXMvbmV4dGpzLXN0YXJ0ZXIta2l0I2dpdGh1Yi1hdXRoZW50aWNhdGlvblxuICAgICAgYCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHByb3ZpZGVycz8uYXV0aDApIHtcbiAgICBpZiAoXG4gICAgICAhcHJvY2Vzcy5lbnYuQVVUSDBfQ0xJRU5UX0lEIHx8XG4gICAgICAhcHJvY2Vzcy5lbnYuQVVUSDBfQ0xJRU5UX1NFQ1JFVCB8fFxuICAgICAgIXByb2Nlc3MuZW52LkFVVEgwX0lTU1VFUl9CQVNFX1VSTFxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBZb3VyIEF1dGgwIHNlY3JldHMgYXJlIG1pc3NpbmcgZnJvbSAuZW52LmxvY2FsXG4gICAgICBcbkV4YW1wbGUgLmVudi5sb2NhbCBmaWxlOlxuQVVUSDBfQ0xJRU5UX0lEPVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYXG5BVVRIMF9DTElFTlRfU0VDUkVUPVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhcbkFVVEgwX0lTU1VFUl9CQVNFX1VSTD1odHRwczovL1hYWFhYWFhYWFhYWFhYWFhYWC5jb21cbiAgICAgIFxuRm9sbG93IHRoZSBmdWxsIHN0YXJ0ZXIga2l0IGd1aWRlIHRvIGxlYXJuIGhvdyB0byBnZXQgdGhlbTpcbmh0dHBzOi8vbGl2ZWJsb2Nrcy5pby9kb2NzL2d1aWRlcy9uZXh0anMtc3RhcnRlci1raXQjYXV0aDAtYXV0aGVudGljYXRpb25cbiAgICAgIGApO1xuICAgIH1cbiAgfVxufSkoKTtcbiJdLCJuYW1lcyI6WyJnZXRQcm92aWRlcnMiLCJERUZBVUxUX0JBU0VfVVJMIiwiU0VDUkVUX0FQSV9LRVkiLCJwcm9jZXNzIiwiZW52IiwiTElWRUJMT0NLU19TRUNSRVRfS0VZIiwiRXJyb3IiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJwcm92aWRlcnMiLCJnaXRodWIiLCJHSVRIVUJfQ0xJRU5UX0lEIiwiR0lUSFVCX0NMSUVOVF9TRUNSRVQiLCJhdXRoMCIsIkFVVEgwX0NMSUVOVF9JRCIsIkFVVEgwX0NMSUVOVF9TRUNSRVQiLCJBVVRIMF9JU1NVRVJfQkFTRV9VUkwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./liveblocks.server.config.ts\n");

/***/ }),

/***/ "(api)/./pages/api/auth/[...nextauth].ts":
/*!*****************************************!*\
  !*** ./pages/api/auth/[...nextauth].ts ***!
  \*****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NEXTAUTH_SECRET: () => (/* binding */ NEXTAUTH_SECRET),\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/credentials */ \"next-auth/providers/credentials\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/server */ \"(api)/./lib/server/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_server__WEBPACK_IMPORTED_MODULE_2__]);\n_lib_server__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Your NextAuth secret (generate a new one for production)\n// More info: https://next-auth.js.org/configuration/options#secret\nconst NEXTAUTH_SECRET = process.env.NEXTAUTH_SECRET;\nconst authOptions = {\n    secret: NEXTAUTH_SECRET,\n    callbacks: {\n        // Get extra user info from your database to pass to front-end\n        // For front end, update next-auth.d.ts with session type\n        async session ({ session }) {\n            const userInfo = await (0,_lib_server__WEBPACK_IMPORTED_MODULE_2__.getUser)(session.user.email);\n            if (!userInfo) {\n                throw new Error(\"User not found\");\n            }\n            session.user.info = userInfo;\n            return session;\n        }\n    },\n    pages: {\n        signIn: \"/signin\"\n    },\n    // Configure one or more authentication providers\n    // More info: https://next-auth.js.org/providers/\n    providers: [\n        // CredentialsProvider is used for the demo auth system\n        // Replace this with a real provider, e.g. GitHub, Auth0\n        next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1___default()({\n            name: \"Credentials\",\n            credentials: {\n                email: {\n                    label: \"email\",\n                    type: \"text\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials) {\n                    return null;\n                }\n                const user = await (0,_lib_server__WEBPACK_IMPORTED_MODULE_2__.getUser)(credentials.email);\n                if (!user) {\n                    throw new Error(\"User not found\");\n                }\n                return {\n                    id: user.id,\n                    name: user.name,\n                    email: user.id,\n                    image: user.avatar\n                };\n            }\n        })\n    ]\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (next_auth__WEBPACK_IMPORTED_MODULE_0___default()(authOptions));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQWlDO0FBQ2lDO0FBQ3BCO0FBRzlDLDJEQUEyRDtBQUMzRCxtRUFBbUU7QUFDNUQsTUFBTUcsa0JBQWtCQyxRQUFRQyxHQUFHLENBQUNGLGVBQWUsQ0FBQztBQUVwRCxNQUFNRyxjQUFjO0lBQ3pCQyxRQUFRSjtJQUNSSyxXQUFXO1FBQ1QsOERBQThEO1FBQzlELHlEQUF5RDtRQUN6RCxNQUFNQyxTQUFRLEVBQUVBLE9BQU8sRUFBb0I7WUFDekMsTUFBTUMsV0FBd0IsTUFBTVIsb0RBQU9BLENBQUNPLFFBQVFFLElBQUksQ0FBQ0MsS0FBSztZQUU5RCxJQUFJLENBQUNGLFVBQVU7Z0JBQ2IsTUFBTSxJQUFJRyxNQUFNO1lBQ2xCO1lBRUFKLFFBQVFFLElBQUksQ0FBQ0csSUFBSSxHQUFHSjtZQUNwQixPQUFPRDtRQUNUO0lBQ0Y7SUFDQU0sT0FBTztRQUNMQyxRQUFRO0lBQ1Y7SUFFQSxpREFBaUQ7SUFDakQsaURBQWlEO0lBQ2pEQyxXQUFXO1FBQ1QsdURBQXVEO1FBQ3ZELHdEQUF3RDtRQUN4RGhCLHNFQUFtQkEsQ0FBQztZQUNsQmlCLE1BQU07WUFDTkMsYUFBYTtnQkFDWFAsT0FBTztvQkFDTFEsT0FBTztvQkFDUEMsTUFBTTtnQkFDUjtZQUNGO1lBQ0EsTUFBTUMsV0FBVUgsV0FBVztnQkFDekIsSUFBSSxDQUFDQSxhQUFhO29CQUNoQixPQUFPO2dCQUNUO2dCQUVBLE1BQU1SLE9BQW9CLE1BQU1ULG9EQUFPQSxDQUFDaUIsWUFBWVAsS0FBSztnQkFFekQsSUFBSSxDQUFDRCxNQUFNO29CQUNULE1BQU0sSUFBSUUsTUFBTTtnQkFDbEI7Z0JBRUEsT0FBTztvQkFDTFUsSUFBSVosS0FBS1ksRUFBRTtvQkFDWEwsTUFBTVAsS0FBS08sSUFBSTtvQkFDZk4sT0FBT0QsS0FBS1ksRUFBRTtvQkFDZEMsT0FBT2IsS0FBS2MsTUFBTTtnQkFDcEI7WUFDRjtRQUNGO0tBc0JEO0FBQ0gsRUFBRTtBQUVGLGlFQUFlekIsZ0RBQVFBLENBQUNNLFlBQVlBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLnRzPzJlOGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE5leHRBdXRoIGZyb20gXCJuZXh0LWF1dGhcIjtcbmltcG9ydCBDcmVkZW50aWFsc1Byb3ZpZGVyIGZyb20gXCJuZXh0LWF1dGgvcHJvdmlkZXJzL2NyZWRlbnRpYWxzXCI7XG5pbXBvcnQgeyBnZXRVc2VyIH0gZnJvbSBcIi4uLy4uLy4uL2xpYi9zZXJ2ZXJcIjtcbmltcG9ydCB7IFVzZXIgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcblxuLy8gWW91ciBOZXh0QXV0aCBzZWNyZXQgKGdlbmVyYXRlIGEgbmV3IG9uZSBmb3IgcHJvZHVjdGlvbilcbi8vIE1vcmUgaW5mbzogaHR0cHM6Ly9uZXh0LWF1dGguanMub3JnL2NvbmZpZ3VyYXRpb24vb3B0aW9ucyNzZWNyZXRcbmV4cG9ydCBjb25zdCBORVhUQVVUSF9TRUNSRVQgPSBwcm9jZXNzLmVudi5ORVhUQVVUSF9TRUNSRVQ7XG5cbmV4cG9ydCBjb25zdCBhdXRoT3B0aW9ucyA9IHtcbiAgc2VjcmV0OiBORVhUQVVUSF9TRUNSRVQsXG4gIGNhbGxiYWNrczoge1xuICAgIC8vIEdldCBleHRyYSB1c2VyIGluZm8gZnJvbSB5b3VyIGRhdGFiYXNlIHRvIHBhc3MgdG8gZnJvbnQtZW5kXG4gICAgLy8gRm9yIGZyb250IGVuZCwgdXBkYXRlIG5leHQtYXV0aC5kLnRzIHdpdGggc2Vzc2lvbiB0eXBlXG4gICAgYXN5bmMgc2Vzc2lvbih7IHNlc3Npb24gfTogeyBzZXNzaW9uOiBhbnkgfSkge1xuICAgICAgY29uc3QgdXNlckluZm86IFVzZXIgfCBudWxsID0gYXdhaXQgZ2V0VXNlcihzZXNzaW9uLnVzZXIuZW1haWwpO1xuXG4gICAgICBpZiAoIXVzZXJJbmZvKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVzZXIgbm90IGZvdW5kXCIpO1xuICAgICAgfVxuXG4gICAgICBzZXNzaW9uLnVzZXIuaW5mbyA9IHVzZXJJbmZvO1xuICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgfSxcbiAgfSxcbiAgcGFnZXM6IHtcbiAgICBzaWduSW46IFwiL3NpZ25pblwiLFxuICB9LFxuXG4gIC8vIENvbmZpZ3VyZSBvbmUgb3IgbW9yZSBhdXRoZW50aWNhdGlvbiBwcm92aWRlcnNcbiAgLy8gTW9yZSBpbmZvOiBodHRwczovL25leHQtYXV0aC5qcy5vcmcvcHJvdmlkZXJzL1xuICBwcm92aWRlcnM6IFtcbiAgICAvLyBDcmVkZW50aWFsc1Byb3ZpZGVyIGlzIHVzZWQgZm9yIHRoZSBkZW1vIGF1dGggc3lzdGVtXG4gICAgLy8gUmVwbGFjZSB0aGlzIHdpdGggYSByZWFsIHByb3ZpZGVyLCBlLmcuIEdpdEh1YiwgQXV0aDBcbiAgICBDcmVkZW50aWFsc1Byb3ZpZGVyKHtcbiAgICAgIG5hbWU6IFwiQ3JlZGVudGlhbHNcIixcbiAgICAgIGNyZWRlbnRpYWxzOiB7XG4gICAgICAgIGVtYWlsOiB7XG4gICAgICAgICAgbGFiZWw6IFwiZW1haWxcIixcbiAgICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBhc3luYyBhdXRob3JpemUoY3JlZGVudGlhbHMpIHtcbiAgICAgICAgaWYgKCFjcmVkZW50aWFscykge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdXNlcjogVXNlciB8IG51bGwgPSBhd2FpdCBnZXRVc2VyKGNyZWRlbnRpYWxzLmVtYWlsKTtcblxuICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2VyIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgICAgIGVtYWlsOiB1c2VyLmlkLFxuICAgICAgICAgIGltYWdlOiB1c2VyLmF2YXRhcixcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSksXG5cbiAgICAvKlxuICAgIC8vIFVzZSBHaXRIdWIgYXV0aGVudGljYXRpb25cbiAgICAvLyBpbXBvcnQgR2l0aHViUHJvdmlkZXIgZnJvbSBcIm5leHQtYXV0aC9wcm92aWRlcnMvZ2l0aHViXCI7XG4gICAgR2l0aHViUHJvdmlkZXIoe1xuICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkdJVEhVQl9DTElFTlRfSUQgYXMgc3RyaW5nLFxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5HSVRIVUJfQ0xJRU5UX1NFQ1JFVCBhcyBzdHJpbmcsXG4gICAgfSksXG4gICAgKi9cblxuICAgIC8qXG4gICAgLy8gVXNlIEF1dGgwIGF1dGhlbnRpY2F0aW9uXG4gICAgLy8gaW1wb3J0IEF1dGgwUHJvdmlkZXIgZnJvbSBcIm5leHQtYXV0aC9wcm92aWRlcnMvYXV0aDBcIjtcbiAgICBBdXRoMFByb3ZpZGVyKHtcbiAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5BVVRIMF9DTElFTlRfSUQgYXMgc3RyaW5nLFxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5BVVRIMF9DTElFTlRfU0VDUkVUIGFzIHN0cmluZyxcbiAgICAgIGlzc3VlcjogcHJvY2Vzcy5lbnYuQVVUSDBfSVNTVUVSX0JBU0VfVVJMLFxuICAgIH0pLFxuICAgICovXG5cbiAgICAvLyAuLi5hZGQgbW9yZSBwcm92aWRlcnMgaGVyZVxuICBdLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgTmV4dEF1dGgoYXV0aE9wdGlvbnMpO1xuIl0sIm5hbWVzIjpbIk5leHRBdXRoIiwiQ3JlZGVudGlhbHNQcm92aWRlciIsImdldFVzZXIiLCJORVhUQVVUSF9TRUNSRVQiLCJwcm9jZXNzIiwiZW52IiwiYXV0aE9wdGlvbnMiLCJzZWNyZXQiLCJjYWxsYmFja3MiLCJzZXNzaW9uIiwidXNlckluZm8iLCJ1c2VyIiwiZW1haWwiLCJFcnJvciIsImluZm8iLCJwYWdlcyIsInNpZ25JbiIsInByb3ZpZGVycyIsIm5hbWUiLCJjcmVkZW50aWFscyIsImxhYmVsIiwidHlwZSIsImF1dGhvcml6ZSIsImlkIiwiaW1hZ2UiLCJhdmF0YXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/auth/[...nextauth].ts\n");

/***/ }),

/***/ "(api)/./pages/api/liveblocks/documents/create.ts":
/*!**************************************************!*\
  !*** ./pages/api/liveblocks/documents/create.ts ***!
  \**************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ create)\n/* harmony export */ });\n/* harmony import */ var _lib_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../lib/server */ \"(api)/./lib/server/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_server__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_server__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n/**\n * POST Create - Used in /lib/client/createDocument.ts\n *\n * Create a new Liveblocks room. Pass creation info in JSON body.\n * Only allow if authorized with NextAuth.\n *\n * @param req\n * @param req.body - JSON string, as defined below\n * @param req.body.name - The name of the new document\n * @param req.body.type - The type of document e.g. \"canvas\",\n * @param req.body.userId - The creator of the document\n * @param [req.body.groupIds] - Optional, limit access to room to just these groups\n * @param [req.body.draft] - Optional, if the document is a draft\n * @param res\n */ async function POST(req, res) {\n    const { name, type, userId, groupIds, draft } = JSON.parse(req.body);\n    const { data, error } = await (0,_lib_server__WEBPACK_IMPORTED_MODULE_0__.createDocument)(req, res, {\n        name: name,\n        type: type,\n        userId: userId,\n        groupIds: groupIds ? groupIds.split(\",\") : undefined,\n        draft: draft\n    });\n    if (error) {\n        return res.status(error.code ?? 500).json({\n            error\n        });\n    }\n    return res.status(200).json(data);\n}\nasync function create(req, res) {\n    switch(req.method){\n        case \"POST\":\n            return await POST(req, res);\n        default:\n            return res.status(405).json({\n                error: {\n                    code: 405,\n                    message: \"Method Not Allowed\",\n                    suggestion: \"Only POST is available from this API\"\n                }\n            });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvbGl2ZWJsb2Nrcy9kb2N1bWVudHMvY3JlYXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQ3dEO0FBR3hEOzs7Ozs7Ozs7Ozs7OztDQWNDLEdBQ0QsZUFBZUMsS0FBS0MsR0FBbUIsRUFBRUMsR0FBb0I7SUFDM0QsTUFBTSxFQUFFQyxJQUFJLEVBQUVDLElBQUksRUFBRUMsTUFBTSxFQUFFQyxRQUFRLEVBQUVDLEtBQUssRUFBRSxHQUMzQ0MsS0FBS0MsS0FBSyxDQUFDUixJQUFJUyxJQUFJO0lBRXJCLE1BQU0sRUFBRUMsSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNYiwyREFBY0EsQ0FBQ0UsS0FBS0MsS0FBSztRQUNyREMsTUFBTUE7UUFDTkMsTUFBTUE7UUFDTkMsUUFBUUE7UUFDUkMsVUFBVUEsV0FBV0EsU0FBU08sS0FBSyxDQUFDLE9BQU9DO1FBQzNDUCxPQUFPQTtJQUNUO0lBRUEsSUFBSUssT0FBTztRQUNULE9BQU9WLElBQUlhLE1BQU0sQ0FBQ0gsTUFBTUksSUFBSSxJQUFJLEtBQUtDLElBQUksQ0FBQztZQUFFTDtRQUFNO0lBQ3BEO0lBRUEsT0FBT1YsSUFBSWEsTUFBTSxDQUFDLEtBQUtFLElBQUksQ0FBQ047QUFDOUI7QUFFZSxlQUFlTyxPQUM1QmpCLEdBQW1CLEVBQ25CQyxHQUFvQjtJQUVwQixPQUFRRCxJQUFJa0IsTUFBTTtRQUNoQixLQUFLO1lBQ0gsT0FBTyxNQUFNbkIsS0FBS0MsS0FBS0M7UUFFekI7WUFDRSxPQUFPQSxJQUFJYSxNQUFNLENBQUMsS0FBS0UsSUFBSSxDQUFDO2dCQUMxQkwsT0FBTztvQkFDTEksTUFBTTtvQkFDTkksU0FBUztvQkFDVEMsWUFBWTtnQkFDZDtZQUNGO0lBQ0o7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3BhZ2VzL2FwaS9saXZlYmxvY2tzL2RvY3VtZW50cy9jcmVhdGUudHM/NTMzMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCB7IGNyZWF0ZURvY3VtZW50IH0gZnJvbSBcIi4uLy4uLy4uLy4uL2xpYi9zZXJ2ZXJcIjtcbmltcG9ydCB7IENyZWF0ZURvY3VtZW50UmVxdWVzdCB9IGZyb20gXCIuLi8uLi8uLi8uLi90eXBlc1wiO1xuXG4vKipcbiAqIFBPU1QgQ3JlYXRlIC0gVXNlZCBpbiAvbGliL2NsaWVudC9jcmVhdGVEb2N1bWVudC50c1xuICpcbiAqIENyZWF0ZSBhIG5ldyBMaXZlYmxvY2tzIHJvb20uIFBhc3MgY3JlYXRpb24gaW5mbyBpbiBKU09OIGJvZHkuXG4gKiBPbmx5IGFsbG93IGlmIGF1dGhvcml6ZWQgd2l0aCBOZXh0QXV0aC5cbiAqXG4gKiBAcGFyYW0gcmVxXG4gKiBAcGFyYW0gcmVxLmJvZHkgLSBKU09OIHN0cmluZywgYXMgZGVmaW5lZCBiZWxvd1xuICogQHBhcmFtIHJlcS5ib2R5Lm5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgbmV3IGRvY3VtZW50XG4gKiBAcGFyYW0gcmVxLmJvZHkudHlwZSAtIFRoZSB0eXBlIG9mIGRvY3VtZW50IGUuZy4gXCJjYW52YXNcIixcbiAqIEBwYXJhbSByZXEuYm9keS51c2VySWQgLSBUaGUgY3JlYXRvciBvZiB0aGUgZG9jdW1lbnRcbiAqIEBwYXJhbSBbcmVxLmJvZHkuZ3JvdXBJZHNdIC0gT3B0aW9uYWwsIGxpbWl0IGFjY2VzcyB0byByb29tIHRvIGp1c3QgdGhlc2UgZ3JvdXBzXG4gKiBAcGFyYW0gW3JlcS5ib2R5LmRyYWZ0XSAtIE9wdGlvbmFsLCBpZiB0aGUgZG9jdW1lbnQgaXMgYSBkcmFmdFxuICogQHBhcmFtIHJlc1xuICovXG5hc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGNvbnN0IHsgbmFtZSwgdHlwZSwgdXNlcklkLCBncm91cElkcywgZHJhZnQgfTogQ3JlYXRlRG9jdW1lbnRSZXF1ZXN0ID1cbiAgICBKU09OLnBhcnNlKHJlcS5ib2R5KTtcblxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBjcmVhdGVEb2N1bWVudChyZXEsIHJlcywge1xuICAgIG5hbWU6IG5hbWUsXG4gICAgdHlwZTogdHlwZSxcbiAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICBncm91cElkczogZ3JvdXBJZHMgPyBncm91cElkcy5zcGxpdChcIixcIikgOiB1bmRlZmluZWQsXG4gICAgZHJhZnQ6IGRyYWZ0LFxuICB9KTtcblxuICBpZiAoZXJyb3IpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyhlcnJvci5jb2RlID8/IDUwMCkuanNvbih7IGVycm9yIH0pO1xuICB9XG5cbiAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGRhdGEpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBjcmVhdGUoXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlXG4pIHtcbiAgc3dpdGNoIChyZXEubWV0aG9kKSB7XG4gICAgY2FzZSBcIlBPU1RcIjpcbiAgICAgIHJldHVybiBhd2FpdCBQT1NUKHJlcSwgcmVzKTtcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oe1xuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6IDQwNSxcbiAgICAgICAgICBtZXNzYWdlOiBcIk1ldGhvZCBOb3QgQWxsb3dlZFwiLFxuICAgICAgICAgIHN1Z2dlc3Rpb246IFwiT25seSBQT1NUIGlzIGF2YWlsYWJsZSBmcm9tIHRoaXMgQVBJXCIsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNyZWF0ZURvY3VtZW50IiwiUE9TVCIsInJlcSIsInJlcyIsIm5hbWUiLCJ0eXBlIiwidXNlcklkIiwiZ3JvdXBJZHMiLCJkcmFmdCIsIkpTT04iLCJwYXJzZSIsImJvZHkiLCJkYXRhIiwiZXJyb3IiLCJzcGxpdCIsInVuZGVmaW5lZCIsInN0YXR1cyIsImNvZGUiLCJqc29uIiwiY3JlYXRlIiwibWV0aG9kIiwibWVzc2FnZSIsInN1Z2dlc3Rpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/liveblocks/documents/create.ts\n");

/***/ }),

/***/ "(api)/./types/api.ts":
/*!**********************!*\
  !*** ./types/api.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi90eXBlcy9hcGkudHMiLCJtYXBwaW5ncyI6IjtBQThFTSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3R5cGVzL2FwaS50cz9lZmMzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIERvY3VtZW50LFxuICBEb2N1bWVudEFjY2VzcyxcbiAgRG9jdW1lbnRHcm91cCxcbiAgRG9jdW1lbnRUeXBlLFxuICBEb2N1bWVudFVzZXIsXG59IGZyb20gXCIuL2RvY3VtZW50XCI7XG5pbXBvcnQgeyBSb29tLCBSb29tQWN0aXZlVXNlciB9IGZyb20gXCIuL3Jvb21cIjtcblxuLyoqXG4gKiBUaGVzZSB0eXBlcyBhcmUgdXNlZCB0byB1bmlmeSB0aGUgY2xpZW50L3NlcnZlciBBUEkgZW5kcG9pbnRzXG4gKi9cblxuZXhwb3J0IHR5cGUgR2V0RG9jdW1lbnRzUmVzcG9uc2UgPSB7XG4gIGRvY3VtZW50czogRG9jdW1lbnRbXTtcbiAgbmV4dFBhZ2U6IHN0cmluZyB8IG51bGw7XG59O1xuXG5leHBvcnQgdHlwZSBHZXRTdG9yYWdlUmVzcG9uc2UgPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcblxuZXhwb3J0IHR5cGUgQ3JlYXRlRG9jdW1lbnRSZXF1ZXN0ID0ge1xuICBuYW1lOiBEb2N1bWVudFtcIm5hbWVcIl07XG4gIHR5cGU6IERvY3VtZW50VHlwZTtcbiAgdXNlcklkOiBEb2N1bWVudFVzZXJbXCJpZFwiXTtcbiAgZ3JvdXBJZHM/OiBzdHJpbmc7IC8vIENvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIGdyb3VwSWRzXG4gIGRyYWZ0PzogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCB0eXBlIFVwZGF0ZURvY3VtZW50UmVxdWVzdCA9IHtcbiAgZG9jdW1lbnREYXRhOiBQYXJ0aWFsPFJvb20+O1xufTtcblxuZXhwb3J0IHR5cGUgVXBkYXRlRG9jdW1lbnRTY29wZSA9IHtcbiAgYWNjZXNzOiBEb2N1bWVudEFjY2Vzcztcbn07XG5cbmV4cG9ydCB0eXBlIFVwZGF0ZUdyb3VwUmVxdWVzdCA9IHtcbiAgZ3JvdXBJZDogRG9jdW1lbnRHcm91cFtcImlkXCJdO1xuICBhY2Nlc3M6IERvY3VtZW50QWNjZXNzO1xufTtcblxuZXhwb3J0IHR5cGUgUmVtb3ZlR3JvdXBSZXF1ZXN0ID0ge1xuICBncm91cElkOiBEb2N1bWVudEdyb3VwW1wiaWRcIl07XG59O1xuXG5leHBvcnQgdHlwZSBVcGRhdGVVc2VyUmVxdWVzdCA9IHtcbiAgdXNlcklkOiBEb2N1bWVudFVzZXJbXCJpZFwiXTtcbiAgYWNjZXNzOiBEb2N1bWVudEFjY2Vzcztcbn07XG5cbmV4cG9ydCB0eXBlIFJlbW92ZVVzZXJSZXF1ZXN0ID0ge1xuICB1c2VySWQ6IERvY3VtZW50VXNlcltcImlkXCJdO1xufTtcblxuZXhwb3J0IHR5cGUgR2V0Um9vbXNSZXNwb25zZSA9IHtcbiAgbmV4dFBhZ2U6IHN0cmluZyB8IG51bGw7XG4gIGRhdGE6IFJvb21bXTtcbn07XG5cbmV4cG9ydCB0eXBlIExpdmVVc2Vyc1Jlc3BvbnNlID0ge1xuICBkb2N1bWVudElkOiBEb2N1bWVudFtcImlkXCJdO1xuICB1c2VyczogUm9vbUFjdGl2ZVVzZXJbXTtcbn07XG5cbmV4cG9ydCB0eXBlIEVycm9yRGF0YSA9IHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBjb2RlPzogbnVtYmVyO1xuICBzdWdnZXN0aW9uPzogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgRmV0Y2hBcGlSZXN1bHQ8VCA9IHVua25vd24+ID1cbiAgfCB7XG4gICAgICBkYXRhOiBUO1xuICAgICAgZXJyb3I/OiBuZXZlcjtcbiAgICB9XG4gIHwge1xuICAgICAgZXJyb3I6IEVycm9yRGF0YTtcbiAgICAgIGRhdGE/OiBuZXZlcjtcbiAgICB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./types/api.ts\n");

/***/ }),

/***/ "(api)/./types/data.ts":
/*!***********************!*\
  !*** ./types/data.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/**\n * These types are used in `/data`\n */ \n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi90eXBlcy9kYXRhLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Q0FFQyxHQWFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vdHlwZXMvZGF0YS50cz9mMTcxIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGhlc2UgdHlwZXMgYXJlIHVzZWQgaW4gYC9kYXRhYFxuICovXG5cbmV4cG9ydCB0eXBlIFVzZXIgPSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgYXZhdGFyPzogc3RyaW5nO1xuICBjb2xvcjogc3RyaW5nO1xuICBncm91cElkczogc3RyaW5nW107XG59O1xuXG5leHBvcnQgdHlwZSBHcm91cCA9IHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./types/data.ts\n");

/***/ }),

/***/ "(api)/./types/document.ts":
/*!***************************!*\
  !*** ./types/document.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DocumentAccess: () => (/* binding */ DocumentAccess)\n/* harmony export */ });\nvar DocumentAccess;\n(function(DocumentAccess) {\n    // Can edit, read, and modify invited users\n    DocumentAccess[\"FULL\"] = \"full\";\n    // Can edit and read the document\n    DocumentAccess[\"EDIT\"] = \"edit\";\n    // Can only read the document\n    DocumentAccess[\"READONLY\"] = \"readonly\";\n    // Can't view the document\n    DocumentAccess[\"NONE\"] = \"none\";\n})(DocumentAccess || (DocumentAccess = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi90eXBlcy9kb2N1bWVudC50cyIsIm1hcHBpbmdzIjoiOzs7OztVQTZDWUE7SUFDViwyQ0FBMkM7O0lBRzNDLGlDQUFpQzs7SUFHakMsNkJBQTZCOztJQUc3QiwwQkFBMEI7O0dBVmhCQSxtQkFBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi90eXBlcy9kb2N1bWVudC50cz9lMzc3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdyb3VwLCBVc2VyIH0gZnJvbSBcIi4vZGF0YVwiO1xuaW1wb3J0IHsgUm9vbU1ldGFkYXRhIH0gZnJvbSBcIi4vcm9vbVwiO1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIG1haW4gdHlwZSBvZiB5b3VyIERvY3VtZW50cy5cbiAqIE1ha2Ugc3VyZSB0byBlZGl0IC9saWIvc2VydmVyL3V0aWxzL2J1aWxkRG9jdW1lbnRzLnRzIHdoZW4gYWRkaW5nIG5ld1xuICogcHJvcGVydGllcy5cbiAqL1xuZXhwb3J0IHR5cGUgRG9jdW1lbnQgPSB7XG4gIC8vIEVxdWl2YWxlbnQgdG8gTGl2ZWJsb2NrcyByb29tIGlkXG4gIGlkOiBzdHJpbmc7XG5cbiAgLy8gVGhlIGRvY3VtZW50J3MgbmFtZVxuICBuYW1lOiBzdHJpbmc7XG5cbiAgLy8gQXJyYXlzIGNvbnRhaW5pbmcgYWNjZXNzIGxldmVsc1xuICBhY2Nlc3NlczogRG9jdW1lbnRBY2Nlc3NlcztcblxuICAvLyBUaGUgdXNlciBpZiBvZiB0aGUgZG9jdW1lbnQncyBjcmVhdG9yXG4gIG93bmVyOiBEb2N1bWVudFVzZXJbXCJpZFwiXTtcblxuICAvLyBXaGVuIHRoZSBkb2N1bWVudCB3YXMgY3JlYXRlZCAoRGF0ZS50b1N0cmluZygpKVxuICBjcmVhdGVkOiBzdHJpbmc7XG5cbiAgLy8gV2hlbiB0aGUgbGFzdCB1c2VyIGNvbm5lY3RlZCAoRGF0ZS50b1N0cmluZygpKVxuICBsYXN0Q29ubmVjdGlvbjogc3RyaW5nO1xuXG4gIC8vIElmIHRoZSByb29tIGlzIGEgZHJhZnQgKHdoaWNoIGhhcyBubyBncm91cHMgb3IgcHVibGljIGFjY2Vzcykgb3Igbm90XG4gIGRyYWZ0OiBib29sZWFuO1xuXG4gIC8vIFRoZSB0eXBlIG9mIGRvY3VtZW50IGUuZy4gXCJjYW52YXNcIlxuICB0eXBlOiBEb2N1bWVudFR5cGU7XG59O1xuXG5leHBvcnQgdHlwZSBEb2N1bWVudFR5cGUgPSBcInRleHRcIiB8IFwid2hpdGVib2FyZFwiIHwgXCJzcHJlYWRzaGVldFwiO1xuXG5leHBvcnQgdHlwZSBEb2N1bWVudEdyb3VwID0gR3JvdXAgJiB7XG4gIGFjY2VzczogRG9jdW1lbnRBY2Nlc3M7XG59O1xuXG5leHBvcnQgdHlwZSBEb2N1bWVudFVzZXIgPSBVc2VyICYge1xuICBhY2Nlc3M6IERvY3VtZW50QWNjZXNzO1xuICBpc0N1cnJlbnRVc2VyOiBib29sZWFuO1xufTtcblxuZXhwb3J0IGVudW0gRG9jdW1lbnRBY2Nlc3Mge1xuICAvLyBDYW4gZWRpdCwgcmVhZCwgYW5kIG1vZGlmeSBpbnZpdGVkIHVzZXJzXG4gIEZVTEwgPSBcImZ1bGxcIixcblxuICAvLyBDYW4gZWRpdCBhbmQgcmVhZCB0aGUgZG9jdW1lbnRcbiAgRURJVCA9IFwiZWRpdFwiLFxuXG4gIC8vIENhbiBvbmx5IHJlYWQgdGhlIGRvY3VtZW50XG4gIFJFQURPTkxZID0gXCJyZWFkb25seVwiLFxuXG4gIC8vIENhbid0IHZpZXcgdGhlIGRvY3VtZW50XG4gIE5PTkUgPSBcIm5vbmVcIixcbn1cblxuZXhwb3J0IHR5cGUgRG9jdW1lbnRBY2Nlc3NlcyA9IHtcbiAgZGVmYXVsdDogRG9jdW1lbnRBY2Nlc3M7XG4gIGdyb3VwczogUmVjb3JkPERvY3VtZW50R3JvdXBbXCJpZFwiXSwgRG9jdW1lbnRBY2Nlc3M+O1xuICB1c2VyczogUmVjb3JkPERvY3VtZW50VXNlcltcImlkXCJdLCBEb2N1bWVudEFjY2Vzcz47XG59O1xuXG4vLyBSb29tIG1ldGFkYXRhIHVzZWQgd2hlbiBjcmVhdGluZyBhIG5ldyBkb2N1bWVudFxuZXhwb3J0IGludGVyZmFjZSBEb2N1bWVudFJvb21NZXRhZGF0YSBleHRlbmRzIFJvb21NZXRhZGF0YSB7XG4gIG5hbWU6IERvY3VtZW50W1wibmFtZVwiXTtcbiAgdHlwZTogRG9jdW1lbnRUeXBlO1xuICBvd25lcjogVXNlcltcImlkXCJdO1xuICBkcmFmdDogXCJ5ZXNcIiB8IFwibm9cIjtcbn1cbiJdLCJuYW1lcyI6WyJEb2N1bWVudEFjY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./types/document.ts\n");

/***/ }),

/***/ "(api)/./types/functions.ts":
/*!****************************!*\
  !*** ./types/functions.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi90eXBlcy9mdW5jdGlvbnMudHMiLCJtYXBwaW5ncyI6IjtBQXlGRSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3R5cGVzL2Z1bmN0aW9ucy50cz9jM2RhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIERvY3VtZW50LFxuICBEb2N1bWVudEFjY2VzcyxcbiAgRG9jdW1lbnRHcm91cCxcbiAgRG9jdW1lbnRUeXBlLFxuICBEb2N1bWVudFVzZXIsXG59IGZyb20gXCIuL2RvY3VtZW50XCI7XG5cbi8qKlxuICogVGhlc2UgdHlwZXMgYXJlIHRoZSBwcm9wZXJ0aWVzIHVzZWQgaW46XG4gKiBgL2xpYi9jbGllbnQvZG9jdW1lbnRzL2BcbiAqIGAvbGliL3NlcnZlci9kb2N1bWVudHMvYFxuICovXG5cbmV4cG9ydCB0eXBlIENyZWF0ZURvY3VtZW50UHJvcHMgPSB7XG4gIG5hbWU6IERvY3VtZW50W1wibmFtZVwiXTtcbiAgdHlwZTogRG9jdW1lbnRUeXBlO1xuICB1c2VySWQ6IERvY3VtZW50VXNlcltcImlkXCJdO1xuICBncm91cElkcz86IERvY3VtZW50R3JvdXBbXCJpZFwiXVtdO1xuICBkcmFmdD86IGJvb2xlYW47XG59O1xuXG5leHBvcnQgdHlwZSBHZXREb2N1bWVudFByb3BzID0ge1xuICBkb2N1bWVudElkOiBEb2N1bWVudFtcImlkXCJdO1xufTtcblxuZXhwb3J0IHR5cGUgVXBkYXRlRG9jdW1lbnRQcm9wcyA9IHtcbiAgZG9jdW1lbnRJZDogRG9jdW1lbnRbXCJpZFwiXTtcbiAgZG9jdW1lbnREYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xufTtcblxuZXhwb3J0IHR5cGUgVXBkYXRlRGVmYXVsdEFjY2Vzc1Byb3BzID0ge1xuICBkb2N1bWVudElkOiBEb2N1bWVudFtcImlkXCJdO1xuICBhY2Nlc3M6IERvY3VtZW50QWNjZXNzO1xufTtcblxuZXhwb3J0IHR5cGUgR2V0RG9jdW1lbnRHcm91cHNQcm9wcyA9IHtcbiAgZG9jdW1lbnRJZDogRG9jdW1lbnRbXCJpZFwiXTtcbn07XG5cbmV4cG9ydCB0eXBlIFVwZGF0ZUdyb3VwQWNjZXNzUHJvcHMgPSB7XG4gIGdyb3VwSWQ6IERvY3VtZW50R3JvdXBbXCJpZFwiXTtcbiAgZG9jdW1lbnRJZDogRG9jdW1lbnRbXCJpZFwiXTtcbiAgYWNjZXNzOiBEb2N1bWVudEFjY2Vzcztcbn07XG5cbmV4cG9ydCB0eXBlIFJlbW92ZUdyb3VwQWNjZXNzUHJvcHMgPSB7XG4gIGdyb3VwSWQ6IERvY3VtZW50R3JvdXBbXCJpZFwiXTtcbiAgZG9jdW1lbnRJZDogRG9jdW1lbnRbXCJpZFwiXTtcbn07XG5cbmV4cG9ydCB0eXBlIEdldERvY3VtZW50VXNlcnNQcm9wcyA9IHtcbiAgZG9jdW1lbnRJZDogRG9jdW1lbnRbXCJpZFwiXTtcbn07XG5cbmV4cG9ydCB0eXBlIFVwZGF0ZVVzZXJBY2Nlc3NQcm9wcyA9IHtcbiAgdXNlcklkOiBEb2N1bWVudFVzZXJbXCJpZFwiXTtcbiAgZG9jdW1lbnRJZDogRG9jdW1lbnRbXCJpZFwiXTtcbiAgYWNjZXNzOiBEb2N1bWVudEFjY2Vzcztcbn07XG5cbmV4cG9ydCB0eXBlIFJlbW92ZVVzZXJBY2Nlc3NQcm9wcyA9IHtcbiAgdXNlcklkOiBEb2N1bWVudFVzZXJbXCJpZFwiXTtcbiAgZG9jdW1lbnRJZDogRG9jdW1lbnRbXCJpZFwiXTtcbn07XG5cbmV4cG9ydCB0eXBlIEdldERvY3VtZW50c1Byb3BzID0ge1xuICBncm91cElkcz86IERvY3VtZW50R3JvdXBbXCJpZFwiXVtdO1xuICB1c2VySWQ/OiBEb2N1bWVudFVzZXJbXCJpZFwiXTtcbiAgZG9jdW1lbnRUeXBlPzogRG9jdW1lbnRUeXBlO1xuICBkcmFmdHM/OiBib29sZWFuO1xuICBsaW1pdD86IG51bWJlcjtcbn07XG5cbmV4cG9ydCB0eXBlIEdldExpdmVVc2Vyc1Byb3BzID0ge1xuICBkb2N1bWVudElkczogRG9jdW1lbnRbXCJpZFwiXVtdO1xufTtcblxuZXhwb3J0IHR5cGUgR2V0TmV4dERvY3VtZW50c1Byb3BzID0ge1xuICBuZXh0UGFnZTogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgRGVsZXRlRG9jdW1lbnRQcm9wcyA9IHtcbiAgZG9jdW1lbnRJZDogRG9jdW1lbnRbXCJpZFwiXTtcbn07XG5cbmV4cG9ydCB0eXBlIEdldFVzZXJzUHJvcHMgPSB7XG4gIHVzZXJJZHM/OiBEb2N1bWVudFtcImlkXCJdW107XG4gIHNlYXJjaD86IHN0cmluZztcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./types/functions.ts\n");

/***/ }),

/***/ "(api)/./types/index.ts":
/*!************************!*\
  !*** ./types/index.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./api */ \"(api)/./types/api.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _api__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _api__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data */ \"(api)/./types/data.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _data__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _data__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _document__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./document */ \"(api)/./types/document.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _document__WEBPACK_IMPORTED_MODULE_2__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _document__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _room__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./room */ \"(api)/./types/room.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _room__WEBPACK_IMPORTED_MODULE_3__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _room__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _functions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./functions */ \"(api)/./types/functions.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _functions__WEBPACK_IMPORTED_MODULE_4__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _functions__WEBPACK_IMPORTED_MODULE_4__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi90eXBlcy9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0I7QUFDQztBQUNJO0FBQ0o7QUFDSyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3R5cGVzL2luZGV4LnRzP2RmMmEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vYXBpXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9kYXRhXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9kb2N1bWVudFwiO1xuZXhwb3J0ICogZnJvbSBcIi4vcm9vbVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vZnVuY3Rpb25zXCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./types/index.ts\n");

/***/ }),

/***/ "(api)/./types/room.ts":
/*!***********************!*\
  !*** ./types/room.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RoomAccess: () => (/* binding */ RoomAccess),\n/* harmony export */   RoomAccessLevels: () => (/* binding */ RoomAccessLevels)\n/* harmony export */ });\nvar RoomAccess;\n(function(RoomAccess) {\n    RoomAccess[\"RoomWrite\"] = \"room:write\";\n    RoomAccess[\"RoomRead\"] = \"room:read\";\n    RoomAccess[\"RoomPresenceWrite\"] = \"room:presence:write\";\n})(RoomAccess || (RoomAccess = {}));\nvar RoomAccessLevels;\n(function(RoomAccessLevels) {\n    RoomAccessLevels[\"USER\"] = \"user\";\n    RoomAccessLevels[\"GROUP\"] = \"group\";\n    RoomAccessLevels[\"DEFAULT\"] = \"default\";\n})(RoomAccessLevels || (RoomAccessLevels = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi90eXBlcy9yb29tLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztVQW9CWUE7Ozs7R0FBQUEsZUFBQUE7O1VBTUFDOzs7O0dBQUFBLHFCQUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3R5cGVzL3Jvb20udHM/MTA3NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVc2VySW5mbyB9IGZyb20gXCIuLi9saXZlYmxvY2tzLmNvbmZpZ1wiO1xuaW1wb3J0IHsgRG9jdW1lbnRSb29tTWV0YWRhdGEgfSBmcm9tIFwiLi9kb2N1bWVudFwiO1xuXG4vKipcbiAqIFRoZXNlIHR5cGVzIGFyZSB1c2VkIGluIHRoZSBMaXZlYmxvY2tzIEFQSVxuICogaHR0cHM6Ly9saXZlYmxvY2tzLmlvL2RvY3MvYXBpLXJlZmVyZW5jZS9yZXN0LWFwaS1lbmRwb2ludHNcbiAqL1xuXG5leHBvcnQgdHlwZSBSb29tID0ge1xuICB0eXBlOiBcInJvb21cIjtcbiAgaWQ6IHN0cmluZztcbiAgbWV0YWRhdGE6IERvY3VtZW50Um9vbU1ldGFkYXRhO1xuICBkZWZhdWx0QWNjZXNzZXM6IFJvb21BY2Nlc3NbXTtcbiAgZ3JvdXBzQWNjZXNzZXM6IFJvb21BY2Nlc3NlcztcbiAgdXNlcnNBY2Nlc3NlczogUm9vbUFjY2Vzc2VzO1xuICBkcmFmdDogXCJ5ZXNcIiB8IFwibm9cIjtcbiAgY3JlYXRlZEF0Pzogc3RyaW5nO1xuICBsYXN0Q29ubmVjdGlvbkF0OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgZW51bSBSb29tQWNjZXNzIHtcbiAgUm9vbVdyaXRlID0gXCJyb29tOndyaXRlXCIsXG4gIFJvb21SZWFkID0gXCJyb29tOnJlYWRcIixcbiAgUm9vbVByZXNlbmNlV3JpdGUgPSBcInJvb206cHJlc2VuY2U6d3JpdGVcIixcbn1cblxuZXhwb3J0IGVudW0gUm9vbUFjY2Vzc0xldmVscyB7XG4gIFVTRVIgPSBcInVzZXJcIixcbiAgR1JPVVAgPSBcImdyb3VwXCIsXG4gIERFRkFVTFQgPSBcImRlZmF1bHRcIixcbn1cblxuZXhwb3J0IHR5cGUgUm9vbU1ldGFkYXRhID0gUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgc3RyaW5nW10+O1xuXG5leHBvcnQgdHlwZSBSb29tQWNjZXNzZXMgPSBSZWNvcmQ8c3RyaW5nLCBSb29tQWNjZXNzW10gfCBudWxsPjtcblxuZXhwb3J0IHR5cGUgUm9vbUFjdGl2ZVVzZXIgPSB7XG4gIHR5cGU6IFwidXNlclwiO1xuICBpZDogc3RyaW5nO1xuICBjb25uZWN0aW9uSWQ6IG51bWJlcjtcbiAgaW5mbzogVXNlckluZm87XG59O1xuIl0sIm5hbWVzIjpbIlJvb21BY2Nlc3MiLCJSb29tQWNjZXNzTGV2ZWxzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./types/room.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fliveblocks%2Fdocuments%2Fcreate&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fliveblocks%2Fdocuments%2Fcreate.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();